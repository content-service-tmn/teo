$(document).ready(function(){var e=UIkit.modal("#lang-modal"),t=sessionStorage.getItem("language");null!=t&&"null"!=t||e.show(),$(".lang-var").click(function(){sessionStorage.setItem("language",$(this).data("lang"))}),$(".city_link").click(function(){e.show()}),$(".js-input").on("focus focusout",function(e){e.preventDefault(),$(e.target).parent().toggleClass("is_focused"),"focusout"==e.type&&$(e.target).val($.trim($(e.target).val()))}),$(".js-input").on("change keyup",function(e){e.preventDefault(),""===$.trim($(e.target).val())||$(e.target).hasClass("is_filled")?$(e.target).parent().removeClass("is_filled"):$(e.target).parent().addClass("is_filled"),$(this).parent().removeClass("error")}),$(".js-phone").on("focusout",function(e){e.preventDefault();var t=$(this).val().replace(/[^0-9]/gi,"");7==t.substr(0,1)&&(t="+7"+t.substr(1,t.length-1)),$(this).val(t)});var a=$("#svg1"),n=$("#svg2"),i=$(".header__content"),s=0,o=3;n.find("polygon").click(function(){i.eq(o).toggleClass("active"),o=$(this).index()-1,i.eq(o).toggleClass("active")}).mouseover(function(){s=$(this).index()-1,a.find("polygon").eq(s).toggleClass("active")}).mouseleave(function(){s=$(this).index()-1,a.find("polygon").eq(s).toggleClass("active")});var x=$("#svg_on_mappage");x.find("polygon").mouseover(function(){s=$(this).index()-1,x.find("polygon").eq(s).toggleClass("active")}).mouseleave(function(){s=$(this).index()-1,x.find("polygon").eq(s).toggleClass("active")}).click(function(){s=$(this).index()-1,window.location.replace(x.find("polygon").eq(s).attr("data-link"))}),$("#submit_form").click(function(e){e.preventDefault();var t=$("#callback_source").attr("data-source"),a=$("#name"),n=$("#phone"),i=$("#company"),s=$("#mail"),o=new RegExp(/\d{11}/),x=new RegExp(/.+/),l=new RegExp(/^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,})(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@)(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22))(?:\.(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\]))$/),r=!1;if(x.test(a.val())||(a.parent().addClass("error"),r=!0),o.test(n.val())||(n.parent().addClass("error"),r=!0),l.test(s.val())||(s.parent().addClass("error"),r=!0),r)return!1;var c={name:a.val(),phone:n.val(),company:i.val(),email:s.val()};null!=t&&(c.from=t),a.val(""),n.val(""),i.val(""),s.val(""),$.ajax({url:"/ajax-handler/",type:"POST",data:{data:c},success:function(e){UIkit.offcanvas.hide([force=!1]),UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено":"Ошибка отправки сообщения",status:e,timeout:3e3,pos:"bottom-center"})},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}),$(".proposal_request").click(function(){$("#callback_source").attr("data-source",$(this).attr("data-source"))}),$("#submit_form2").click(function(e){e.preventDefault();var t=$("#name9"),a=$("#text9"),n=$("#mail9"),i=new RegExp(/.+/),s=new RegExp(/^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,})(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@)(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22))(?:\.(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\]))$/),o=!1;if(i.test(t.val())||(t.parent().addClass("error"),o=!0),i.test(a.val())||(a.parent().addClass("error"),o=!0),s.test(n.val())||(n.parent().addClass("error"),o=!0),o)return!1;var x={name:t.val(),email:n.val(),quest:a.val()};t.val(""),a.val(""),n.val(""),$.ajax({url:"/ajax-handler/",type:"POST",data:{data:x},success:function(e){UIkit.offcanvas.hide([force=!1]),UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено":"Ошибка отправки сообщения",status:e,timeout:3e3,pos:"bottom-center"})},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}),$(".inputfile_button").click(function(){$(this).closest(".feedback_form_inputfile_block").find(".inputfile_input").trigger("click")}),$(".inputfile_input").change(function(){var e=$(this).val(),t=e;new RegExp("[^*](.txt|.jpg|.png|.zip|.rar|.doc|.docx|.xls|.xlsx|.pdf)","i").test(e)?5242880<this.files[0].size?(t='<span class="red">Размер файла превышает 5 Мб</span>',$(this).val("")):(val_mas=e.split("\\"),t=val_mas[val_mas.length-1]):(t='<span class="red">Неверное расширение файла</span>',$(this).val(""));$(this).closest(".feedback_form_inputfile_block").find(".inputfile_caption").html(t).attr("title",e)}),$(".feedback_radio_input").change(function(){var e=$(this).val();$(".feedback_container").not("#feedback_"+e).slideUp(300),$("#feedback_"+e).slideDown(300)}),$(".canSpeak").mouseenter(function(){"true"==sessionStorage.getItem("isInvalid")&&function e(t){speechSynthesis.speaking?(speechSynthesis.cancel(),null!==l&&clearTimeout(l),l=setTimeout(function(){e(t)},250)):speechSynthesis.speak(t)}(new SpeechSynthesisUtterance($(this)[0].innerText))});var l=null;var r=$(".menu__phone-container__icon");function c(){var e=$("#grid-group");960<=window.innerWidth?e.height(window.innerHeight-170):e.height("initial")}$(".invalid").click(function(){"true"==sessionStorage.getItem("isInvalid")?($(this).css("fill","black"),r.css("box-shadow","none"),sessionStorage.setItem("isInvalid",!1)):($(this).css("fill","#e9ac45"),$(this).find(".menu__phone-container__icon")&&r.css("box-shadow","white 0px 0px 5px 2px"),sessionStorage.setItem("isInvalid",!0))}),"true"==sessionStorage.getItem("isInvalid")&&($(".invalid").css("fill","#e9ac45"),r.css("box-shadow","white 0px 0px 5px 2px")),c(),$(window).resize(function(){c()}),$(".ecotek_inputtext.custom_form").change(function(){var e=$(this),t=e.val();e.parent().find(".custom_form_span_thema").text(t)}),$(".to_validate").inputmask(),$(".to_validate").on("change keyup",function(e){$(this).parent().removeClass("form__element error")}),$(".ecotek_button3").click(function(e){e.preventDefault();var t=$(this).parent().parent().parent(),a=!1;t.find(".rules_checkbox").is(":checked")||(a=!0,alert("Вы должны согласиться с политикой обработки данных!")),t.find(".to_validate").each(function(e,t){!$(t).inputmask("isComplete")&&".*"!=$(t).data("inputmask-regex")&&0<$(t).parent().parent().find(".notnull_icon").length&&(a=!0,$(t).parent().addClass("form__element error"))});var i=new FormData;if(i.append("full",!0),i.append("id",(new Date).getTime()),!a){t.find(".feedback_form_item").each(function(e,t){try{var a=$(t).find(".feedback_form_caption")[0].childNodes[0].data,n=$(t).find(".ecotek_inputtext")[0];i.append(a.trim(),$(n).val())}catch(e){}});try{i.append("file",t.find("#dopfile").prop("files")[0])}catch(e){}$.ajax({url:"/ajax-handler/",type:"POST",data:i,processData:!1,contentType:!1,success:function(e){UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено, номер обращения: "+i.get("id")+"\nНомер обращения так же продублирован на вашу почту":"Ошибка отправки сообщения",status:e,timeout:6e3,pos:"bottom-center"}),"success"==e&&$(".ecotek_inputtext").val("")},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBsYXRlLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5IiwibW9kYWwiLCJVSWtpdCIsImxhbmciLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJzaG93IiwiY2xpY2siLCJzZXRJdGVtIiwidGhpcyIsImRhdGEiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldCIsInBhcmVudCIsInRvZ2dsZUNsYXNzIiwidHlwZSIsInZhbCIsInRyaW0iLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJyZXBsYWNlIiwic3Vic3RyIiwibGVuZ3RoIiwic3ZnMSIsInN2ZzIiLCJjb250ZW50cyIsImkiLCJqIiwiZmluZCIsImVxIiwiaW5kZXgiLCJtb3VzZW92ZXIiLCJtb3VzZWxlYXZlIiwic3ZnX29uX3BhZ2UiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImF0dHIiLCJmcm9tIiwibmFtZSIsInBob25lIiwiY29tcGFueSIsImVtYWlsIiwicmVnZXhfcGhvbmUiLCJSZWdFeHAiLCJyZWdleF9uYW1lIiwicmVnZXhfZW1haWwiLCJoYXNFcnIiLCJ0ZXN0IiwidW5kZWZpbmVkIiwiYWpheCIsInVybCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJvZmZjYW52YXMiLCJoaWRlIiwiZm9yY2UiLCJub3RpZnkiLCJtZXNzYWdlIiwic3RhdHVzIiwidGltZW91dCIsInBvcyIsImVycm9yIiwicXVlc3QiLCJjbG9zZXN0IiwidHJpZ2dlciIsImNoYW5nZSIsImh0bWwiLCJmaWxlcyIsInNpemUiLCJ2YWxfbWFzIiwic3BsaXQiLCJibG9ja2lkIiwibm90Iiwic2xpZGVVcCIsInNsaWRlRG93biIsIm1vdXNlZW50ZXIiLCJzYXkiLCJ0ZXh0Iiwic3BlZWNoU3ludGhlc2lzIiwic3BlYWtpbmciLCJjYW5jZWwiLCJzYXlUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInNwZWFrIiwiU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlIiwiaW5uZXJUZXh0IiwiaWNvbl9pbnZhbGlkIiwiY2hhbmdlSGVpZ2h0TWFpbkJsb2NrIiwiZ3JvdXAiLCJpbm5lcldpZHRoIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJjc3MiLCJyZXNpemUiLCJzZWxlY3QiLCJ0aXRsZSIsImlucHV0bWFzayIsImN1cnJlbnRfZm9ybSIsImlzIiwiYWxlcnQiLCJlYWNoIiwibnVtIiwiZWwiLCJyZXN1bHRzIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJEYXRlIiwiZ2V0VGltZSIsImNoaWxkTm9kZXMiLCJjb250ZW50X25vZGUiLCJleCIsInByb3AiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwiZ2V0Il0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRUMsVUFBVUMsTUFBTSxXQUdkLElBQUlDLEVBQVFDLE1BQU1ELE1BQU0sZUFDcEJFLEVBQU9DLGVBQWVDLFFBQVEsWUFDdEIsTUFBUkYsR0FBd0IsUUFBUkEsR0FDaEJGLEVBQU1LLE9BTVZSLEVBQUUsYUFBYVMsTUFBTSxXQUNsQkgsZUFBZUksUUFBUSxXQUFZVixFQUFFVyxNQUFNQyxLQUFLLFdBR25EWixFQUFFLGNBQWNTLE1BQU0sV0FDbEJOLEVBQU1LLFNBS1pSLEVBQUUsYUFBYWEsR0FBRyxpQkFBa0IsU0FBU0MsR0FDdkNBLEVBQUVDLGlCQUNGZixFQUFFYyxFQUFFRSxRQUFRQyxTQUFTQyxZQUFZLGNBQ3BCLFlBQVZKLEVBQUVLLE1BQ0RuQixFQUFFYyxFQUFFRSxRQUFRSSxJQUFJcEIsRUFBRXFCLEtBQUtyQixFQUFFYyxFQUFFRSxRQUFRSSxVQUczQ3BCLEVBQUUsYUFBYWEsR0FBRyxlQUFnQixTQUFTQyxHQUN2Q0EsRUFBRUMsaUJBQytCLEtBQTlCZixFQUFFcUIsS0FBS3JCLEVBQUVjLEVBQUVFLFFBQVFJLFFBQWtCcEIsRUFBRWMsRUFBRUUsUUFBUU0sU0FBUyxhQUd6RHRCLEVBQUVjLEVBQUVFLFFBQVFDLFNBQVNNLFlBQVksYUFGakN2QixFQUFFYyxFQUFFRSxRQUFRQyxTQUFTTyxTQUFT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QUFLLG9CQUFzRixFQUF2RFosRUFBRTRHLEdBQUkzRixTQUFTQSxTQUFTZ0IsS0FBSyxpQkFBaUJOLFNBQzNId0IsR0FBUyxFQUNUbkQsRUFBRTRHLEdBQUkzRixTQUFTTyxTQUFTLDBCQUdoQyxJQUFJcUYsRUFBVSxJQUFJQyxTQUdsQixHQUZBRCxFQUFRRSxPQUFPLFFBQVEsR0FDdkJGLEVBQVFFLE9BQU8sTUFBTSxJQUFJQyxNQUFPQyxZQUMzQjlELEVBQVEsQ0FDVG9ELEVBQWF0RSxLQUFLLHVCQUF1QnlFLEtBQUssU0FBVUMsRUFBS0MsR0FDekQsSUFDSSxJQUFJUCxFQUFRckcsRUFBRTRHLEdBQUkzRSxLQUFLLDBCQUEwQixHQUFHaUYsV0FBVyxHQUFHdEcsS0FDOUR1RyxFQUFlbkgsRUFBRTRHLEdBQUkzRSxLQUFLLHFCQUFxQixHQUNuRDRFLEVBQVFFLE9BQU9WLEVBQU1oRixPQUFPckIsRUFBRW1ILEdBQWMvRixPQUM5QyxNQUFPZ0csT0FLYixJQUNJUCxFQUFRRSxPQUFPLE9BQVFSLEVBQWF0RSxLQUFLLFlBQVlvRixLQUFLLFNBQVMsSUFDckUsTUFBT0QsSUFHVHBILEVBQUVzRCxLQUFLLENBQ0hDLElBQUssaUJBQ0xwQyxLQUFNLE9BQ05QLEtBQU1pRyxFQUNOUyxhQUFhLEVBQ2JDLGFBQWEsRUFDYi9ELFFBQVMsU0FBVUMsR0FDZnJELE1BQU15RCxPQUFPLENBQ1RDLFFBQW9CLFdBQVZMLEVBQXVCLHVEQUF5RG9ELEVBQVFXLElBQUksTUFBUSx1REFBMEQsNEJBQ3hLekQsT0FBUU4sRUFDUk8sUUFBUyxJQUNUQyxJQUFLLGtCQUVLLFdBQVZSLEdBQ0F6RCxFQUFFLHFCQUFxQm9CLElBQUksS0FHbkM4QyxNQUFPLFNBQVVULEdBQ2JyRCxNQUFNeUQsT0FBTyxDQUNUQyxRQUFTLDRCQUNUQyxPQUFRLFVBQ1JDLFFBQVMsSUFDVEMsSUFBSyIsImZpbGUiOiJ0ZW1wbGF0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBMYW5ndWFnZSBzZWxlY3QgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xuXG4gICAgdmFyIG1vZGFsID0gVUlraXQubW9kYWwoXCIjbGFuZy1tb2RhbFwiKTtcbiAgICB2YXIgbGFuZyA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2xhbmd1YWdlJyk7XG4gICAgaWYgKGxhbmcgPT0gbnVsbCB8fCBsYW5nID09IFwibnVsbFwiKSB7XG4gICAgICAgIG1vZGFsLnNob3coKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiAoIXdpbmRvdy5sb2NhdGlvbi5ocmVmLm1hdGNoKGxhbmcpKXtcbiAgICAgICAgLy8gICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbGFuZztcbiAgICAgICAgLy8gfVxuICAgIH1cbiAgICAkKFwiLmxhbmctdmFyXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwibGFuZ3VhZ2VcIiwgJCh0aGlzKS5kYXRhKFwibGFuZ1wiKSk7XG4gICAgfSk7XG5cbiAgICAkKFwiLmNpdHlfbGlua1wiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1vZGFsLnNob3coKTtcbiAgICB9KTtcblxuXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEVuZCBsYW5ndWFnZSBzZWxlY3QgLS0tLS0tLS0tLS0tLS0tLS0tLS8vXG4gICQoJy5qcy1pbnB1dCcpLm9uKCdmb2N1cyBmb2N1c291dCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoKS50b2dnbGVDbGFzcygnaXNfZm9jdXNlZCcpO1xuICAgICAgICBpZihlLnR5cGUgPT0gJ2ZvY3Vzb3V0Jykge1xuICAgICAgICAgICAgJChlLnRhcmdldCkudmFsKCQudHJpbSgkKGUudGFyZ2V0KS52YWwoKSkpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgJCgnLmpzLWlucHV0Jykub24oJ2NoYW5nZSBrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZigkLnRyaW0oJChlLnRhcmdldCkudmFsKCkpICE9PSAnJyAmJiAhJChlLnRhcmdldCkuaGFzQ2xhc3MoJ2lzX2ZpbGxlZCcpKSB7XG4gICAgICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoKS5hZGRDbGFzcygnaXNfZmlsbGVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnaXNfZmlsbGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImVycm9yXCIpO1xuICAgIH0pO1xuICAgICQoJy5qcy1waG9uZScpLm9uKCdmb2N1c291dCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgdmFsID0gJCh0aGlzKS52YWwoKS5yZXBsYWNlKC9bXjAtOV0vZ2ksJycpO1xuICAgICAgICBpZih2YWwuc3Vic3RyKDAsIDEpID09IDcpIHtcbiAgICAgICAgICAgIHZhbCA9ICcrNycgKyB2YWwuc3Vic3RyKDEsIHZhbC5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuICAgICAgICAkKHRoaXMpLnZhbCh2YWwpO1xuICAgIH0pO1xuXG4gICAgdmFyIHN2ZzEgPSAkKCcjc3ZnMScpO1xuICAgIHZhciBzdmcyID0gJCgnI3N2ZzInKTtcbiAgICB2YXIgY29udGVudHMgPSAkKCcuaGVhZGVyX19jb250ZW50Jyk7XG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBqID0gMztcbiAgICBzdmcyLmZpbmQoJ3BvbHlnb24nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgIGNvbnRlbnRzLmVxKGopLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgIGogPSAkKHRoaXMpLmluZGV4KCktMTtcbiAgICAgIGNvbnRlbnRzLmVxKGopLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KVxuICAgIC5tb3VzZW92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICBpID0gJCh0aGlzKS5pbmRleCgpLTE7XG4gICAgICBzdmcxLmZpbmQoJ3BvbHlnb24nKS5lcShpKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgfSlcbiAgICAubW91c2VsZWF2ZShmdW5jdGlvbigpIHtcbiAgICAgIGkgPSAkKHRoaXMpLmluZGV4KCktMTtcbiAgICAgIHN2ZzEuZmluZCgncG9seWdvbicpLmVxKGkpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIHZhciBzdmdfb25fcGFnZSA9ICQoXCIjc3ZnX29uX21hcHBhZ2VcIik7XG4gICAgc3ZnX29uX3BhZ2UuZmluZCgncG9seWdvbicpXG4gICAgICAgIC5tb3VzZW92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICBpID0gJCh0aGlzKS5pbmRleCgpLTE7XG4gICAgICAgIHN2Z19vbl9wYWdlLmZpbmQoJ3BvbHlnb24nKS5lcShpKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaSA9ICQodGhpcykuaW5kZXgoKS0xO1xuICAgICAgICAgICAgc3ZnX29uX3BhZ2UuZmluZCgncG9seWdvbicpLmVxKGkpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGkgPSAkKHRoaXMpLmluZGV4KCktMTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHN2Z19vbl9wYWdlLmZpbmQoJ3BvbHlnb24nKS5lcShpKS5hdHRyKFwiZGF0YS1saW5rXCIpKTtcbiAgICAgICAgfSk7XG5cbiAgICAkKFwiI3N1Ym1pdF9mb3JtXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgZnJvbSA9ICQoXCIjY2FsbGJhY2tfc291cmNlXCIpLmF0dHIoXCJkYXRhLXNvdXJjZVwiKTtcbiAgICAgICAgdmFyIG5hbWUgPSAkKFwiI25hbWVcIik7XG4gICAgICAgIHZhciBwaG9uZSA9ICQoXCIjcGhvbmVcIik7XG4gICAgICAgIHZhciBjb21wYW55ID0gJChcIiNjb21wYW55XCIpO1xuICAgICAgICB2YXIgZW1haWwgPSAkKFwiI21haWxcIik7XG5cbiAgICAgICAgdmFyIHJlZ2V4X3Bob25lID0gbmV3IFJlZ0V4cCgvXFxkezExfS8pO1xuICAgICAgICB2YXIgcmVnZXhfbmFtZSA9IG5ldyBSZWdFeHAoLy4rLyk7XG4gICAgICAgIHZhciByZWdleF9lbWFpbCA9IG5ldyBSZWdFeHAoL14oPyEoPzooPzpcXHgyMj9cXHg1Q1tcXHgwMC1cXHg3RV1cXHgyMj8pfCg/OlxceDIyP1teXFx4NUNcXHgyMl1cXHgyMj8pKXsyNTUsfSkoPyEoPzooPzpcXHgyMj9cXHg1Q1tcXHgwMC1cXHg3RV1cXHgyMj8pfCg/OlxceDIyP1teXFx4NUNcXHgyMl1cXHgyMj8pKXs2NSx9QCkoPzooPzpbXFx4MjFcXHgyMy1cXHgyN1xceDJBXFx4MkJcXHgyRFxceDJGLVxceDM5XFx4M0RcXHgzRlxceDVFLVxceDdFXSspfCg/OlxceDIyKD86W1xceDAxLVxceDA4XFx4MEJcXHgwQ1xceDBFLVxceDFGXFx4MjFcXHgyMy1cXHg1QlxceDVELVxceDdGXXwoPzpcXHg1Q1tcXHgwMC1cXHg3Rl0pKSpcXHgyMikpKD86XFwuKD86KD86W1xceDIxXFx4MjMtXFx4MjdcXHgyQVxceDJCXFx4MkRcXHgyRi1cXHgzOVxceDNEXFx4M0ZcXHg1RS1cXHg3RV0rKXwoPzpcXHgyMig/OltcXHgwMS1cXHgwOFxceDBCXFx4MENcXHgwRS1cXHgxRlxceDIxXFx4MjMtXFx4NUJcXHg1RC1cXHg3Rl18KD86XFx4NUNbXFx4MDAtXFx4N0ZdKSkqXFx4MjIpKSkqQCg/Oig/Oig/IS4qW14uXXs2NCx9KSg/Oig/Oig/OnhuLS0pP1thLXowLTldKyg/Oi1bYS16MC05XSspKlxcLil7MSwxMjZ9KXsxLH0oPzooPzpbYS16XVthLXowLTldKil8KD86KD86eG4tLSlbYS16MC05XSspKSg/Oi1bYS16MC05XSspKil8KD86XFxbKD86KD86SVB2NjooPzooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezd9KXwoPzooPyEoPzouKlthLWYwLTldWzpcXF1dKXs3LH0pKD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDV9KT86Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCw1fSk/KSkpfCg/Oig/OklQdjY6KD86KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXs1fTopfCg/Oig/ISg/Oi4qW2EtZjAtOV06KXs1LH0pKD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDN9KT86Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCwzfTopPykpKT8oPzooPzoyNVswLTVdKXwoPzoyWzAtNF1bMC05XSl8KD86MVswLTldezJ9KXwoPzpbMS05XT9bMC05XSkpKD86XFwuKD86KD86MjVbMC01XSl8KD86MlswLTRdWzAtOV0pfCg/OjFbMC05XXsyfSl8KD86WzEtOV0/WzAtOV0pKSl7M30pKVxcXSkpJC8pO1xuXG4gICAgICAgIHZhciBoYXNFcnIgPSBmYWxzZTtcblxuICAgICAgICBpZiAoIXJlZ2V4X25hbWUudGVzdChuYW1lLnZhbCgpKSkge1xuICAgICAgICAgICAgbmFtZS5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlZ2V4X3Bob25lLnRlc3QocGhvbmUudmFsKCkpKSB7XG4gICAgICAgICAgICBwaG9uZS5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlZ2V4X2VtYWlsLnRlc3QoZW1haWwudmFsKCkpKSB7XG4gICAgICAgICAgICBlbWFpbC5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzRXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUudmFsKCksXG4gICAgICAgICAgICBwaG9uZTogcGhvbmUudmFsKCksXG4gICAgICAgICAgICBjb21wYW55OiBjb21wYW55LnZhbCgpLFxuICAgICAgICAgICAgZW1haWw6IGVtYWlsLnZhbCgpXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGZyb20gIT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIGRhdGEuZnJvbSA9IGZyb207XG4gICAgICAgIH1cblxuICAgICAgICBuYW1lLnZhbChcIlwiKTtcbiAgICAgICAgcGhvbmUudmFsKFwiXCIpO1xuICAgICAgICBjb21wYW55LnZhbChcIlwiKTtcbiAgICAgICAgZW1haWwudmFsKFwiXCIpO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiL2FqYXgtaGFuZGxlci9cIixcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHtkYXRhOiBkYXRhfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBVSWtpdC5vZmZjYW52YXMuaGlkZShbZm9yY2UgPSBmYWxzZV0pO1xuICAgICAgICAgICAgICAgIFVJa2l0Lm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IChyZXN1bHQgPT0gXCJzdWNjZXNzXCIpID8gJ9CS0LDRiNC1INGB0L7QvtCx0YnQtdC90LjQtSDRg9GB0L/QtdGI0L3QviDQvtGC0L/RgNCw0LLQu9C10L3QvicgOiAn0J7RiNC40LHQutCwINC+0YLQv9GA0LDQstC60Lgg0YHQvtC+0LHRidC10L3QuNGPJyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBvczogJ2JvdHRvbS1jZW50ZXInXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBVSWtpdC5ub3RpZnkoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn0J7RiNC40LHQutCwINC+0YLQv9GA0LDQstC60Lgg0YHQvtC+0LHRidC10L3QuNGPJyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnd2FybmluZycsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBvczogJ2JvdHRvbS1jZW50ZXInXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgICQoXCIucHJvcG9zYWxfcmVxdWVzdFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjY2FsbGJhY2tfc291cmNlXCIpLmF0dHIoXCJkYXRhLXNvdXJjZVwiLCAkKHRoaXMpLmF0dHIoXCJkYXRhLXNvdXJjZVwiKSk7XG4gICAgfSk7XG5cbiAgICAkKFwiI3N1Ym1pdF9mb3JtMlwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIG5hbWUgPSAkKFwiI25hbWU5XCIpO1xuICAgICAgICB2YXIgcXVlc3QgPSAkKFwiI3RleHQ5XCIpO1xuICAgICAgICB2YXIgZW1haWwgPSAkKFwiI21haWw5XCIpO1xuXG4gICAgICAgIHZhciByZWdleF9uYW1lID0gbmV3IFJlZ0V4cCgvLisvKTtcbiAgICAgICAgdmFyIHJlZ2V4X2VtYWlsID0gbmV3IFJlZ0V4cCgvXig/ISg/Oig/OlxceDIyP1xceDVDW1xceDAwLVxceDdFXVxceDIyPyl8KD86XFx4MjI/W15cXHg1Q1xceDIyXVxceDIyPykpezI1NSx9KSg/ISg/Oig/OlxceDIyP1xceDVDW1xceDAwLVxceDdFXVxceDIyPyl8KD86XFx4MjI/W15cXHg1Q1xceDIyXVxceDIyPykpezY1LH1AKSg/Oig/OltcXHgyMVxceDIzLVxceDI3XFx4MkFcXHgyQlxceDJEXFx4MkYtXFx4MzlcXHgzRFxceDNGXFx4NUUtXFx4N0VdKyl8KD86XFx4MjIoPzpbXFx4MDEtXFx4MDhcXHgwQlxceDBDXFx4MEUtXFx4MUZcXHgyMVxceDIzLVxceDVCXFx4NUQtXFx4N0ZdfCg/OlxceDVDW1xceDAwLVxceDdGXSkpKlxceDIyKSkoPzpcXC4oPzooPzpbXFx4MjFcXHgyMy1cXHgyN1xceDJBXFx4MkJcXHgyRFxceDJGLVxceDM5XFx4M0RcXHgzRlxceDVFLVxceDdFXSspfCg/OlxceDIyKD86W1xceDAxLVxceDA4XFx4MEJcXHgwQ1xceDBFLVxceDFGXFx4MjFcXHgyMy1cXHg1QlxceDVELVxceDdGXXwoPzpcXHg1Q1tcXHgwMC1cXHg3Rl0pKSpcXHgyMikpKSpAKD86KD86KD8hLipbXi5dezY0LH0pKD86KD86KD86eG4tLSk/W2EtejAtOV0rKD86LVthLXowLTldKykqXFwuKXsxLDEyNn0pezEsfSg/Oig/OlthLXpdW2EtejAtOV0qKXwoPzooPzp4bi0tKVthLXowLTldKykpKD86LVthLXowLTldKykqKXwoPzpcXFsoPzooPzpJUHY2Oig/Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7N30pfCg/Oig/ISg/Oi4qW2EtZjAtOV1bOlxcXV0pezcsfSkoPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezAsNX0pPzo6KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDV9KT8pKSl8KD86KD86SVB2NjooPzooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezV9Oil8KD86KD8hKD86LipbYS1mMC05XTopezUsfSkoPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezAsM30pPzo6KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDN9Oik/KSkpPyg/Oig/OjI1WzAtNV0pfCg/OjJbMC00XVswLTldKXwoPzoxWzAtOV17Mn0pfCg/OlsxLTldP1swLTldKSkoPzpcXC4oPzooPzoyNVswLTVdKXwoPzoyWzAtNF1bMC05XSl8KD86MVswLTldezJ9KXwoPzpbMS05XT9bMC05XSkpKXszfSkpXFxdKSkkLyk7XG5cbiAgICAgICAgdmFyIGhhc0VyciA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghcmVnZXhfbmFtZS50ZXN0KG5hbWUudmFsKCkpKSB7XG4gICAgICAgICAgICBuYW1lLnBhcmVudCgpLmFkZENsYXNzKFwiZXJyb3JcIik7XG4gICAgICAgICAgICBoYXNFcnIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVnZXhfbmFtZS50ZXN0KHF1ZXN0LnZhbCgpKSkge1xuICAgICAgICAgICAgcXVlc3QucGFyZW50KCkuYWRkQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZWdleF9lbWFpbC50ZXN0KGVtYWlsLnZhbCgpKSkge1xuICAgICAgICAgICAgZW1haWwucGFyZW50KCkuYWRkQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0Vycikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLnZhbCgpLFxuICAgICAgICAgICAgZW1haWw6IGVtYWlsLnZhbCgpLFxuICAgICAgICAgICAgcXVlc3Q6IHF1ZXN0LnZhbCgpXG4gICAgICAgIH07XG5cblxuICAgICAgICBuYW1lLnZhbChcIlwiKTtcbiAgICAgICAgcXVlc3QudmFsKFwiXCIpO1xuICAgICAgICBlbWFpbC52YWwoXCJcIik7XG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCIvYWpheC1oYW5kbGVyL1wiLFxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge2RhdGE6IGRhdGF9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIFVJa2l0Lm9mZmNhbnZhcy5oaWRlKFtmb3JjZSA9IGZhbHNlXSk7XG4gICAgICAgICAgICAgICAgVUlraXQubm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogKHJlc3VsdCA9PSBcInN1Y2Nlc3NcIikgPyAn0JLQsNGI0LUg0YHQvtC+0LHRidC10L3QuNC1INGD0YHQv9C10YjQvdC+INC+0YLQv9GA0LDQstC70LXQvdC+JyA6ICfQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Y8nLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcG9zOiAnYm90dG9tLWNlbnRlcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIFVJa2l0Lm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Y8nLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcG9zOiAnYm90dG9tLWNlbnRlcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG5cblxuICAgICQoXCIuaW5wdXRmaWxlX2J1dHRvblwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYnV0dG9uID0gJCh0aGlzKS5jbG9zZXN0KFwiLmZlZWRiYWNrX2Zvcm1faW5wdXRmaWxlX2Jsb2NrXCIpLmZpbmQoXCIuaW5wdXRmaWxlX2lucHV0XCIpO1xuICAgICAgICBidXR0b24udHJpZ2dlcihcImNsaWNrXCIpO1xuICAgIH0pO1xuXG4gICAgJChcIi5pbnB1dGZpbGVfaW5wdXRcIikuY2hhbmdlKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciB2YWwgPSAkKHRoaXMpLnZhbCgpO1xuXG4gICAgICAgIHZhciBodG1sID0gdmFsO1xuICAgICAgICB2YXIgcmVnPSBuZXcgUmVnRXhwKFwiW14qXShcXC50eHR8XFwuanBnfFxcLnBuZ3xcXC56aXB8XFwucmFyfFxcLmRvY3xcXC5kb2N4fFxcLnhsc3xcXC54bHN4fFxcLnBkZilcIiwgJ2knKTtcbiAgICAgICAgaWYgKCFyZWcudGVzdCh2YWwpKSB7XG4gICAgICAgICAgICBodG1sID0gXCI8c3BhbiBjbGFzcz1cXFwicmVkXFxcIj7QndC10LLQtdGA0L3QvtC1INGA0LDRgdGI0LjRgNC10L3QuNC1INGE0LDQudC70LA8L3NwYW4+XCI7XG4gICAgICAgICAgICAkKHRoaXMpLnZhbChcIlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5maWxlc1swXS5zaXplO1xuICAgICAgICAgICAgaWYgKHNpemUgPiA1ICogMTAyNCAqIDEwMjQpe1xuICAgICAgICAgICAgICAgIGh0bWwgPSBcIjxzcGFuIGNsYXNzPVxcXCJyZWRcXFwiPtCg0LDQt9C80LXRgCDRhNCw0LnQu9CwINC/0YDQtdCy0YvRiNCw0LXRgiA1INCc0LE8L3NwYW4+XCI7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoXCJcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbF9tYXMgPSB2YWwuc3BsaXQoXCJcXFxcXCIpO1xuICAgICAgICAgICAgICAgIGh0bWwgPSB2YWxfbWFzW3ZhbF9tYXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgICQodGhpcykuY2xvc2VzdChcIi5mZWVkYmFja19mb3JtX2lucHV0ZmlsZV9ibG9ja1wiKS5maW5kKFwiLmlucHV0ZmlsZV9jYXB0aW9uXCIpLmh0bWwoaHRtbCkuYXR0cihcInRpdGxlXCIsIHZhbCk7XG4gICAgfSk7XG5cbiAgICAkKFwiLmZlZWRiYWNrX3JhZGlvX2lucHV0XCIpLmNoYW5nZShmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYmxvY2tpZCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICQoXCIuZmVlZGJhY2tfY29udGFpbmVyXCIpLm5vdChcIiNmZWVkYmFja19cIiArIGJsb2NraWQpLnNsaWRlVXAoMzAwKTtcbiAgICAgICAgJChcIiNmZWVkYmFja19cIiArIGJsb2NraWQpLnNsaWRlRG93bigzMDApO1xuICAgIH0pO1xuICAgICQoXCIuY2FuU3BlYWtcIikubW91c2VlbnRlcihmdW5jdGlvbigpe1xuICAgICAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnaXNJbnZhbGlkJykgPT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgIHZhciBtc2cgPSBuZXcgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKCQodGhpcylbMF0uaW5uZXJUZXh0KTtcbiAgICAgICAgICAgIHNheShtc2cpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgc2F5VGltZW91dCA9IG51bGw7XG5cbiAgICBmdW5jdGlvbiBzYXkodGV4dCkge1xuICAgICAgICBpZiAoc3BlZWNoU3ludGhlc2lzLnNwZWFraW5nKSB7XG4gICAgICAgICAgICAvLyBTcGVlY2hTeW4gaXMgY3VycmVudGx5IHNwZWFraW5nLCBjYW5jZWwgdGhlIGN1cnJlbnQgdXR0ZXJhbmNlKHMpXG4gICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMuY2FuY2VsKCk7XG5cbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBkb24ndCBjcmVhdGUgbW9yZSB0aGFuIG9uZSB0aW1lb3V0Li4uXG4gICAgICAgICAgICBpZiAoc2F5VGltZW91dCAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2F5VGltZW91dCk7XG5cbiAgICAgICAgICAgIHNheVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgc2F5KHRleHQpOyB9LCAyNTApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gR29vZCB0byBnb1xuICAgICAgICAgICAgc3BlZWNoU3ludGhlc2lzLnNwZWFrKHRleHQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGljb25faW52YWxpZCA9ICQoJy5tZW51X19waG9uZS1jb250YWluZXJfX2ljb24nKTtcblxuICAgICQoXCIuaW52YWxpZFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdpc0ludmFsaWQnKSA9PSBcInRydWVcIil7XG4gICAgICAgICAgICAkKHRoaXMpLmNzcyhcImZpbGxcIixcImJsYWNrXCIpO1xuICAgICAgICAgICAgaWNvbl9pbnZhbGlkLmNzcyhcImJveC1zaGFkb3dcIiwgXCJub25lXCIpO1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnaXNJbnZhbGlkJywgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJmaWxsXCIsIFwiI2U5YWM0NVwiKTtcblxuICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLm1lbnVfX3Bob25lLWNvbnRhaW5lcl9faWNvbicpKSB7XG4gICAgICAgICAgICAgICAgaWNvbl9pbnZhbGlkLmNzcyhcImJveC1zaGFkb3dcIiwgXCJ3aGl0ZSAwcHggMHB4IDVweCAycHhcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2lzSW52YWxpZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2lzSW52YWxpZCcpID09IFwidHJ1ZVwiKXtcbiAgICAgICAgJChcIi5pbnZhbGlkXCIpLmNzcyhcImZpbGxcIixcIiNlOWFjNDVcIik7XG4gICAgICAgIGljb25faW52YWxpZC5jc3MoXCJib3gtc2hhZG93XCIsIFwid2hpdGUgMHB4IDBweCA1cHggMnB4XCIpO1xuICAgIH1cblxuICAgIGNoYW5nZUhlaWdodE1haW5CbG9jaygpO1xuXG4gICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoYW5nZUhlaWdodE1haW5CbG9jaygpXG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBjaGFuZ2VIZWlnaHRNYWluQmxvY2soKSB7XG4gICAgICAgIHZhciBncm91cCA9ICQoJyNncmlkLWdyb3VwJyk7XG5cbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID49IDk2MClcbiAgICAgICAgICAgIGdyb3VwLmhlaWdodCh3aW5kb3cuaW5uZXJIZWlnaHQgLSAxNzApO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBncm91cC5oZWlnaHQoJ2luaXRpYWwnKVxuICAgIH1cblxuICAgICQoJy5lY290ZWtfaW5wdXR0ZXh0LmN1c3RvbV9mb3JtJykuY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGVjdCA9ICQodGhpcyk7XG4gICAgICAgIHZhciB0aXRsZSA9IHNlbGVjdC52YWwoKTtcblxuICAgICAgICBzZWxlY3QucGFyZW50KCkuZmluZCgnLmN1c3RvbV9mb3JtX3NwYW5fdGhlbWEnKS50ZXh0KHRpdGxlKTtcbiAgICB9KTtcblxuICAgICQoXCIudG9fdmFsaWRhdGVcIikuaW5wdXRtYXNrKCk7XG4gICAgJChcIi50b192YWxpZGF0ZVwiKS5vbignY2hhbmdlIGtleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImZvcm1fX2VsZW1lbnQgZXJyb3JcIik7XG4gICAgfSk7XG5cblxuXG5cbiAgICAkKFwiLmVjb3Rla19idXR0b24zXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB2YXIgY3VycmVudF9mb3JtID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKTtcbiAgICAgICAgdmFyIGhhc0VyciA9IGZhbHNlO1xuICAgICAgICBpZiAoIWN1cnJlbnRfZm9ybS5maW5kKFwiLnJ1bGVzX2NoZWNrYm94XCIpLmlzKCc6Y2hlY2tlZCcpKXtcbiAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgICAgICBhbGVydChcItCS0Ysg0LTQvtC70LbQvdGLINGB0L7Qs9C70LDRgdC40YLRjNGB0Y8g0YEg0L/QvtC70LjRgtC40LrQvtC5INC+0LHRgNCw0LHQvtGC0LrQuCDQtNCw0L3QvdGL0YUhXCIpO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRfZm9ybS5maW5kKFwiLnRvX3ZhbGlkYXRlXCIpLmVhY2goZnVuY3Rpb24gKG51bSwgZWwpIHtcbiAgICAgICAgICAgIGlmICghJChlbCkuaW5wdXRtYXNrKFwiaXNDb21wbGV0ZVwiKSAmJiAoJChlbCkuZGF0YShcImlucHV0bWFzay1yZWdleFwiKSAhPSBcIi4qXCIpICYmICQoZWwpLnBhcmVudCgpLnBhcmVudCgpLmZpbmQoXCIubm90bnVsbF9pY29uXCIpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBoYXNFcnIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICQoZWwpLnBhcmVudCgpLmFkZENsYXNzKFwiZm9ybV9fZWxlbWVudCBlcnJvclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciByZXN1bHRzID0gbmV3IEZvcm1EYXRhO1xuICAgICAgICByZXN1bHRzLmFwcGVuZChcImZ1bGxcIiwgdHJ1ZSk7XG4gICAgICAgIHJlc3VsdHMuYXBwZW5kKFwiaWRcIiwgbmV3IERhdGUoKS5nZXRUaW1lKCkpO1xuICAgICAgICBpZiAoIWhhc0Vycikge1xuICAgICAgICAgICAgY3VycmVudF9mb3JtLmZpbmQoXCIuZmVlZGJhY2tfZm9ybV9pdGVtXCIpLmVhY2goZnVuY3Rpb24gKG51bSwgZWwpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSAkKGVsKS5maW5kKFwiLmZlZWRiYWNrX2Zvcm1fY2FwdGlvblwiKVswXS5jaGlsZE5vZGVzWzBdLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50X25vZGUgPSAkKGVsKS5maW5kKFwiLmVjb3Rla19pbnB1dHRleHRcIilbMF07XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKHRpdGxlLnRyaW0oKSwkKGNvbnRlbnRfbm9kZSkudmFsKCkpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgnZmlsZScsIGN1cnJlbnRfZm9ybS5maW5kKFwiI2RvcGZpbGVcIikucHJvcCgnZmlsZXMnKVswXSk7XG4gICAgICAgICAgICB9IGNhdGNoIChleCl7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiBcIi9hamF4LWhhbmRsZXIvXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdHMsXG4gICAgICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIFVJa2l0Lm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAocmVzdWx0ID09IFwic3VjY2Vzc1wiKSA/ICfQktCw0YjQtSDRgdC+0L7QsdGJ0LXQvdC40LUg0YPRgdC/0LXRiNC90L4g0L7RgtC/0YDQsNCy0LvQtdC90L4sINC90L7QvNC10YAg0L7QsdGA0LDRidC10L3QuNGPOiAnICsgcmVzdWx0cy5nZXQoXCJpZFwiKSArIFwiXFxu0J3QvtC80LXRgCDQvtCx0YDQsNGJ0LXQvdC40Y8g0YLQsNC6INC20LUg0L/RgNC+0LTRg9Cx0LvQuNGA0L7QstCw0L0g0L3QsCDQstCw0YjRgyDQv9C+0YfRgtGDXCIgIDogJ9Ce0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjycsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDYwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3M6ICdib3R0b20tY2VudGVyJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5lY290ZWtfaW5wdXR0ZXh0XCIpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgVUlraXQubm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Y8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnd2FybmluZycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAzMDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zOiAnYm90dG9tLWNlbnRlcidcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG5cblxufSk7Il19
