!function(r){"use strict";var o;function c(t,i,n){var e,s=r.$.Deferred(),a=t,o=t;return n[0]===i[0]?s.resolve():("object"==typeof t&&(a=t[0],o=t[1]||t[0]),r.$body.css("overflow-x","hidden"),e=function(){i&&i.hide().removeClass("uk-active "+o+" uk-animation-reverse"),n.addClass(a).one(r.support.animation.end,function(){setTimeout(function(){n.removeClass(""+a).css({opacity:"",display:""})},0),s.resolve(),r.$body.css("overflow-x",""),i&&i.css({opacity:"",display:""})}.bind(this)).show()},n.css("animation-duration",this.options.duration+"ms"),i&&i.length?(i.css("animation-duration",this.options.duration+"ms"),i.css("display","none").addClass(o+" uk-animation-reverse").one(r.support.animation.end,function(){e()}.bind(this)).css("display","")):(n.addClass("uk-active"),e())),s.promise()}r.component("switcher",{defaults:{connect:!1,toggle:">*",active:0,animation:!1,duration:200,swiping:!0},animating:!1,boot:function(){r.ready(function(t){r.$("[data-uk-switcher]",t).each(function(){var t=r.$(this);if(!t.data("switcher"))r.switcher(t,r.Utils.options(t.attr("data-uk-switcher")))})})},init:function(){var n=this;this.on("click.uk.switcher",this.options.toggle,function(t){t.preventDefault(),n.show(this)}),this.options.connect&&(this.connect=r.$(this.options.connect),this.connect.length&&(this.connect.on("click.uk.switcher","[data-uk-switcher-item]",function(t){t.preventDefault();var i=r.$(this).attr("data-uk-switcher-item");if(n.index!=i)switch(i){case"next":case"previous":n.show(n.index+("next"==i?1:-1));break;default:n.show(parseInt(i,10))}}),this.options.swiping&&this.connect.on("swipeRight swipeLeft",function(t){t.preventDefault(),window.getSelection().toString()||n.show(n.index+("swipeLeft"==t.type?1:-1))}),this.update()))},update:function(){this.connect.children().removeClass("uk-active").attr("aria-hidden","true");var t=this.find(this.options.toggle),i=t.filter(".uk-active");if(i.length)this.show(i,!1);else{if(!1===this.options.active)return;i=t.eq(this.options.active),this.show(i.length?i:t.eq(0),!1)}t.not(i).attr("aria-expanded","false"),i.attr("aria-expanded","true")},show:function(t,i){if(!this.animating){var n=this.find(this.options.toggle);isNaN(t)?t=r.$(t):(t=t<0?n.length-1:t,t=n.eq(n[t]?t:0));var s=this,e=r.$(t),a=o[this.options.animation]||function(t,i){if(!s.options.animation)return o.none.apply(s);var n=s.options.animation.split(",");return 1==n.length&&(n[1]=n[0]),n[0]=n[0].trim(),n[1]=n[1].trim(),c.apply(s,[n,t,i])};!1!==i&&r.support.animation||(a=o.none),e.hasClass("uk-disabled")||(n.attr("aria-expanded","false"),e.attr("aria-expanded","true"),n.filter(".uk-active").removeClass("uk-active"),e.addClass("uk-active"),this.options.connect&&this.connect.length&&(this.index=this.find(this.options.toggle).index(e),-1==this.index&&(this.index=0),this.connect.each(function(){var t=r.$(this),i=r.$(t.children()),n=r.$(i.filter(".uk-active")),e=r.$(i.eq(s.index));s.animating=!0,a.apply(s,[n,e]).then(function(){n.removeClass("uk-active"),e.addClass("uk-active"),n.attr("aria-hidden","true"),e.attr("aria-hidden","false"),r.Utils.checkDisplay(e,!0),s.animating=!1})})),this.trigger("show.uk.switcher",[e]))}}}),o={none:function(){var t=r.$.Deferred();return t.resolve(),t.promise()},fade:function(t,i){return c.apply(this,["uk-animation-fade",t,i])},"slide-bottom":function(t,i){return c.apply(this,["uk-animation-slide-bottom",t,i])},"slide-top":function(t,i){return c.apply(this,["uk-animation-slide-top",t,i])},"slide-vertical":function(t,i,n){var e=["uk-animation-slide-top","uk-animation-slide-bottom"];return t&&t.index()>i.index()&&e.reverse(),c.apply(this,[e,t,i])},"slide-left":function(t,i){return c.apply(this,["uk-animation-slide-left",t,i])},"slide-right":function(t,i){return c.apply(this,["uk-animation-slide-right",t,i])},"slide-horizontal":function(t,i,n){var e=["uk-animation-slide-right","uk-animation-slide-left"];return t&&t.index()>i.index()&&e.reverse(),c.apply(this,[e,t,i])},scale:function(t,i){return c.apply(this,["uk-animation-scale-up",t,i])}},r.switcher.animations=o}(UIkit2);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvc3dpdGNoZXIuanMiXSwibmFtZXMiOlsiVUkiLCJBbmltYXRpb25zIiwiY29yZUFuaW1hdGlvbiIsImNscyIsImN1cnJlbnQiLCJuZXh0IiwicmVsZWFzZSIsImQiLCIkIiwiRGVmZXJyZWQiLCJjbHNJbiIsImNsc091dCIsInJlc29sdmUiLCIkYm9keSIsImNzcyIsImhpZGUiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwib25lIiwic3VwcG9ydCIsImFuaW1hdGlvbiIsImVuZCIsInNldFRpbWVvdXQiLCJvcGFjaXR5IiwiZGlzcGxheSIsImJpbmQiLCJ0aGlzIiwic2hvdyIsIm9wdGlvbnMiLCJkdXJhdGlvbiIsImxlbmd0aCIsInByb21pc2UiLCJjb21wb25lbnQiLCJkZWZhdWx0cyIsImNvbm5lY3QiLCJ0b2dnbGUiLCJhY3RpdmUiLCJzd2lwaW5nIiwiYW5pbWF0aW5nIiwiYm9vdCIsInJlYWR5IiwiY29udGV4dCIsImVhY2giLCJzd2l0Y2hlciIsImRhdGEiLCJVdGlscyIsImF0dHIiLCJpbml0IiwiJHRoaXMiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIml0ZW0iLCJpbmRleCIsInBhcnNlSW50Iiwid2luZG93IiwiZ2V0U2VsZWN0aW9uIiwidG9TdHJpbmciLCJ0eXBlIiwidXBkYXRlIiwiY2hpbGRyZW4iLCJ0b2dnbGVzIiwiZmluZCIsImZpbHRlciIsImVxIiwibm90IiwidGFiIiwiYW5pbWF0ZSIsImlzTmFOIiwibm9uZSIsImFwcGx5IiwiYW5pbSIsInNwbGl0IiwidHJpbSIsImhhc0NsYXNzIiwiY29udGFpbmVyIiwidGhlbiIsImNoZWNrRGlzcGxheSIsInRyaWdnZXIiLCJmYWRlIiwic2xpZGUtYm90dG9tIiwic2xpZGUtdG9wIiwic2xpZGUtdmVydGljYWwiLCJkaXIiLCJyZXZlcnNlIiwic2xpZGUtbGVmdCIsInNsaWRlLXJpZ2h0Iiwic2xpZGUtaG9yaXpvbnRhbCIsInNjYWxlIiwiYW5pbWF0aW9ucyIsIlVJa2l0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NUMsS0FBTSxDQUFDLDRCQUE2QnRCLEVBQVNDLEtBRzVFNEUsWUFBYSxTQUFTN0UsRUFBU0MsR0FDM0IsT0FBT0gsRUFBY29FLE1BQU01QyxLQUFNLENBQUMseUJBQTBCdEIsRUFBU0MsS0FHekU2RSxpQkFBa0IsU0FBUzlFLEVBQVNDLEVBQU04RSxHQUV0QyxJQUFJWixFQUFPLENBQUMseUJBQTBCLDZCQU10QyxPQUpJbkUsR0FBV0EsRUFBUWlELFFBQVVoRCxFQUFLZ0QsU0FDbENrQixFQUFLYSxVQUdGbEYsRUFBY29FLE1BQU01QyxLQUFNLENBQUM2QyxFQUFNbkUsRUFBU0MsS0FHckRnRixhQUFjLFNBQVNqRixFQUFTQyxHQUM1QixPQUFPSCxFQUFjb0UsTUFBTTVDLEtBQU0sQ0FBQywwQkFBMkJ0QixFQUFTQyxLQUcxRWlGLGNBQWUsU0FBU2xGLEVBQVNDLEdBQzdCLE9BQU9ILEVBQWNvRSxNQUFNNUMsS0FBTSxDQUFDLDJCQUE0QnRCLEVBQVNDLEtBRzNFa0YsbUJBQW9CLFNBQVNuRixFQUFTQyxFQUFNOEUsR0FFeEMsSUFBSVosRUFBTyxDQUFDLDJCQUE0QiwyQkFNeEMsT0FKSW5FLEdBQVdBLEVBQVFpRCxRQUFVaEQsRUFBS2dELFNBQ2xDa0IsRUFBS2EsVUFHRmxGLEVBQWNvRSxNQUFNNUMsS0FBTSxDQUFDNkMsRUFBTW5FLEVBQVNDLEtBR3JEbUYsTUFBUyxTQUFTcEYsRUFBU0MsR0FDdkIsT0FBT0gsRUFBY29FLE1BQU01QyxLQUFNLENBQUMsd0JBQXlCdEIsRUFBU0MsTUFJNUVMLEVBQUcyQyxTQUFTOEMsV0FBYXhGLEVBdlA3QixDQWlUR3lGIiwiZmlsZSI6ImNvcmUvc3dpdGNoZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgVUlraXQgMi4yNy4yIHwgaHR0cDovL3d3dy5nZXR1aWtpdC5jb20gfCAoYykgMjAxNCBZT090aGVtZSB8IE1JVCBMaWNlbnNlICovXG4oZnVuY3Rpb24oVUkpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIEFuaW1hdGlvbnM7XG5cbiAgICBVSS5jb21wb25lbnQoJ3N3aXRjaGVyJywge1xuXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBjb25uZWN0ICAgOiBmYWxzZSxcbiAgICAgICAgICAgIHRvZ2dsZSAgICA6ICc+KicsXG4gICAgICAgICAgICBhY3RpdmUgICAgOiAwLFxuICAgICAgICAgICAgYW5pbWF0aW9uIDogZmFsc2UsXG4gICAgICAgICAgICBkdXJhdGlvbiAgOiAyMDAsXG4gICAgICAgICAgICBzd2lwaW5nICAgOiB0cnVlXG4gICAgICAgIH0sXG5cbiAgICAgICAgYW5pbWF0aW5nOiBmYWxzZSxcblxuICAgICAgICBib290OiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLy8gaW5pdCBjb2RlXG4gICAgICAgICAgICBVSS5yZWFkeShmdW5jdGlvbihjb250ZXh0KSB7XG5cbiAgICAgICAgICAgICAgICBVSS4kKCdbZGF0YS11ay1zd2l0Y2hlcl0nLCBjb250ZXh0KS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3dpdGNoZXIgPSBVSS4kKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3dpdGNoZXIuZGF0YSgnc3dpdGNoZXInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IFVJLnN3aXRjaGVyKHN3aXRjaGVyLCBVSS5VdGlscy5vcHRpb25zKHN3aXRjaGVyLmF0dHIoJ2RhdGEtdWstc3dpdGNoZXInKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgdmFyICR0aGlzID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5vbignY2xpY2sudWsuc3dpdGNoZXInLCB0aGlzLm9wdGlvbnMudG9nZ2xlLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICR0aGlzLnNob3codGhpcyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuY29ubmVjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jb25uZWN0ID0gVUkuJCh0aGlzLm9wdGlvbnMuY29ubmVjdCk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5jb25uZWN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jb25uZWN0Lm9uKCdjbGljay51ay5zd2l0Y2hlcicsICdbZGF0YS11ay1zd2l0Y2hlci1pdGVtXScsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gVUkuJCh0aGlzKS5hdHRyKCdkYXRhLXVrLXN3aXRjaGVyLWl0ZW0nKTtcblxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5pbmRleCA9PSBpdGVtKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2goaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICduZXh0JzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncHJldmlvdXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuc2hvdygkdGhpcy5pbmRleCArIChpdGVtPT0nbmV4dCcgPyAxOi0xKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnNob3cocGFyc2VJbnQoaXRlbSwgMTApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zd2lwaW5nKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Qub24oJ3N3aXBlUmlnaHQgc3dpcGVMZWZ0JywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnNob3coJHRoaXMuaW5kZXggKyAoZS50eXBlID09ICdzd2lwZUxlZnQnID8gMSA6IC0xKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3QuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcygndWstYWN0aXZlJykuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuXG4gICAgICAgICAgICB2YXIgdG9nZ2xlcyA9IHRoaXMuZmluZCh0aGlzLm9wdGlvbnMudG9nZ2xlKSxcbiAgICAgICAgICAgICAgICBhY3RpdmUgID0gdG9nZ2xlcy5maWx0ZXIoJy51ay1hY3RpdmUnKTtcblxuICAgICAgICAgICAgaWYgKGFjdGl2ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3coYWN0aXZlLCBmYWxzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hY3RpdmU9PT1mYWxzZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgYWN0aXZlID0gdG9nZ2xlcy5lcSh0aGlzLm9wdGlvbnMuYWN0aXZlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3coYWN0aXZlLmxlbmd0aCA/IGFjdGl2ZSA6IHRvZ2dsZXMuZXEoMCksIGZhbHNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSW5pdCBBUklBIGZvciB0b2dnbGVzXG4gICAgICAgICAgICB0b2dnbGVzLm5vdChhY3RpdmUpLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgIGFjdGl2ZS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzaG93OiBmdW5jdGlvbih0YWIsIGFuaW1hdGUpIHtcblxuICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdG9nZ2xlcyA9IHRoaXMuZmluZCh0aGlzLm9wdGlvbnMudG9nZ2xlKTtcblxuICAgICAgICAgICAgaWYgKGlzTmFOKHRhYikpIHtcbiAgICAgICAgICAgICAgICB0YWIgPSBVSS4kKHRhYik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhYiA9IHRhYiA8IDAgPyB0b2dnbGVzLmxlbmd0aC0xIDogdGFiO1xuICAgICAgICAgICAgICAgIHRhYiA9IHRvZ2dsZXMuZXEodG9nZ2xlc1t0YWJdID8gdGFiIDogMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciAkdGhpcyAgICAgPSB0aGlzLFxuICAgICAgICAgICAgICAgIGFjdGl2ZSAgICA9IFVJLiQodGFiKSxcbiAgICAgICAgICAgICAgICBhbmltYXRpb24gPSBBbmltYXRpb25zW3RoaXMub3B0aW9ucy5hbmltYXRpb25dIHx8IGZ1bmN0aW9uKGN1cnJlbnQsIG5leHQpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoISR0aGlzLm9wdGlvbnMuYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQW5pbWF0aW9ucy5ub25lLmFwcGx5KCR0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmltID0gJHRoaXMub3B0aW9ucy5hbmltYXRpb24uc3BsaXQoJywnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbS5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbVsxXSA9IGFuaW1bMF07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBhbmltWzBdID0gYW5pbVswXS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1bMV0gPSBhbmltWzFdLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29yZUFuaW1hdGlvbi5hcHBseSgkdGhpcywgW2FuaW0sIGN1cnJlbnQsIG5leHRdKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAoYW5pbWF0ZT09PWZhbHNlIHx8ICFVSS5zdXBwb3J0LmFuaW1hdGlvbikge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbiA9IEFuaW1hdGlvbnMubm9uZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFjdGl2ZS5oYXNDbGFzcyhcInVrLWRpc2FibGVkXCIpKSByZXR1cm47XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBBUklBIGZvciBUb2dnbGVzXG4gICAgICAgICAgICB0b2dnbGVzLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgIGFjdGl2ZS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcblxuICAgICAgICAgICAgdG9nZ2xlcy5maWx0ZXIoXCIudWstYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwidWstYWN0aXZlXCIpO1xuICAgICAgICAgICAgYWN0aXZlLmFkZENsYXNzKFwidWstYWN0aXZlXCIpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbm5lY3QgJiYgdGhpcy5jb25uZWN0Lmxlbmd0aCkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleCA9IHRoaXMuZmluZCh0aGlzLm9wdGlvbnMudG9nZ2xlKS5pbmRleChhY3RpdmUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggPT0gLTEgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdC5lYWNoKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBVSS4kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4gID0gVUkuJChjb250YWluZXIuY2hpbGRyZW4oKSksXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ICAgPSBVSS4kKGNoaWxkcmVuLmZpbHRlcignLnVrLWFjdGl2ZScpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgICAgICA9IFVJLiQoY2hpbGRyZW4uZXEoJHRoaXMuaW5kZXgpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuYW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmFwcGx5KCR0aGlzLCBbY3VycmVudCwgbmV4dF0pLnRoZW4oZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQucmVtb3ZlQ2xhc3MoXCJ1ay1hY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5hZGRDbGFzcyhcInVrLWFjdGl2ZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBBUklBIGZvciBjb25uZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5hdHRyKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVUkuVXRpbHMuY2hlY2tEaXNwbGF5KG5leHQsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuYW5pbWF0aW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJzaG93LnVrLnN3aXRjaGVyXCIsIFthY3RpdmVdKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgQW5pbWF0aW9ucyA9IHtcblxuICAgICAgICAnbm9uZSc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGQgPSBVSS4kLkRlZmVycmVkKCk7XG4gICAgICAgICAgICBkLnJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybiBkLnByb21pc2UoKTtcbiAgICAgICAgfSxcblxuICAgICAgICAnZmFkZSc6IGZ1bmN0aW9uKGN1cnJlbnQsIG5leHQpIHtcbiAgICAgICAgICAgIHJldHVybiBjb3JlQW5pbWF0aW9uLmFwcGx5KHRoaXMsIFsndWstYW5pbWF0aW9uLWZhZGUnLCBjdXJyZW50LCBuZXh0XSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ3NsaWRlLWJvdHRvbSc6IGZ1bmN0aW9uKGN1cnJlbnQsIG5leHQpIHtcbiAgICAgICAgICAgIHJldHVybiBjb3JlQW5pbWF0aW9uLmFwcGx5KHRoaXMsIFsndWstYW5pbWF0aW9uLXNsaWRlLWJvdHRvbScsIGN1cnJlbnQsIG5leHRdKTtcbiAgICAgICAgfSxcblxuICAgICAgICAnc2xpZGUtdG9wJzogZnVuY3Rpb24oY3VycmVudCwgbmV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvcmVBbmltYXRpb24uYXBwbHkodGhpcywgWyd1ay1hbmltYXRpb24tc2xpZGUtdG9wJywgY3VycmVudCwgbmV4dF0pO1xuICAgICAgICB9LFxuXG4gICAgICAgICdzbGlkZS12ZXJ0aWNhbCc6IGZ1bmN0aW9uKGN1cnJlbnQsIG5leHQsIGRpcikge1xuXG4gICAgICAgICAgICB2YXIgYW5pbSA9IFsndWstYW5pbWF0aW9uLXNsaWRlLXRvcCcsICd1ay1hbmltYXRpb24tc2xpZGUtYm90dG9tJ107XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50ICYmIGN1cnJlbnQuaW5kZXgoKSA+IG5leHQuaW5kZXgoKSkge1xuICAgICAgICAgICAgICAgIGFuaW0ucmV2ZXJzZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY29yZUFuaW1hdGlvbi5hcHBseSh0aGlzLCBbYW5pbSwgY3VycmVudCwgbmV4dF0pO1xuICAgICAgICB9LFxuXG4gICAgICAgICdzbGlkZS1sZWZ0JzogZnVuY3Rpb24oY3VycmVudCwgbmV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvcmVBbmltYXRpb24uYXBwbHkodGhpcywgWyd1ay1hbmltYXRpb24tc2xpZGUtbGVmdCcsIGN1cnJlbnQsIG5leHRdKTtcbiAgICAgICAgfSxcblxuICAgICAgICAnc2xpZGUtcmlnaHQnOiBmdW5jdGlvbihjdXJyZW50LCBuZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gY29yZUFuaW1hdGlvbi5hcHBseSh0aGlzLCBbJ3VrLWFuaW1hdGlvbi1zbGlkZS1yaWdodCcsIGN1cnJlbnQsIG5leHRdKTtcbiAgICAgICAgfSxcblxuICAgICAgICAnc2xpZGUtaG9yaXpvbnRhbCc6IGZ1bmN0aW9uKGN1cnJlbnQsIG5leHQsIGRpcikge1xuXG4gICAgICAgICAgICB2YXIgYW5pbSA9IFsndWstYW5pbWF0aW9uLXNsaWRlLXJpZ2h0JywgJ3VrLWFuaW1hdGlvbi1zbGlkZS1sZWZ0J107XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50ICYmIGN1cnJlbnQuaW5kZXgoKSA+IG5leHQuaW5kZXgoKSkge1xuICAgICAgICAgICAgICAgIGFuaW0ucmV2ZXJzZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY29yZUFuaW1hdGlvbi5hcHBseSh0aGlzLCBbYW5pbSwgY3VycmVudCwgbmV4dF0pO1xuICAgICAgICB9LFxuXG4gICAgICAgICdzY2FsZSc6IGZ1bmN0aW9uKGN1cnJlbnQsIG5leHQpIHtcbiAgICAgICAgICAgIHJldHVybiBjb3JlQW5pbWF0aW9uLmFwcGx5KHRoaXMsIFsndWstYW5pbWF0aW9uLXNjYWxlLXVwJywgY3VycmVudCwgbmV4dF0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIFVJLnN3aXRjaGVyLmFuaW1hdGlvbnMgPSBBbmltYXRpb25zO1xuXG5cbiAgICAvLyBoZWxwZXJzXG5cbiAgICBmdW5jdGlvbiBjb3JlQW5pbWF0aW9uKGNscywgY3VycmVudCwgbmV4dCkge1xuXG4gICAgICAgIHZhciBkID0gVUkuJC5EZWZlcnJlZCgpLCBjbHNJbiA9IGNscywgY2xzT3V0ID0gY2xzLCByZWxlYXNlO1xuXG4gICAgICAgIGlmIChuZXh0WzBdPT09Y3VycmVudFswXSkge1xuICAgICAgICAgICAgZC5yZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mKGNscykgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNsc0luICA9IGNsc1swXTtcbiAgICAgICAgICAgIGNsc091dCA9IGNsc1sxXSB8fCBjbHNbMF07XG4gICAgICAgIH1cblxuICAgICAgICBVSS4kYm9keS5jc3MoJ292ZXJmbG93LXgnLCAnaGlkZGVuJyk7IC8vIGZpeCBzY3JvbGwganVtcGluZyBpbiBpT1NcblxuICAgICAgICByZWxlYXNlID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50KSBjdXJyZW50LmhpZGUoKS5yZW1vdmVDbGFzcygndWstYWN0aXZlICcrY2xzT3V0KycgdWstYW5pbWF0aW9uLXJldmVyc2UnKTtcblxuICAgICAgICAgICAgbmV4dC5hZGRDbGFzcyhjbHNJbikub25lKFVJLnN1cHBvcnQuYW5pbWF0aW9uLmVuZCwgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dC5yZW1vdmVDbGFzcygnJytjbHNJbisnJykuY3NzKHtvcGFjaXR5OicnLCBkaXNwbGF5OicnfSk7XG4gICAgICAgICAgICAgICAgfSwgMCk7XG5cbiAgICAgICAgICAgICAgICBkLnJlc29sdmUoKTtcblxuICAgICAgICAgICAgICAgIFVJLiRib2R5LmNzcygnb3ZlcmZsb3cteCcsICcnKTtcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50KSBjdXJyZW50LmNzcyh7b3BhY2l0eTonJywgZGlzcGxheTonJ30pO1xuXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpLnNob3coKTtcbiAgICAgICAgfTtcblxuICAgICAgICBuZXh0LmNzcygnYW5pbWF0aW9uLWR1cmF0aW9uJywgdGhpcy5vcHRpb25zLmR1cmF0aW9uKydtcycpO1xuXG4gICAgICAgIGlmIChjdXJyZW50ICYmIGN1cnJlbnQubGVuZ3RoKSB7XG5cbiAgICAgICAgICAgIGN1cnJlbnQuY3NzKCdhbmltYXRpb24tZHVyYXRpb24nLCB0aGlzLm9wdGlvbnMuZHVyYXRpb24rJ21zJyk7XG5cbiAgICAgICAgICAgIGN1cnJlbnQuY3NzKCdkaXNwbGF5JywgJ25vbmUnKS5hZGRDbGFzcyhjbHNPdXQrJyB1ay1hbmltYXRpb24tcmV2ZXJzZScpLm9uZShVSS5zdXBwb3J0LmFuaW1hdGlvbi5lbmQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSkuY3NzKCdkaXNwbGF5JywgJycpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXh0LmFkZENsYXNzKCd1ay1hY3RpdmUnKTtcbiAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkLnByb21pc2UoKTtcbiAgICB9XG5cbn0pKFVJa2l0Mik7Il19
