$(document).ready(function(){var e=UIkit.modal("#lang-modal"),t=sessionStorage.getItem("language");null==t||"null"==t?e.show():window.location.href.match(t)||(window.location.href=t),$(".lang-var").click(function(){sessionStorage.setItem("language",$(this).attr("href"))}),$(".city_link").click(function(){e.show()}),$(".js-input").on("focus focusout",function(e){e.preventDefault(),$(e.target).parent().toggleClass("is_focused"),"focusout"==e.type&&$(e.target).val($.trim($(e.target).val()))}),$(".js-input").on("change keyup",function(e){e.preventDefault(),""===$.trim($(e.target).val())||$(e.target).hasClass("is_filled")?$(e.target).parent().removeClass("is_filled"):$(e.target).parent().addClass("is_filled"),$(this).parent().removeClass("error")}),$(".js-phone").on("focusout",function(e){e.preventDefault();var t=$(this).val().replace(/[^0-9]/gi,"");7==t.substr(0,1)&&(t="+7"+t.substr(1,t.length-1)),$(this).val(t)});var a=$("#svg1"),n=$("#svg2"),i=$(".header__content"),s=0,o=3;n.find("polygon").click(function(){i.eq(o).toggleClass("active"),o=$(this).index()-1,i.eq(o).toggleClass("active")}).mouseover(function(){s=$(this).index()-1,a.find("polygon").eq(s).toggleClass("active")}).mouseleave(function(){s=$(this).index()-1,a.find("polygon").eq(s).toggleClass("active")});var x=$("#svg_on_mappage");x.find("polygon").mouseover(function(){s=$(this).index()-1,x.find("polygon").eq(s).toggleClass("active")}).mouseleave(function(){s=$(this).index()-1,x.find("polygon").eq(s).toggleClass("active")}).click(function(){s=$(this).index()-1,window.location.replace(x.find("polygon").eq(s).attr("data-link"))}),$("#submit_form").click(function(e){e.preventDefault();var t=$("#callback_source").attr("data-source"),a=$("#name"),n=$("#phone"),i=$("#company"),s=$("#mail"),o=new RegExp(/\d{11}/),x=new RegExp(/.+/),l=new RegExp(/^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,})(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@)(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22))(?:\.(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\]))$/),r=!1;if(x.test(a.val())||(a.parent().addClass("error"),r=!0),o.test(n.val())||(n.parent().addClass("error"),r=!0),l.test(s.val())||(s.parent().addClass("error"),r=!0),r)return!1;var c={name:a.val(),phone:n.val(),company:i.val(),email:s.val()};null!=t&&(c.from=t),a.val(""),n.val(""),i.val(""),s.val(""),$.ajax({url:"/ajax-handler/",type:"POST",data:{data:c},success:function(e){UIkit.offcanvas.hide([force=!1]),UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено":"Ошибка отправки сообщения",status:e,timeout:3e3,pos:"bottom-center"})},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}),$(".proposal_request").click(function(){$("#callback_source").attr("data-source",$(this).attr("data-source"))}),$("#submit_form2").click(function(e){e.preventDefault();var t=$("#name9"),a=$("#text9"),n=$("#mail9"),i=new RegExp(/.+/),s=new RegExp(/^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,})(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@)(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22))(?:\.(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\]))$/),o=!1;if(i.test(t.val())||(t.parent().addClass("error"),o=!0),i.test(a.val())||(a.parent().addClass("error"),o=!0),s.test(n.val())||(n.parent().addClass("error"),o=!0),o)return!1;var x={name:t.val(),email:n.val(),quest:a.val()};t.val(""),a.val(""),n.val(""),$.ajax({url:"/ajax-handler/",type:"POST",data:{data:x},success:function(e){UIkit.offcanvas.hide([force=!1]),UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено":"Ошибка отправки сообщения",status:e,timeout:3e3,pos:"bottom-center"})},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}),$(".inputfile_button").click(function(){$(this).closest(".feedback_form_inputfile_block").find(".inputfile_input").trigger("click")}),$(".inputfile_input").change(function(){var e=$(this).val(),t=e;new RegExp("[^*](.txt|.jpg|.png|.zip|.rar|.doc|.docx|.xls|.xlsx|.pdf)","i").test(e)?5242880<this.files[0].size?(t='<span class="red">Размер файла превышает 5 Мб</span>',$(this).val("")):(val_mas=e.split("\\"),t=val_mas[val_mas.length-1]):(t='<span class="red">Неверное расширение файла</span>',$(this).val(""));$(this).closest(".feedback_form_inputfile_block").find(".inputfile_caption").html(t).attr("title",e)}),$(".feedback_radio_input").change(function(){var e=$(this).val();$(".feedback_container").not("#feedback_"+e).slideUp(300),$("#feedback_"+e).slideDown(300)}),$(".canSpeak").mouseenter(function(){"true"==sessionStorage.getItem("isInvalid")&&function e(t){speechSynthesis.speaking?(speechSynthesis.cancel(),null!==l&&clearTimeout(l),l=setTimeout(function(){e(t)},250)):speechSynthesis.speak(t)}(new SpeechSynthesisUtterance($(this)[0].innerText))});var l=null;var r=$(".menu__phone-container__icon");function c(){var e=$("#grid-group");960<=window.innerWidth?e.height(window.innerHeight-170):e.height("initial")}$(".invalid").click(function(){"true"==sessionStorage.getItem("isInvalid")?($(this).css("fill","black"),r.css("box-shadow","none"),sessionStorage.setItem("isInvalid",!1)):($(this).css("fill","#e9ac45"),$(this).find(".menu__phone-container__icon")&&r.css("box-shadow","white 0px 0px 5px 2px"),sessionStorage.setItem("isInvalid",!0))}),"true"==sessionStorage.getItem("isInvalid")&&($(".invalid").css("fill","#e9ac45"),r.css("box-shadow","white 0px 0px 5px 2px")),c(),$(window).resize(function(){c()}),$(".ecotek_inputtext.custom_form").change(function(){var e=$(this),t=e.val();e.parent().find(".custom_form_span_thema").text(t)}),$(".to_validate").inputmask(),$(".to_validate").on("change keyup",function(e){$(this).parent().removeClass("form__element error")}),$(".ecotek_button3").click(function(e){e.preventDefault();var t=$(this).parent().parent().parent(),a=!1;t.find(".rules_checkbox").is(":checked")||(a=!0,alert("Вы должны согласиться с политикой обработки данных!")),t.find(".to_validate").each(function(e,t){!$(t).inputmask("isComplete")&&".*"!=$(t).data("inputmask-regex")&&0<$(t).parent().parent().find(".notnull_icon").length&&(a=!0,$(t).parent().addClass("form__element error"))});var i=new FormData;if(i.append("full",!0),i.append("id",(new Date).getTime()),!a){t.find(".feedback_form_item").each(function(e,t){try{var a=$(t).find(".feedback_form_caption")[0].childNodes[0].data,n=$(t).find(".ecotek_inputtext")[0];i.append(a.trim(),$(n).val())}catch(e){}});try{i.append("file",t.find("#dopfile").prop("files")[0])}catch(e){}$.ajax({url:"/ajax-handler/",type:"POST",data:i,processData:!1,contentType:!1,success:function(e){UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено, номер обращения: "+i.get("id")+"\nНомер обращения так же продублирован на вашу почту":"Ошибка отправки сообщения",status:e,timeout:6e3,pos:"bottom-center"}),"success"==e&&$(".ecotek_inputtext").val("")},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBsYXRlLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5IiwibW9kYWwiLCJVSWtpdCIsImxhbmciLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJzaG93Iiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwibWF0Y2giLCJjbGljayIsInNldEl0ZW0iLCJ0aGlzIiwiYXR0ciIsIm9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0IiwicGFyZW50IiwidG9nZ2xlQ2xhc3MiLCJ0eXBlIiwidmFsIiwidHJpbSIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInJlcGxhY2UiLCJzdWJzdHIiLCJsZW5ndGgiLCJzdmcxIiwic3ZnMiIsImNvbnRlbnRzIiwiaSIsImoiLCJmaW5kIiwiZXEiLCJpbmRleCIsIm1vdXNlb3ZlciIsIm1vdXNlbGVhdmUiLCJzdmdfb25fcGFnZSIsImZyb20iLCJuYW1lIiwicGhvbmUiLCJjb21wYW55IiwiZW1haWwiLCJyZWdleF9waG9uZSIsIlJlZ0V4cCIsInJlZ2V4X25hbWUiLCJyZWdleF9lbWFpbCIsImhhc0VyciIsInRlc3QiLCJkYXRhIiwidW5kZWZpbmVkIiwiYWpheCIsInVybCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJvZmZjYW52YXMiLCJoaWRlIiwiZm9yY2UiLCJub3RpZnkiLCJtZXNzYWdlIiwic3RhdHVzIiwidGltZW91dCIsInBvcyIsImVycm9yIiwicXVlc3QiLCJjbG9zZXN0IiwidHJpZ2dlciIsImNoYW5nZSIsImh0bWwiLCJmaWxlcyIsInNpemUiLCJ2YWxfbWFzIiwic3BsaXQiLCJibG9ja2lkIiwibm90Iiwic2xpZGVVcCIsInNsaWRlRG93biIsIm1vdXNlZW50ZXIiLCJzYXkiLCJ0ZXh0Iiwic3BlZWNoU3ludGhlc2lzIiwic3BlYWtpbmciLCJjYW5jZWwiLCJzYXlUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInNwZWFrIiwiU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlIiwiaW5uZXJUZXh0IiwiaWNvbl9pbnZhbGlkIiwiY2hhbmdlSGVpZ2h0TWFpbkJsb2NrIiwiZ3JvdXAiLCJpbm5lcldpZHRoIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJjc3MiLCJyZXNpemUiLCJzZWxlY3QiLCJ0aXRsZSIsImlucHV0bWFzayIsImN1cnJlbnRfZm9ybSIsImlzIiwiYWxlcnQiLCJlYWNoIiwibnVtIiwiZWwiLCJyZXN1bHRzIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJEYXRlIiwiZ2V0VGltZSIsImNoaWxkTm9kZXMiLCJjb250ZW50X25vZGUiLCJleCIsInByb3AiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwiZ2V0Il0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRUMsVUFBVUMsTUFBTSxXQUdkLElBQUlDLEVBQVFDLE1BQU1ELE1BQU0sZUFDcEJFLEVBQU9DLGVBQWVDLFFBQVEsWUFDdEIsTUFBUkYsR0FBd0IsUUFBUkEsRUFDaEJGLEVBQU1LLE9BRURDLE9BQU9DLFNBQVNDLEtBQUtDLE1BQU1QLEtBQzVCSSxPQUFPQyxTQUFTQyxLQUFPTixHQUcvQkwsRUFBRSxhQUFhYSxNQUFNLFdBQ2xCUCxlQUFlUSxRQUFRLFdBQVlkLEVBQUVlLE1BQU1DLEtBQUssV0FHbkRoQixFQUFFLGNBQWNhLE1BQU0sV0FDbEJWLEVBQU1LLFNBS1pSLEVBQUUsYUFBYWlCLEdBQUcsaUJBQWtCLFNBQVNDLEdBQ3ZDQSxFQUFFQyxpQkFDRm5CLEVBQUVrQixFQUFFRSxRQUFRQyxTQUFTQyxZQUFZLGNBQ3BCLFlBQVZKLEVBQUVLLE1BQ0R2QixFQUFFa0IsRUFBRUUsUUFBUUksSUFBSXhCLEVBQUV5QixLQUFLekIsRUFBRWtCLEVBQUVFLFFBQVFJLFVBRzNDeEIsRUFBRSxhQUFhaUIsR0FBRyxlQUFnQixTQUFTQyxHQUN2Q0EsRUFBRUMsaUJBQytCLEtBQTlCbkIsRUFBRXlCLEtBQUt6QixFQUFFa0IsRUFBRUUsUUFBUUksUUFBa0J4QixFQUFFa0IsRUFBRUUsUUFB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IiwiZmlsZSI6InRlbXBsYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIExhbmd1YWdlIHNlbGVjdCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXG5cbiAgICB2YXIgbW9kYWwgPSBVSWtpdC5tb2RhbChcIiNsYW5nLW1vZGFsXCIpO1xuICAgIHZhciBsYW5nID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbGFuZ3VhZ2UnKTtcbiAgICBpZiAobGFuZyA9PSBudWxsIHx8IGxhbmcgPT0gXCJudWxsXCIpIHtcbiAgICAgICAgbW9kYWwuc2hvdygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghd2luZG93LmxvY2F0aW9uLmhyZWYubWF0Y2gobGFuZykpe1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBsYW5nO1xuICAgICAgICB9XG4gICAgfVxuICAgICQoXCIubGFuZy12YXJcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJsYW5ndWFnZVwiLCAkKHRoaXMpLmF0dHIoXCJocmVmXCIpKTtcbiAgICB9KTtcblxuICAgICQoXCIuY2l0eV9saW5rXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbW9kYWwuc2hvdygpO1xuICAgIH0pO1xuXG5cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRW5kIGxhbmd1YWdlIHNlbGVjdCAtLS0tLS0tLS0tLS0tLS0tLS0tLy9cbiAgJCgnLmpzLWlucHV0Jykub24oJ2ZvY3VzIGZvY3Vzb3V0JywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICQoZS50YXJnZXQpLnBhcmVudCgpLnRvZ2dsZUNsYXNzKCdpc19mb2N1c2VkJyk7XG4gICAgICAgIGlmKGUudHlwZSA9PSAnZm9jdXNvdXQnKSB7XG4gICAgICAgICAgICAkKGUudGFyZ2V0KS52YWwoJC50cmltKCQoZS50YXJnZXQpLnZhbCgpKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAkKCcuanMtaW5wdXQnKS5vbignY2hhbmdlIGtleXVwJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmKCQudHJpbSgkKGUudGFyZ2V0KS52YWwoKSkgIT09ICcnICYmICEkKGUudGFyZ2V0KS5oYXNDbGFzcygnaXNfZmlsbGVkJykpIHtcbiAgICAgICAgICAgICQoZS50YXJnZXQpLnBhcmVudCgpLmFkZENsYXNzKCdpc19maWxsZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoZS50YXJnZXQpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdpc19maWxsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiZXJyb3JcIik7XG4gICAgfSk7XG4gICAgJCgnLmpzLXBob25lJykub24oJ2ZvY3Vzb3V0JywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciB2YWwgPSAkKHRoaXMpLnZhbCgpLnJlcGxhY2UoL1teMC05XS9naSwnJyk7XG4gICAgICAgIGlmKHZhbC5zdWJzdHIoMCwgMSkgPT0gNykge1xuICAgICAgICAgICAgdmFsID0gJys3JyArIHZhbC5zdWJzdHIoMSwgdmFsLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgICQodGhpcykudmFsKHZhbCk7XG4gICAgfSk7XG5cbiAgICB2YXIgc3ZnMSA9ICQoJyNzdmcxJyk7XG4gICAgdmFyIHN2ZzIgPSAkKCcjc3ZnMicpO1xuICAgIHZhciBjb250ZW50cyA9ICQoJy5oZWFkZXJfX2NvbnRlbnQnKTtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGogPSAzO1xuICAgIHN2ZzIuZmluZCgncG9seWdvbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgY29udGVudHMuZXEoaikudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgaiA9ICQodGhpcykuaW5kZXgoKS0xO1xuICAgICAgY29udGVudHMuZXEoaikudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pXG4gICAgLm1vdXNlb3ZlcihmdW5jdGlvbigpIHtcbiAgICAgIGkgPSAkKHRoaXMpLmluZGV4KCktMTtcbiAgICAgIHN2ZzEuZmluZCgncG9seWdvbicpLmVxKGkpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KVxuICAgIC5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkge1xuICAgICAgaSA9ICQodGhpcykuaW5kZXgoKS0xO1xuICAgICAgc3ZnMS5maW5kKCdwb2x5Z29uJykuZXEoaSkudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgdmFyIHN2Z19vbl9wYWdlID0gJChcIiNzdmdfb25fbWFwcGFnZVwiKTtcbiAgICBzdmdfb25fcGFnZS5maW5kKCdwb2x5Z29uJylcbiAgICAgICAgLm1vdXNlb3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGkgPSAkKHRoaXMpLmluZGV4KCktMTtcbiAgICAgICAgc3ZnX29uX3BhZ2UuZmluZCgncG9seWdvbicpLmVxKGkpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpID0gJCh0aGlzKS5pbmRleCgpLTE7XG4gICAgICAgICAgICBzdmdfb25fcGFnZS5maW5kKCdwb2x5Z29uJykuZXEoaSkudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KVxuICAgICAgICAuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaSA9ICQodGhpcykuaW5kZXgoKS0xO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2Uoc3ZnX29uX3BhZ2UuZmluZCgncG9seWdvbicpLmVxKGkpLmF0dHIoXCJkYXRhLWxpbmtcIikpO1xuICAgICAgICB9KTtcblxuICAgICQoXCIjc3VibWl0X2Zvcm1cIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBmcm9tID0gJChcIiNjYWxsYmFja19zb3VyY2VcIikuYXR0cihcImRhdGEtc291cmNlXCIpO1xuICAgICAgICB2YXIgbmFtZSA9ICQoXCIjbmFtZVwiKTtcbiAgICAgICAgdmFyIHBob25lID0gJChcIiNwaG9uZVwiKTtcbiAgICAgICAgdmFyIGNvbXBhbnkgPSAkKFwiI2NvbXBhbnlcIik7XG4gICAgICAgIHZhciBlbWFpbCA9ICQoXCIjbWFpbFwiKTtcblxuICAgICAgICB2YXIgcmVnZXhfcGhvbmUgPSBuZXcgUmVnRXhwKC9cXGR7MTF9Lyk7XG4gICAgICAgIHZhciByZWdleF9uYW1lID0gbmV3IFJlZ0V4cCgvLisvKTtcbiAgICAgICAgdmFyIHJlZ2V4X2VtYWlsID0gbmV3IFJlZ0V4cCgvXig/ISg/Oig/OlxceDIyP1xceDVDW1xceDAwLVxceDdFXVxceDIyPyl8KD86XFx4MjI/W15cXHg1Q1xceDIyXVxceDIyPykpezI1NSx9KSg/ISg/Oig/OlxceDIyP1xceDVDW1xceDAwLVxceDdFXVxceDIyPyl8KD86XFx4MjI/W15cXHg1Q1xceDIyXVxceDIyPykpezY1LH1AKSg/Oig/OltcXHgyMVxceDIzLVxceDI3XFx4MkFcXHgyQlxceDJEXFx4MkYtXFx4MzlcXHgzRFxceDNGXFx4NUUtXFx4N0VdKyl8KD86XFx4MjIoPzpbXFx4MDEtXFx4MDhcXHgwQlxceDBDXFx4MEUtXFx4MUZcXHgyMVxceDIzLVxceDVCXFx4NUQtXFx4N0ZdfCg/OlxceDVDW1xceDAwLVxceDdGXSkpKlxceDIyKSkoPzpcXC4oPzooPzpbXFx4MjFcXHgyMy1cXHgyN1xceDJBXFx4MkJcXHgyRFxceDJGLVxceDM5XFx4M0RcXHgzRlxceDVFLVxceDdFXSspfCg/OlxceDIyKD86W1xceDAxLVxceDA4XFx4MEJcXHgwQ1xceDBFLVxceDFGXFx4MjFcXHgyMy1cXHg1QlxceDVELVxceDdGXXwoPzpcXHg1Q1tcXHgwMC1cXHg3Rl0pKSpcXHgyMikpKSpAKD86KD86KD8hLipbXi5dezY0LH0pKD86KD86KD86eG4tLSk/W2EtejAtOV0rKD86LVthLXowLTldKykqXFwuKXsxLDEyNn0pezEsfSg/Oig/OlthLXpdW2EtejAtOV0qKXwoPzooPzp4bi0tKVthLXowLTldKykpKD86LVthLXowLTldKykqKXwoPzpcXFsoPzooPzpJUHY2Oig/Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7N30pfCg/Oig/ISg/Oi4qW2EtZjAtOV1bOlxcXV0pezcsfSkoPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezAsNX0pPzo6KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDV9KT8pKSl8KD86KD86SVB2NjooPzooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezV9Oil8KD86KD8hKD86LipbYS1mMC05XTopezUsfSkoPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezAsM30pPzo6KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDN9Oik/KSkpPyg/Oig/OjI1WzAtNV0pfCg/OjJbMC00XVswLTldKXwoPzoxWzAtOV17Mn0pfCg/OlsxLTldP1swLTldKSkoPzpcXC4oPzooPzoyNVswLTVdKXwoPzoyWzAtNF1bMC05XSl8KD86MVswLTldezJ9KXwoPzpbMS05XT9bMC05XSkpKXszfSkpXFxdKSkkLyk7XG5cbiAgICAgICAgdmFyIGhhc0VyciA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghcmVnZXhfbmFtZS50ZXN0KG5hbWUudmFsKCkpKSB7XG4gICAgICAgICAgICBuYW1lLnBhcmVudCgpLmFkZENsYXNzKFwiZXJyb3JcIik7XG4gICAgICAgICAgICBoYXNFcnIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVnZXhfcGhvbmUudGVzdChwaG9uZS52YWwoKSkpIHtcbiAgICAgICAgICAgIHBob25lLnBhcmVudCgpLmFkZENsYXNzKFwiZXJyb3JcIik7XG4gICAgICAgICAgICBoYXNFcnIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVnZXhfZW1haWwudGVzdChlbWFpbC52YWwoKSkpIHtcbiAgICAgICAgICAgIGVtYWlsLnBhcmVudCgpLmFkZENsYXNzKFwiZXJyb3JcIik7XG4gICAgICAgICAgICBoYXNFcnIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNFcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZS52YWwoKSxcbiAgICAgICAgICAgIHBob25lOiBwaG9uZS52YWwoKSxcbiAgICAgICAgICAgIGNvbXBhbnk6IGNvbXBhbnkudmFsKCksXG4gICAgICAgICAgICBlbWFpbDogZW1haWwudmFsKClcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZnJvbSAhPSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgZGF0YS5mcm9tID0gZnJvbTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5hbWUudmFsKFwiXCIpO1xuICAgICAgICBwaG9uZS52YWwoXCJcIik7XG4gICAgICAgIGNvbXBhbnkudmFsKFwiXCIpO1xuICAgICAgICBlbWFpbC52YWwoXCJcIik7XG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCIvYWpheC1oYW5kbGVyL1wiLFxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge2RhdGE6IGRhdGF9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIFVJa2l0Lm9mZmNhbnZhcy5oaWRlKFtmb3JjZSA9IGZhbHNlXSk7XG4gICAgICAgICAgICAgICAgVUlraXQubm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogKHJlc3VsdCA9PSBcInN1Y2Nlc3NcIikgPyAn0JLQsNGI0LUg0YHQvtC+0LHRidC10L3QuNC1INGD0YHQv9C10YjQvdC+INC+0YLQv9GA0LDQstC70LXQvdC+JyA6ICfQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Y8nLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcG9zOiAnYm90dG9tLWNlbnRlcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIFVJa2l0Lm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Y8nLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcG9zOiAnYm90dG9tLWNlbnRlcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgJChcIi5wcm9wb3NhbF9yZXF1ZXN0XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNjYWxsYmFja19zb3VyY2VcIikuYXR0cihcImRhdGEtc291cmNlXCIsICQodGhpcykuYXR0cihcImRhdGEtc291cmNlXCIpKTtcbiAgICB9KTtcblxuICAgICQoXCIjc3VibWl0X2Zvcm0yXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgbmFtZSA9ICQoXCIjbmFtZTlcIik7XG4gICAgICAgIHZhciBxdWVzdCA9ICQoXCIjdGV4dDlcIik7XG4gICAgICAgIHZhciBlbWFpbCA9ICQoXCIjbWFpbDlcIik7XG5cbiAgICAgICAgdmFyIHJlZ2V4X25hbWUgPSBuZXcgUmVnRXhwKC8uKy8pO1xuICAgICAgICB2YXIgcmVnZXhfZW1haWwgPSBuZXcgUmVnRXhwKC9eKD8hKD86KD86XFx4MjI/XFx4NUNbXFx4MDAtXFx4N0VdXFx4MjI/KXwoPzpcXHgyMj9bXlxceDVDXFx4MjJdXFx4MjI/KSl7MjU1LH0pKD8hKD86KD86XFx4MjI/XFx4NUNbXFx4MDAtXFx4N0VdXFx4MjI/KXwoPzpcXHgyMj9bXlxceDVDXFx4MjJdXFx4MjI/KSl7NjUsfUApKD86KD86W1xceDIxXFx4MjMtXFx4MjdcXHgyQVxceDJCXFx4MkRcXHgyRi1cXHgzOVxceDNEXFx4M0ZcXHg1RS1cXHg3RV0rKXwoPzpcXHgyMig/OltcXHgwMS1cXHgwOFxceDBCXFx4MENcXHgwRS1cXHgxRlxceDIxXFx4MjMtXFx4NUJcXHg1RC1cXHg3Rl18KD86XFx4NUNbXFx4MDAtXFx4N0ZdKSkqXFx4MjIpKSg/OlxcLig/Oig/OltcXHgyMVxceDIzLVxceDI3XFx4MkFcXHgyQlxceDJEXFx4MkYtXFx4MzlcXHgzRFxceDNGXFx4NUUtXFx4N0VdKyl8KD86XFx4MjIoPzpbXFx4MDEtXFx4MDhcXHgwQlxceDBDXFx4MEUtXFx4MUZcXHgyMVxceDIzLVxceDVCXFx4NUQtXFx4N0ZdfCg/OlxceDVDW1xceDAwLVxceDdGXSkpKlxceDIyKSkpKkAoPzooPzooPyEuKlteLl17NjQsfSkoPzooPzooPzp4bi0tKT9bYS16MC05XSsoPzotW2EtejAtOV0rKSpcXC4pezEsMTI2fSl7MSx9KD86KD86W2Etel1bYS16MC05XSopfCg/Oig/OnhuLS0pW2EtejAtOV0rKSkoPzotW2EtejAtOV0rKSopfCg/OlxcWyg/Oig/OklQdjY6KD86KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXs3fSl8KD86KD8hKD86LipbYS1mMC05XVs6XFxdXSl7Nyx9KSg/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCw1fSk/OjooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezAsNX0pPykpKXwoPzooPzpJUHY2Oig/Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7NX06KXwoPzooPyEoPzouKlthLWYwLTldOil7NSx9KSg/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCwzfSk/OjooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezAsM306KT8pKSk/KD86KD86MjVbMC01XSl8KD86MlswLTRdWzAtOV0pfCg/OjFbMC05XXsyfSl8KD86WzEtOV0/WzAtOV0pKSg/OlxcLig/Oig/OjI1WzAtNV0pfCg/OjJbMC00XVswLTldKXwoPzoxWzAtOV17Mn0pfCg/OlsxLTldP1swLTldKSkpezN9KSlcXF0pKSQvKTtcblxuICAgICAgICB2YXIgaGFzRXJyID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFyZWdleF9uYW1lLnRlc3QobmFtZS52YWwoKSkpIHtcbiAgICAgICAgICAgIG5hbWUucGFyZW50KCkuYWRkQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZWdleF9uYW1lLnRlc3QocXVlc3QudmFsKCkpKSB7XG4gICAgICAgICAgICBxdWVzdC5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlZ2V4X2VtYWlsLnRlc3QoZW1haWwudmFsKCkpKSB7XG4gICAgICAgICAgICBlbWFpbC5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzRXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUudmFsKCksXG4gICAgICAgICAgICBlbWFpbDogZW1haWwudmFsKCksXG4gICAgICAgICAgICBxdWVzdDogcXVlc3QudmFsKClcbiAgICAgICAgfTtcblxuXG4gICAgICAgIG5hbWUudmFsKFwiXCIpO1xuICAgICAgICBxdWVzdC52YWwoXCJcIik7XG4gICAgICAgIGVtYWlsLnZhbChcIlwiKTtcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcIi9hamF4LWhhbmRsZXIvXCIsXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7ZGF0YTogZGF0YX0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgVUlraXQub2ZmY2FudmFzLmhpZGUoW2ZvcmNlID0gZmFsc2VdKTtcbiAgICAgICAgICAgICAgICBVSWtpdC5ub3RpZnkoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAocmVzdWx0ID09IFwic3VjY2Vzc1wiKSA/ICfQktCw0YjQtSDRgdC+0L7QsdGJ0LXQvdC40LUg0YPRgdC/0LXRiNC90L4g0L7RgtC/0YDQsNCy0LvQtdC90L4nIDogJ9Ce0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjycsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAzMDAwLFxuICAgICAgICAgICAgICAgICAgICBwb3M6ICdib3R0b20tY2VudGVyJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgVUlraXQubm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ9Ce0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjycsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAzMDAwLFxuICAgICAgICAgICAgICAgICAgICBwb3M6ICdib3R0b20tY2VudGVyJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cblxuXG4gICAgJChcIi5pbnB1dGZpbGVfYnV0dG9uXCIpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBidXR0b24gPSAkKHRoaXMpLmNsb3Nlc3QoXCIuZmVlZGJhY2tfZm9ybV9pbnB1dGZpbGVfYmxvY2tcIikuZmluZChcIi5pbnB1dGZpbGVfaW5wdXRcIik7XG4gICAgICAgIGJ1dHRvbi50cmlnZ2VyKFwiY2xpY2tcIik7XG4gICAgfSk7XG5cbiAgICAkKFwiLmlucHV0ZmlsZV9pbnB1dFwiKS5jaGFuZ2UoZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHZhbCA9ICQodGhpcykudmFsKCk7XG5cbiAgICAgICAgdmFyIGh0bWwgPSB2YWw7XG4gICAgICAgIHZhciByZWc9IG5ldyBSZWdFeHAoXCJbXipdKFxcLnR4dHxcXC5qcGd8XFwucG5nfFxcLnppcHxcXC5yYXJ8XFwuZG9jfFxcLmRvY3h8XFwueGxzfFxcLnhsc3h8XFwucGRmKVwiLCAnaScpO1xuICAgICAgICBpZiAoIXJlZy50ZXN0KHZhbCkpIHtcbiAgICAgICAgICAgIGh0bWwgPSBcIjxzcGFuIGNsYXNzPVxcXCJyZWRcXFwiPtCd0LXQstC10YDQvdC+0LUg0YDQsNGB0YjQuNGA0LXQvdC40LUg0YTQsNC50LvQsDwvc3Bhbj5cIjtcbiAgICAgICAgICAgICQodGhpcykudmFsKFwiXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLmZpbGVzWzBdLnNpemU7XG4gICAgICAgICAgICBpZiAoc2l6ZSA+IDUgKiAxMDI0ICogMTAyNCl7XG4gICAgICAgICAgICAgICAgaHRtbCA9IFwiPHNwYW4gY2xhc3M9XFxcInJlZFxcXCI+0KDQsNC30LzQtdGAINGE0LDQudC70LAg0L/RgNC10LLRi9GI0LDQtdGCIDUg0JzQsTwvc3Bhbj5cIjtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbChcIlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFsX21hcyA9IHZhbC5zcGxpdChcIlxcXFxcIik7XG4gICAgICAgICAgICAgICAgaHRtbCA9IHZhbF9tYXNbdmFsX21hcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KFwiLmZlZWRiYWNrX2Zvcm1faW5wdXRmaWxlX2Jsb2NrXCIpLmZpbmQoXCIuaW5wdXRmaWxlX2NhcHRpb25cIikuaHRtbChodG1sKS5hdHRyKFwidGl0bGVcIiwgdmFsKTtcbiAgICB9KTtcblxuICAgICQoXCIuZmVlZGJhY2tfcmFkaW9faW5wdXRcIikuY2hhbmdlKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBibG9ja2lkID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgJChcIi5mZWVkYmFja19jb250YWluZXJcIikubm90KFwiI2ZlZWRiYWNrX1wiICsgYmxvY2tpZCkuc2xpZGVVcCgzMDApO1xuICAgICAgICAkKFwiI2ZlZWRiYWNrX1wiICsgYmxvY2tpZCkuc2xpZGVEb3duKDMwMCk7XG4gICAgfSk7XG4gICAgJChcIi5jYW5TcGVha1wiKS5tb3VzZWVudGVyKGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdpc0ludmFsaWQnKSA9PSBcInRydWVcIikge1xuICAgICAgICAgICAgdmFyIG1zZyA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UoJCh0aGlzKVswXS5pbm5lclRleHQpO1xuICAgICAgICAgICAgc2F5KG1zZyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBzYXlUaW1lb3V0ID0gbnVsbDtcblxuICAgIGZ1bmN0aW9uIHNheSh0ZXh0KSB7XG4gICAgICAgIGlmIChzcGVlY2hTeW50aGVzaXMuc3BlYWtpbmcpIHtcbiAgICAgICAgICAgIC8vIFNwZWVjaFN5biBpcyBjdXJyZW50bHkgc3BlYWtpbmcsIGNhbmNlbCB0aGUgY3VycmVudCB1dHRlcmFuY2UocylcbiAgICAgICAgICAgIHNwZWVjaFN5bnRoZXNpcy5jYW5jZWwoKTtcblxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGRvbid0IGNyZWF0ZSBtb3JlIHRoYW4gb25lIHRpbWVvdXQuLi5cbiAgICAgICAgICAgIGlmIChzYXlUaW1lb3V0ICE9PSBudWxsKVxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzYXlUaW1lb3V0KTtcblxuICAgICAgICAgICAgc2F5VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBzYXkodGV4dCk7IH0sIDI1MCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBHb29kIHRvIGdvXG4gICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMuc3BlYWsodGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaWNvbl9pbnZhbGlkID0gJCgnLm1lbnVfX3Bob25lLWNvbnRhaW5lcl9faWNvbicpO1xuXG4gICAgJChcIi5pbnZhbGlkXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2lzSW52YWxpZCcpID09IFwidHJ1ZVwiKXtcbiAgICAgICAgICAgICQodGhpcykuY3NzKFwiZmlsbFwiLFwiYmxhY2tcIik7XG4gICAgICAgICAgICBpY29uX2ludmFsaWQuY3NzKFwiYm94LXNoYWRvd1wiLCBcIm5vbmVcIik7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdpc0ludmFsaWQnLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKHRoaXMpLmNzcyhcImZpbGxcIiwgXCIjZTlhYzQ1XCIpO1xuXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCcubWVudV9fcGhvbmUtY29udGFpbmVyX19pY29uJykpIHtcbiAgICAgICAgICAgICAgICBpY29uX2ludmFsaWQuY3NzKFwiYm94LXNoYWRvd1wiLCBcIndoaXRlIDBweCAwcHggNXB4IDJweFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnaXNJbnZhbGlkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnaXNJbnZhbGlkJykgPT0gXCJ0cnVlXCIpe1xuICAgICAgICAkKFwiLmludmFsaWRcIikuY3NzKFwiZmlsbFwiLFwiI2U5YWM0NVwiKTtcbiAgICAgICAgaWNvbl9pbnZhbGlkLmNzcyhcImJveC1zaGFkb3dcIiwgXCJ3aGl0ZSAwcHggMHB4IDVweCAycHhcIik7XG4gICAgfVxuXG4gICAgY2hhbmdlSGVpZ2h0TWFpbkJsb2NrKCk7XG5cbiAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hhbmdlSGVpZ2h0TWFpbkJsb2NrKClcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGNoYW5nZUhlaWdodE1haW5CbG9jaygpIHtcbiAgICAgICAgdmFyIGdyb3VwID0gJCgnI2dyaWQtZ3JvdXAnKTtcblxuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gOTYwKVxuICAgICAgICAgICAgZ3JvdXAuaGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodCAtIDE3MCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGdyb3VwLmhlaWdodCgnaW5pdGlhbCcpXG4gICAgfVxuXG4gICAgJCgnLmVjb3Rla19pbnB1dHRleHQuY3VzdG9tX2Zvcm0nKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZWN0ID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIHRpdGxlID0gc2VsZWN0LnZhbCgpO1xuXG4gICAgICAgIHNlbGVjdC5wYXJlbnQoKS5maW5kKCcuY3VzdG9tX2Zvcm1fc3Bhbl90aGVtYScpLnRleHQodGl0bGUpO1xuICAgIH0pO1xuXG4gICAgJChcIi50b192YWxpZGF0ZVwiKS5pbnB1dG1hc2soKTtcbiAgICAkKFwiLnRvX3ZhbGlkYXRlXCIpLm9uKCdjaGFuZ2Uga2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiZm9ybV9fZWxlbWVudCBlcnJvclwiKTtcbiAgICB9KTtcblxuXG5cblxuICAgICQoXCIuZWNvdGVrX2J1dHRvbjNcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBjdXJyZW50X2Zvcm0gPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpO1xuICAgICAgICB2YXIgaGFzRXJyID0gZmFsc2U7XG4gICAgICAgIGlmICghY3VycmVudF9mb3JtLmZpbmQoXCIucnVsZXNfY2hlY2tib3hcIikuaXMoJzpjaGVja2VkJykpe1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgICAgIGFsZXJ0KFwi0JLRiyDQtNC+0LvQttC90Ysg0YHQvtCz0LvQsNGB0LjRgtGM0YHRjyDRgSDQv9C+0LvQuNGC0LjQutC+0Lkg0L7QsdGA0LDQsdC+0YLQutC4INC00LDQvdC90YvRhSFcIik7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudF9mb3JtLmZpbmQoXCIudG9fdmFsaWRhdGVcIikuZWFjaChmdW5jdGlvbiAobnVtLCBlbCkge1xuICAgICAgICAgICAgaWYgKCEkKGVsKS5pbnB1dG1hc2soXCJpc0NvbXBsZXRlXCIpICYmICgkKGVsKS5kYXRhKFwiaW5wdXRtYXNrLXJlZ2V4XCIpICE9IFwiLipcIikgJiYgJChlbCkucGFyZW50KCkucGFyZW50KCkuZmluZChcIi5ub3RudWxsX2ljb25cIikubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgICAgICAgICAgJChlbCkucGFyZW50KCkuYWRkQ2xhc3MoXCJmb3JtX19lbGVtZW50IGVycm9yXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBuZXcgRm9ybURhdGE7XG4gICAgICAgIHJlc3VsdHMuYXBwZW5kKFwiZnVsbFwiLCB0cnVlKTtcbiAgICAgICAgcmVzdWx0cy5hcHBlbmQoXCJpZFwiLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XG4gICAgICAgIGlmICghaGFzRXJyKSB7XG4gICAgICAgICAgICBjdXJyZW50X2Zvcm0uZmluZChcIi5mZWVkYmFja19mb3JtX2l0ZW1cIikuZWFjaChmdW5jdGlvbiAobnVtLCBlbCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9ICQoZWwpLmZpbmQoXCIuZmVlZGJhY2tfZm9ybV9jYXB0aW9uXCIpWzBdLmNoaWxkTm9kZXNbMF0uZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRfbm9kZSA9ICQoZWwpLmZpbmQoXCIuZWNvdGVrX2lucHV0dGV4dFwiKVswXTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQodGl0bGUudHJpbSgpLCQoY29udGVudF9ub2RlKS52YWwoKSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKCdmaWxlJywgY3VycmVudF9mb3JtLmZpbmQoXCIjZG9wZmlsZVwiKS5wcm9wKCdmaWxlcycpWzBdKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4KXtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6IFwiL2FqYXgtaGFuZGxlci9cIixcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgZGF0YTogcmVzdWx0cyxcbiAgICAgICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgVUlraXQubm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IChyZXN1bHQgPT0gXCJzdWNjZXNzXCIpID8gJ9CS0LDRiNC1INGB0L7QvtCx0YnQtdC90LjQtSDRg9GB0L/QtdGI0L3QviDQvtGC0L/RgNCw0LLQu9C10L3Qviwg0L3QvtC80LXRgCDQvtCx0YDQsNGJ0LXQvdC40Y86ICcgKyByZXN1bHRzLmdldChcImlkXCIpICsgXCJcXG7QndC+0LzQtdGAINC+0LHRgNCw0YnQtdC90LjRjyDRgtCw0Log0LbQtSDQv9GA0L7QtNGD0LHQu9C40YDQvtCy0LDQvSDQvdCwINCy0LDRiNGDINC/0L7Rh9GC0YNcIiAgOiAn0J7RiNC40LHQutCwINC+0YLQv9GA0LDQstC60Lgg0YHQvtC+0LHRidC10L3QuNGPJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogNjAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvczogJ2JvdHRvbS1jZW50ZXInXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLmVjb3Rla19pbnB1dHRleHRcIikudmFsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBVSWtpdC5ub3RpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ9Ce0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjycsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3M6ICdib3R0b20tY2VudGVyJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5cblxuXG59KTsiXX0=
