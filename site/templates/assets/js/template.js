$(document).ready(function(){$(".js-input").on("focus focusout",function(e){e.preventDefault(),$(e.target).parent().toggleClass("is_focused"),"focusout"==e.type&&$(e.target).val($.trim($(e.target).val()))}),$(".js-input").on("change keyup",function(e){e.preventDefault(),""===$.trim($(e.target).val())||$(e.target).hasClass("is_filled")?$(e.target).parent().removeClass("is_filled"):$(e.target).parent().addClass("is_filled"),$(this).parent().removeClass("error")}),$(".js-phone").on("focusout",function(e){e.preventDefault();var t=$(this).val().replace(/[^0-9]/gi,"");7==t.substr(0,1)&&(t="+7"+t.substr(1,t.length-1)),$(this).val(t)});var e=$("#svg1"),t=$("#svg2"),a=$(".header__content"),n=0,s=3;t.find("polygon").click(function(){a.eq(s).toggleClass("active"),s=$(this).index()-1,a.eq(s).toggleClass("active")}).mouseover(function(){n=$(this).index()-1,e.find("polygon").eq(n).toggleClass("active")}).mouseleave(function(){n=$(this).index()-1,e.find("polygon").eq(n).toggleClass("active")});var i=$("#svg_on_mappage");i.find("polygon").mouseover(function(){n=$(this).index()-1,i.find("polygon").eq(n).toggleClass("active")}).mouseleave(function(){n=$(this).index()-1,i.find("polygon").eq(n).toggleClass("active")}).click(function(){n=$(this).index()-1,window.location.replace(i.find("polygon").eq(n).attr("data-link"))}),$("#submit_form").click(function(e){e.preventDefault();var t=$("#callback_source").attr("data-source"),a=$("#name"),n=$("#phone"),s=$("#company"),i=$("#mail"),o=new RegExp(/\d{11}/),x=new RegExp(/.+/),r=new RegExp(/^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,})(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@)(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22))(?:\.(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\]))$/),l=!1;if(x.test(a.val())||(a.parent().addClass("error"),l=!0),o.test(n.val())||(n.parent().addClass("error"),l=!0),r.test(i.val())||(i.parent().addClass("error"),l=!0),l)return!1;var c={name:a.val(),phone:n.val(),company:s.val(),email:i.val()};null!=t&&(c.from=t),a.val(""),n.val(""),s.val(""),i.val(""),$.ajax({url:"/ajax-handler/",type:"POST",data:{data:c},success:function(e){UIkit.offcanvas.hide([force=!1]),UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено":"Ошибка отправки сообщения",status:e,timeout:3e3,pos:"bottom-center"})},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}),$(".proposal_request").click(function(){$("#callback_source").attr("data-source",$(this).attr("data-source"))}),$("#submit_form2").click(function(e){e.preventDefault();var t=$("#name9"),a=$("#text9"),n=$("#mail9"),s=new RegExp(/.+/),i=new RegExp(/^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,})(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@)(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22))(?:\.(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\]))$/),o=!1;if(s.test(t.val())||(t.parent().addClass("error"),o=!0),s.test(a.val())||(a.parent().addClass("error"),o=!0),i.test(n.val())||(n.parent().addClass("error"),o=!0),o)return!1;var x={name:t.val(),email:n.val(),quest:a.val()};t.val(""),a.val(""),n.val(""),$.ajax({url:"/ajax-handler/",type:"POST",data:{data:x},success:function(e){UIkit.offcanvas.hide([force=!1]),UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено":"Ошибка отправки сообщения",status:e,timeout:3e3,pos:"bottom-center"})},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}),$(".inputfile_button").click(function(){$(this).closest(".feedback_form_inputfile_block").find(".inputfile_input").trigger("click")}),$(".inputfile_input").change(function(){var e=$(this).val(),t=e;new RegExp("[^*](.txt|.jpg|.png|.zip|.rar|.doc|.docx|.xls|.xlsx|.pdf)","i").test(e)?5242880<this.files[0].size?(t='<span class="red">Размер файла превышает 5 Мб</span>',$(this).val("")):(val_mas=e.split("\\"),t=val_mas[val_mas.length-1]):(t='<span class="red">Неверное расширение файла</span>',$(this).val(""));$(this).closest(".feedback_form_inputfile_block").find(".inputfile_caption").html(t).attr("title",e)}),$(".feedback_radio_input").change(function(){var e=$(this).val();$(".feedback_container").not("#feedback_"+e).slideUp(300),$("#feedback_"+e).slideDown(300)}),$(".canSpeak").mouseenter(function(){(console.log("true"==sessionStorage.getItem("isInvalid")),"true"==sessionStorage.getItem("isInvalid"))&&function e(t){speechSynthesis.speaking?(speechSynthesis.cancel(),null!==o&&clearTimeout(o),o=setTimeout(function(){e(t)},250)):speechSynthesis.speak(t)}(new SpeechSynthesisUtterance($(this)[0].innerText))});var o=null;var x=$(".menu__phone-container__icon"),r=$(".invalid_footer");function l(){var e=$("#grid-group");960<=window.innerWidth?e.height(window.innerHeight-170):e.height("initial")}$(".invalid").click(function(){"true"==sessionStorage.getItem("isInvalid")?($(r).css("fill","black"),x.css("box-shadow","none"),sessionStorage.setItem("isInvalid",!1)):($(r).css("fill","#e9ac45"),$(this).find(".menu__phone-container__icon")&&x.css("box-shadow","white 0px 0px 5px 2px"),sessionStorage.setItem("isInvalid",!0))}),"true"==sessionStorage.getItem("isInvalid")&&($(".invalid").css("fill","#e9ac45"),x.css("box-shadow","white 0px 0px 5px 2px")),l(),$(window).resize(function(){l()}),$(".ecotek_inputtext.custom_form").change(function(){var e=$(this),t=e.val();e.parent().find(".custom_form_span_thema").text(t)}),$(".to_validate").inputmask(),$(".to_validate").on("change keyup",function(e){$(this).parent().removeClass("form__element error")}),$(".ecotek_button3").click(function(e){e.preventDefault();var t=$(this).parent().parent().parent(),a=!1;t.find(".rules_checkbox").is(":checked")||(a=!0,alert("Вы должны согласиться с политикой обработки данных!")),t.find(".to_validate").each(function(e,t){!$(t).inputmask("isComplete")&&".*"!=$(t).data("inputmask-regex")&&0<$(t).parent().parent().find(".notnull_icon").length&&(a=!0,$(t).parent().addClass("form__element error"))});var s=new FormData;if(s.append("full",!0),s.append("req_id",Math.trunc((new Date).getTime()/1e7)),!a){t.find(".feedback_form_item").each(function(e,t){try{var a=$(t).find(".feedback_form_caption")[0].childNodes[0].data,n=$(t).find(".ecotek_inputtext")[0];s.append(a.trim(),$(n).val())}catch(e){}});try{s.append("file",t.find("#dopfile").prop("files")[0])}catch(e){}$.ajax({url:"/ajax-handler/",type:"POST",data:s,processData:!1,contentType:!1,success:function(e){UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено, номер обращения: "+s.get("id")+"\nНомер обращения так же продублирован на вашу почту":"Ошибка отправки сообщения",status:e,timeout:6e3,pos:"bottom-center"}),"success"==e&&$(".ecotek_inputtext").val("")},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}}),document.documentElement.setAttribute("data-useragent",navigator.userAgent)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBsYXRlLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5Iiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJwYXJlbnQiLCJ0b2dnbGVDbGFzcyIsInR5cGUiLCJ2YWwiLCJ0cmltIiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwidGhpcyIsInJlcGxhY2UiLCJzdWJzdHIiLCJsZW5ndGgiLCJzdmcxIiwic3ZnMiIsImNvbnRlbnRzIiwiaSIsImoiLCJmaW5kIiwiY2xpY2siLCJlcSIsImluZGV4IiwibW91c2VvdmVyIiwibW91c2VsZWF2ZSIsInN2Z19vbl9wYWdlIiwid2luZG93IiwibG9jYXRpb24iLCJhdHRyIiwiZnJvbSIsIm5hbWUiLCJwaG9uZSIsImNvbXBhbnkiLCJlbWFpbCIsInJlZ2V4X3Bob25lIiwiUmVnRXhwIiwicmVnZXhfbmFtZSIsInJlZ2V4X2VtYWlsIiwiaGFzRXJyIiwidGVzdCIsImRhdGEiLCJ1bmRlZmluZWQiLCJhamF4IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsIlVJa2l0Iiwib2ZmY2FudmFzIiwiaGlkZSIsImZvcmNlIiwibm90aWZ5IiwibWVzc2FnZSIsInN0YXR1cyIsInRpbWVvdXQiLCJwb3MiLCJlcnJvciIsInF1ZXN0IiwiY2xvc2VzdCIsInRyaWdnZXIiLCJjaGFuZ2UiLCJodG1sIiwiZmlsZXMiLCJzaXplIiwidmFsX21hcyIsInNwbGl0IiwiYmxvY2tpZCIsIm5vdCIsInNsaWRlVXAiLCJzbGlkZURvd24iLCJtb3VzZWVudGVyIiwiY29uc29sZSIsImxvZyIsInNlc3Npb25TdG9yYWdlIiwiZ2V0SXRlbSIsInNheSIsInRleHQiLCJzcGVlY2hTeW50aGVzaXMiLCJzcGVha2luZyIsImNhbmNlbCIsInNheVRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic3BlYWsiLCJTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UiLCJpbm5lclRleHQiLCJpY29uX2ludmFsaWQiLCJib3R0b21faWNvbiIsImNoYW5nZUhlaWdodE1haW5CbG9jayIsImdyb3VwIiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiY3NzIiwic2V0SXRlbSIsInJlc2l6ZSIsInNlbGVjdCIsInRpdGxlIiwiaW5wdXRtYXNrIiwiY3VycmVudF9mb3JtIiwiaXMiLCJhbGVydCIsImVhY2giLCJudW0iLCJlbCIsInJlc3VsdHMiLCJGb3JtRGF0YSIsImFwcGVuZCIsIk1hdGgiLCJ0cnVuYyIsIkRhdGUiLCJnZXRUaW1lIiwiY2hpbGROb2RlcyIsImNvbnRlbnRfbm9kZSIsImV4IiwicHJvcCIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJnZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFFQyxVQUFVQyxNQUFNLFdBQ2hCRixFQUFFLGFBQWFHLEdBQUcsaUJBQWtCLFNBQVNDLEdBQ3ZDQSxFQUFFQyxpQkFDRkwsRUFBRUksRUFBRUUsUUFBUUMsU0FBU0MsWUFBWSxjQUNwQixZQUFWSixFQUFFSyxNQUNEVCxFQUFFSSxFQUFFRSxRQUFRSSxJQUFJVixFQUFFVyxLQUFLWCxFQUFFSSxFQUFFRSxRQUFRSSxVQUczQ1YsRUFBRSxhQUFhRyxHQUFHLGVBQWdCLFNBQVNDLEdBQ3ZDQSxFQUFFQyxpQkFDK0IsS0FBOUJMLEVBQUVXLEtBQUtYLEVBQUVJLEVBQUVFLFFBQVFJLFFBQWtCVixFQUFFSSxFQUFFRSxRQUFRTSxTQUFTLGFBR3pEWixFQUFFSSxFQUFFRSxRQUFRQyxTQUFTTSxZQUFZLGFBRmpDYixFQUFFSSxFQUFFRSxRQUFRQyxTQUFTTyxTQUFTLGFBSWxDZCxFQUFFZSxNQUFNUixTQUFTTSxZQUFZLFdBRWpDYixFQUFFLGFBQWFHLEdBQUcsV0FBWSxTQUFTQyxHQUNuQ0EsRUFBRUMsaUJBQ0YsSUFBSUssRUFBTVYsRUFBRWUsTUFBTUwsTUFBTU0sUUFB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RUFBRTRHLEdBQUlyRyxTQUFTTyxTQUFTLDBCQUdoQyxJQUFJK0YsRUFBVSxJQUFJQyxTQUdsQixHQUZBRCxFQUFRRSxPQUFPLFFBQVEsR0FDdkJGLEVBQVFFLE9BQU8sU0FBVUMsS0FBS0MsT0FBTSxJQUFJQyxNQUFPQyxVQUFVLE9BQ3BEeEUsRUFBUSxDQUNUNEQsRUFBYS9FLEtBQUssdUJBQXVCa0YsS0FBSyxTQUFVQyxFQUFLQyxHQUN6RCxJQUNJLElBQUlQLEVBQVFyRyxFQUFFNEcsR0FBSXBGLEtBQUssMEJBQTBCLEdBQUc0RixXQUFXLEdBQUd2RSxLQUM5RHdFLEVBQWVySCxFQUFFNEcsR0FBSXBGLEtBQUsscUJBQXFCLEdBQ25EcUYsRUFBUUUsT0FBT1YsRUFBTTFGLE9BQU9YLEVBQUVxSCxHQUFjM0csT0FDOUMsTUFBTzRHLE9BS2IsSUFDSVQsRUFBUUUsT0FBTyxPQUFRUixFQUFhL0UsS0FBSyxZQUFZK0YsS0FBSyxTQUFTLElBQ3JFLE1BQU9ELElBR1R0SCxFQUFFK0MsS0FBSyxDQUNIQyxJQUFLLGlCQUNMdkMsS0FBTSxPQUNOb0MsS0FBTWdFLEVBQ05XLGFBQWEsRUFDYkMsYUFBYSxFQUNieEUsUUFBUyxTQUFVQyxHQUNmQyxNQUFNSSxPQUFPLENBQ1RDLFFBQW9CLFdBQVZOLEVBQXVCLHVEQUF5RDJELEVBQVFhLElBQUksTUFBUSx1REFBMEQsNEJBQ3hLakUsT0FBUVAsRUFDUlEsUUFBUyxJQUNUQyxJQUFLLGtCQUVLLFdBQVZULEdBQ0FsRCxFQUFFLHFCQUFxQlUsSUFBSSxLQUduQ2tELE1BQU8sU0FBVVYsR0FDYkMsTUFBTUksT0FBTyxDQUNUQyxRQUFTLDRCQUNUQyxPQUFRLFVBQ1JDLFFBQVMsSUFDVEMsSUFBSyx3QkFNZjFELFNBQVMwSCxnQkFDZkMsYUFBYSxpQkFBa0JDLFVBQVVDIiwiZmlsZSI6InRlbXBsYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICQoJy5qcy1pbnB1dCcpLm9uKCdmb2N1cyBmb2N1c291dCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoKS50b2dnbGVDbGFzcygnaXNfZm9jdXNlZCcpO1xuICAgICAgICBpZihlLnR5cGUgPT0gJ2ZvY3Vzb3V0Jykge1xuICAgICAgICAgICAgJChlLnRhcmdldCkudmFsKCQudHJpbSgkKGUudGFyZ2V0KS52YWwoKSkpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgJCgnLmpzLWlucHV0Jykub24oJ2NoYW5nZSBrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZigkLnRyaW0oJChlLnRhcmdldCkudmFsKCkpICE9PSAnJyAmJiAhJChlLnRhcmdldCkuaGFzQ2xhc3MoJ2lzX2ZpbGxlZCcpKSB7XG4gICAgICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoKS5hZGRDbGFzcygnaXNfZmlsbGVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnaXNfZmlsbGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImVycm9yXCIpO1xuICAgIH0pO1xuICAgICQoJy5qcy1waG9uZScpLm9uKCdmb2N1c291dCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgdmFsID0gJCh0aGlzKS52YWwoKS5yZXBsYWNlKC9bXjAtOV0vZ2ksJycpO1xuICAgICAgICBpZih2YWwuc3Vic3RyKDAsIDEpID09IDcpIHtcbiAgICAgICAgICAgIHZhbCA9ICcrNycgKyB2YWwuc3Vic3RyKDEsIHZhbC5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuICAgICAgICAkKHRoaXMpLnZhbCh2YWwpO1xuICAgIH0pO1xuXG4gICAgdmFyIHN2ZzEgPSAkKCcjc3ZnMScpO1xuICAgIHZhciBzdmcyID0gJCgnI3N2ZzInKTtcbiAgICB2YXIgY29udGVudHMgPSAkKCcuaGVhZGVyX19jb250ZW50Jyk7XG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBqID0gMztcbiAgICBzdmcyLmZpbmQoJ3BvbHlnb24nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgIGNvbnRlbnRzLmVxKGopLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgIGogPSAkKHRoaXMpLmluZGV4KCktMTtcbiAgICAgIGNvbnRlbnRzLmVxKGopLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KVxuICAgIC5tb3VzZW92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICBpID0gJCh0aGlzKS5pbmRleCgpLTE7XG4gICAgICBzdmcxLmZpbmQoJ3BvbHlnb24nKS5lcShpKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgfSlcbiAgICAubW91c2VsZWF2ZShmdW5jdGlvbigpIHtcbiAgICAgIGkgPSAkKHRoaXMpLmluZGV4KCktMTtcbiAgICAgIHN2ZzEuZmluZCgncG9seWdvbicpLmVxKGkpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIHZhciBzdmdfb25fcGFnZSA9ICQoXCIjc3ZnX29uX21hcHBhZ2VcIik7XG4gICAgc3ZnX29uX3BhZ2UuZmluZCgncG9seWdvbicpXG4gICAgICAgIC5tb3VzZW92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICBpID0gJCh0aGlzKS5pbmRleCgpLTE7XG4gICAgICAgIHN2Z19vbl9wYWdlLmZpbmQoJ3BvbHlnb24nKS5lcShpKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaSA9ICQodGhpcykuaW5kZXgoKS0xO1xuICAgICAgICAgICAgc3ZnX29uX3BhZ2UuZmluZCgncG9seWdvbicpLmVxKGkpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGkgPSAkKHRoaXMpLmluZGV4KCktMTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHN2Z19vbl9wYWdlLmZpbmQoJ3BvbHlnb24nKS5lcShpKS5hdHRyKFwiZGF0YS1saW5rXCIpKTtcbiAgICAgICAgfSk7XG5cbiAgICAkKFwiI3N1Ym1pdF9mb3JtXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgZnJvbSA9ICQoXCIjY2FsbGJhY2tfc291cmNlXCIpLmF0dHIoXCJkYXRhLXNvdXJjZVwiKTtcbiAgICAgICAgdmFyIG5hbWUgPSAkKFwiI25hbWVcIik7XG4gICAgICAgIHZhciBwaG9uZSA9ICQoXCIjcGhvbmVcIik7XG4gICAgICAgIHZhciBjb21wYW55ID0gJChcIiNjb21wYW55XCIpO1xuICAgICAgICB2YXIgZW1haWwgPSAkKFwiI21haWxcIik7XG5cbiAgICAgICAgdmFyIHJlZ2V4X3Bob25lID0gbmV3IFJlZ0V4cCgvXFxkezExfS8pO1xuICAgICAgICB2YXIgcmVnZXhfbmFtZSA9IG5ldyBSZWdFeHAoLy4rLyk7XG4gICAgICAgIHZhciByZWdleF9lbWFpbCA9IG5ldyBSZWdFeHAoL14oPyEoPzooPzpcXHgyMj9cXHg1Q1tcXHgwMC1cXHg3RV1cXHgyMj8pfCg/OlxceDIyP1teXFx4NUNcXHgyMl1cXHgyMj8pKXsyNTUsfSkoPyEoPzooPzpcXHgyMj9cXHg1Q1tcXHgwMC1cXHg3RV1cXHgyMj8pfCg/OlxceDIyP1teXFx4NUNcXHgyMl1cXHgyMj8pKXs2NSx9QCkoPzooPzpbXFx4MjFcXHgyMy1cXHgyN1xceDJBXFx4MkJcXHgyRFxceDJGLVxceDM5XFx4M0RcXHgzRlxceDVFLVxceDdFXSspfCg/OlxceDIyKD86W1xceDAxLVxceDA4XFx4MEJcXHgwQ1xceDBFLVxceDFGXFx4MjFcXHgyMy1cXHg1QlxceDVELVxceDdGXXwoPzpcXHg1Q1tcXHgwMC1cXHg3Rl0pKSpcXHgyMikpKD86XFwuKD86KD86W1xceDIxXFx4MjMtXFx4MjdcXHgyQVxceDJCXFx4MkRcXHgyRi1cXHgzOVxceDNEXFx4M0ZcXHg1RS1cXHg3RV0rKXwoPzpcXHgyMig/OltcXHgwMS1cXHgwOFxceDBCXFx4MENcXHgwRS1cXHgxRlxceDIxXFx4MjMtXFx4NUJcXHg1RC1cXHg3Rl18KD86XFx4NUNbXFx4MDAtXFx4N0ZdKSkqXFx4MjIpKSkqQCg/Oig/Oig/IS4qW14uXXs2NCx9KSg/Oig/Oig/OnhuLS0pP1thLXowLTldKyg/Oi1bYS16MC05XSspKlxcLil7MSwxMjZ9KXsxLH0oPzooPzpbYS16XVthLXowLTldKil8KD86KD86eG4tLSlbYS16MC05XSspKSg/Oi1bYS16MC05XSspKil8KD86XFxbKD86KD86SVB2NjooPzooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezd9KXwoPzooPyEoPzouKlthLWYwLTldWzpcXF1dKXs3LH0pKD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDV9KT86Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCw1fSk/KSkpfCg/Oig/OklQdjY6KD86KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXs1fTopfCg/Oig/ISg/Oi4qW2EtZjAtOV06KXs1LH0pKD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDN9KT86Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCwzfTopPykpKT8oPzooPzoyNVswLTVdKXwoPzoyWzAtNF1bMC05XSl8KD86MVswLTldezJ9KXwoPzpbMS05XT9bMC05XSkpKD86XFwuKD86KD86MjVbMC01XSl8KD86MlswLTRdWzAtOV0pfCg/OjFbMC05XXsyfSl8KD86WzEtOV0/WzAtOV0pKSl7M30pKVxcXSkpJC8pO1xuXG4gICAgICAgIHZhciBoYXNFcnIgPSBmYWxzZTtcblxuICAgICAgICBpZiAoIXJlZ2V4X25hbWUudGVzdChuYW1lLnZhbCgpKSkge1xuICAgICAgICAgICAgbmFtZS5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlZ2V4X3Bob25lLnRlc3QocGhvbmUudmFsKCkpKSB7XG4gICAgICAgICAgICBwaG9uZS5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlZ2V4X2VtYWlsLnRlc3QoZW1haWwudmFsKCkpKSB7XG4gICAgICAgICAgICBlbWFpbC5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzRXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUudmFsKCksXG4gICAgICAgICAgICBwaG9uZTogcGhvbmUudmFsKCksXG4gICAgICAgICAgICBjb21wYW55OiBjb21wYW55LnZhbCgpLFxuICAgICAgICAgICAgZW1haWw6IGVtYWlsLnZhbCgpXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGZyb20gIT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIGRhdGEuZnJvbSA9IGZyb207XG4gICAgICAgIH1cblxuICAgICAgICBuYW1lLnZhbChcIlwiKTtcbiAgICAgICAgcGhvbmUudmFsKFwiXCIpO1xuICAgICAgICBjb21wYW55LnZhbChcIlwiKTtcbiAgICAgICAgZW1haWwudmFsKFwiXCIpO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiL2FqYXgtaGFuZGxlci9cIixcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHtkYXRhOiBkYXRhfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBVSWtpdC5vZmZjYW52YXMuaGlkZShbZm9yY2UgPSBmYWxzZV0pO1xuICAgICAgICAgICAgICAgIFVJa2l0Lm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IChyZXN1bHQgPT0gXCJzdWNjZXNzXCIpID8gJ9CS0LDRiNC1INGB0L7QvtCx0YnQtdC90LjQtSDRg9GB0L/QtdGI0L3QviDQvtGC0L/RgNCw0LLQu9C10L3QvicgOiAn0J7RiNC40LHQutCwINC+0YLQv9GA0LDQstC60Lgg0YHQvtC+0LHRidC10L3QuNGPJyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBvczogJ2JvdHRvbS1jZW50ZXInXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBVSWtpdC5ub3RpZnkoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn0J7RiNC40LHQutCwINC+0YLQv9GA0LDQstC60Lgg0YHQvtC+0LHRidC10L3QuNGPJyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnd2FybmluZycsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBvczogJ2JvdHRvbS1jZW50ZXInXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgICQoXCIucHJvcG9zYWxfcmVxdWVzdFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjY2FsbGJhY2tfc291cmNlXCIpLmF0dHIoXCJkYXRhLXNvdXJjZVwiLCAkKHRoaXMpLmF0dHIoXCJkYXRhLXNvdXJjZVwiKSk7XG4gICAgfSk7XG5cbiAgICAkKFwiI3N1Ym1pdF9mb3JtMlwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIG5hbWUgPSAkKFwiI25hbWU5XCIpO1xuICAgICAgICB2YXIgcXVlc3QgPSAkKFwiI3RleHQ5XCIpO1xuICAgICAgICB2YXIgZW1haWwgPSAkKFwiI21haWw5XCIpO1xuXG4gICAgICAgIHZhciByZWdleF9uYW1lID0gbmV3IFJlZ0V4cCgvLisvKTtcbiAgICAgICAgdmFyIHJlZ2V4X2VtYWlsID0gbmV3IFJlZ0V4cCgvXig/ISg/Oig/OlxceDIyP1xceDVDW1xceDAwLVxceDdFXVxceDIyPyl8KD86XFx4MjI/W15cXHg1Q1xceDIyXVxceDIyPykpezI1NSx9KSg/ISg/Oig/OlxceDIyP1xceDVDW1xceDAwLVxceDdFXVxceDIyPyl8KD86XFx4MjI/W15cXHg1Q1xceDIyXVxceDIyPykpezY1LH1AKSg/Oig/OltcXHgyMVxceDIzLVxceDI3XFx4MkFcXHgyQlxceDJEXFx4MkYtXFx4MzlcXHgzRFxceDNGXFx4NUUtXFx4N0VdKyl8KD86XFx4MjIoPzpbXFx4MDEtXFx4MDhcXHgwQlxceDBDXFx4MEUtXFx4MUZcXHgyMVxceDIzLVxceDVCXFx4NUQtXFx4N0ZdfCg/OlxceDVDW1xceDAwLVxceDdGXSkpKlxceDIyKSkoPzpcXC4oPzooPzpbXFx4MjFcXHgyMy1cXHgyN1xceDJBXFx4MkJcXHgyRFxceDJGLVxceDM5XFx4M0RcXHgzRlxceDVFLVxceDdFXSspfCg/OlxceDIyKD86W1xceDAxLVxceDA4XFx4MEJcXHgwQ1xceDBFLVxceDFGXFx4MjFcXHgyMy1cXHg1QlxceDVELVxceDdGXXwoPzpcXHg1Q1tcXHgwMC1cXHg3Rl0pKSpcXHgyMikpKSpAKD86KD86KD8hLipbXi5dezY0LH0pKD86KD86KD86eG4tLSk/W2EtejAtOV0rKD86LVthLXowLTldKykqXFwuKXsxLDEyNn0pezEsfSg/Oig/OlthLXpdW2EtejAtOV0qKXwoPzooPzp4bi0tKVthLXowLTldKykpKD86LVthLXowLTldKykqKXwoPzpcXFsoPzooPzpJUHY2Oig/Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7N30pfCg/Oig/ISg/Oi4qW2EtZjAtOV1bOlxcXV0pezcsfSkoPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezAsNX0pPzo6KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDV9KT8pKSl8KD86KD86SVB2NjooPzooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezV9Oil8KD86KD8hKD86LipbYS1mMC05XTopezUsfSkoPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezAsM30pPzo6KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDN9Oik/KSkpPyg/Oig/OjI1WzAtNV0pfCg/OjJbMC00XVswLTldKXwoPzoxWzAtOV17Mn0pfCg/OlsxLTldP1swLTldKSkoPzpcXC4oPzooPzoyNVswLTVdKXwoPzoyWzAtNF1bMC05XSl8KD86MVswLTldezJ9KXwoPzpbMS05XT9bMC05XSkpKXszfSkpXFxdKSkkLyk7XG5cbiAgICAgICAgdmFyIGhhc0VyciA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghcmVnZXhfbmFtZS50ZXN0KG5hbWUudmFsKCkpKSB7XG4gICAgICAgICAgICBuYW1lLnBhcmVudCgpLmFkZENsYXNzKFwiZXJyb3JcIik7XG4gICAgICAgICAgICBoYXNFcnIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVnZXhfbmFtZS50ZXN0KHF1ZXN0LnZhbCgpKSkge1xuICAgICAgICAgICAgcXVlc3QucGFyZW50KCkuYWRkQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZWdleF9lbWFpbC50ZXN0KGVtYWlsLnZhbCgpKSkge1xuICAgICAgICAgICAgZW1haWwucGFyZW50KCkuYWRkQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0Vycikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLnZhbCgpLFxuICAgICAgICAgICAgZW1haWw6IGVtYWlsLnZhbCgpLFxuICAgICAgICAgICAgcXVlc3Q6IHF1ZXN0LnZhbCgpXG4gICAgICAgIH07XG5cblxuICAgICAgICBuYW1lLnZhbChcIlwiKTtcbiAgICAgICAgcXVlc3QudmFsKFwiXCIpO1xuICAgICAgICBlbWFpbC52YWwoXCJcIik7XG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCIvYWpheC1oYW5kbGVyL1wiLFxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge2RhdGE6IGRhdGF9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIFVJa2l0Lm9mZmNhbnZhcy5oaWRlKFtmb3JjZSA9IGZhbHNlXSk7XG4gICAgICAgICAgICAgICAgVUlraXQubm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogKHJlc3VsdCA9PSBcInN1Y2Nlc3NcIikgPyAn0JLQsNGI0LUg0YHQvtC+0LHRidC10L3QuNC1INGD0YHQv9C10YjQvdC+INC+0YLQv9GA0LDQstC70LXQvdC+JyA6ICfQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Y8nLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcG9zOiAnYm90dG9tLWNlbnRlcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIFVJa2l0Lm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Y8nLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcG9zOiAnYm90dG9tLWNlbnRlcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG5cblxuICAgICQoXCIuaW5wdXRmaWxlX2J1dHRvblwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYnV0dG9uID0gJCh0aGlzKS5jbG9zZXN0KFwiLmZlZWRiYWNrX2Zvcm1faW5wdXRmaWxlX2Jsb2NrXCIpLmZpbmQoXCIuaW5wdXRmaWxlX2lucHV0XCIpO1xuICAgICAgICBidXR0b24udHJpZ2dlcihcImNsaWNrXCIpO1xuICAgIH0pO1xuXG4gICAgJChcIi5pbnB1dGZpbGVfaW5wdXRcIikuY2hhbmdlKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciB2YWwgPSAkKHRoaXMpLnZhbCgpO1xuXG4gICAgICAgIHZhciBodG1sID0gdmFsO1xuICAgICAgICB2YXIgcmVnPSBuZXcgUmVnRXhwKFwiW14qXShcXC50eHR8XFwuanBnfFxcLnBuZ3xcXC56aXB8XFwucmFyfFxcLmRvY3xcXC5kb2N4fFxcLnhsc3xcXC54bHN4fFxcLnBkZilcIiwgJ2knKTtcbiAgICAgICAgaWYgKCFyZWcudGVzdCh2YWwpKSB7XG4gICAgICAgICAgICBodG1sID0gXCI8c3BhbiBjbGFzcz1cXFwicmVkXFxcIj7QndC10LLQtdGA0L3QvtC1INGA0LDRgdGI0LjRgNC10L3QuNC1INGE0LDQudC70LA8L3NwYW4+XCI7XG4gICAgICAgICAgICAkKHRoaXMpLnZhbChcIlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5maWxlc1swXS5zaXplO1xuICAgICAgICAgICAgaWYgKHNpemUgPiA1ICogMTAyNCAqIDEwMjQpe1xuICAgICAgICAgICAgICAgIGh0bWwgPSBcIjxzcGFuIGNsYXNzPVxcXCJyZWRcXFwiPtCg0LDQt9C80LXRgCDRhNCw0LnQu9CwINC/0YDQtdCy0YvRiNCw0LXRgiA1INCc0LE8L3NwYW4+XCI7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoXCJcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbF9tYXMgPSB2YWwuc3BsaXQoXCJcXFxcXCIpO1xuICAgICAgICAgICAgICAgIGh0bWwgPSB2YWxfbWFzW3ZhbF9tYXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgICQodGhpcykuY2xvc2VzdChcIi5mZWVkYmFja19mb3JtX2lucHV0ZmlsZV9ibG9ja1wiKS5maW5kKFwiLmlucHV0ZmlsZV9jYXB0aW9uXCIpLmh0bWwoaHRtbCkuYXR0cihcInRpdGxlXCIsIHZhbCk7XG4gICAgfSk7XG5cbiAgICAkKFwiLmZlZWRiYWNrX3JhZGlvX2lucHV0XCIpLmNoYW5nZShmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYmxvY2tpZCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICQoXCIuZmVlZGJhY2tfY29udGFpbmVyXCIpLm5vdChcIiNmZWVkYmFja19cIiArIGJsb2NraWQpLnNsaWRlVXAoMzAwKTtcbiAgICAgICAgJChcIiNmZWVkYmFja19cIiArIGJsb2NraWQpLnNsaWRlRG93bigzMDApO1xuICAgIH0pO1xuICAgICQoXCIuY2FuU3BlYWtcIikubW91c2VlbnRlcihmdW5jdGlvbigpe1xuICAgICAgICBjb25zb2xlLmxvZyhzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdpc0ludmFsaWQnKSA9PSBcInRydWVcIik7XG4gICAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdpc0ludmFsaWQnKSA9PSBcInRydWVcIikge1xuICAgICAgICAgICAgdmFyIG1zZyA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UoJCh0aGlzKVswXS5pbm5lclRleHQpO1xuICAgICAgICAgICAgc2F5KG1zZyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBzYXlUaW1lb3V0ID0gbnVsbDtcblxuICAgIGZ1bmN0aW9uIHNheSh0ZXh0KSB7XG4gICAgICAgIGlmIChzcGVlY2hTeW50aGVzaXMuc3BlYWtpbmcpIHtcbiAgICAgICAgICAgIC8vIFNwZWVjaFN5biBpcyBjdXJyZW50bHkgc3BlYWtpbmcsIGNhbmNlbCB0aGUgY3VycmVudCB1dHRlcmFuY2UocylcbiAgICAgICAgICAgIHNwZWVjaFN5bnRoZXNpcy5jYW5jZWwoKTtcblxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGRvbid0IGNyZWF0ZSBtb3JlIHRoYW4gb25lIHRpbWVvdXQuLi5cbiAgICAgICAgICAgIGlmIChzYXlUaW1lb3V0ICE9PSBudWxsKVxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzYXlUaW1lb3V0KTtcblxuICAgICAgICAgICAgc2F5VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBzYXkodGV4dCk7IH0sIDI1MCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBHb29kIHRvIGdvXG4gICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMuc3BlYWsodGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaWNvbl9pbnZhbGlkID0gJCgnLm1lbnVfX3Bob25lLWNvbnRhaW5lcl9faWNvbicpO1xuICAgIHZhciBib3R0b21faWNvbiA9ICQoJy5pbnZhbGlkX2Zvb3RlcicpO1xuXG4gICAgJChcIi5pbnZhbGlkXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2lzSW52YWxpZCcpID09IFwidHJ1ZVwiKXtcbiAgICAgICAgICAgICQoYm90dG9tX2ljb24pLmNzcyhcImZpbGxcIixcImJsYWNrXCIpO1xuICAgICAgICAgICAgaWNvbl9pbnZhbGlkLmNzcyhcImJveC1zaGFkb3dcIiwgXCJub25lXCIpO1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnaXNJbnZhbGlkJywgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChib3R0b21faWNvbikuY3NzKFwiZmlsbFwiLCBcIiNlOWFjNDVcIik7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCcubWVudV9fcGhvbmUtY29udGFpbmVyX19pY29uJykpIHtcbiAgICAgICAgICAgICAgICBpY29uX2ludmFsaWQuY3NzKFwiYm94LXNoYWRvd1wiLCBcIndoaXRlIDBweCAwcHggNXB4IDJweFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnaXNJbnZhbGlkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnaXNJbnZhbGlkJykgPT0gXCJ0cnVlXCIpe1xuICAgICAgICAkKFwiLmludmFsaWRcIikuY3NzKFwiZmlsbFwiLFwiI2U5YWM0NVwiKTtcbiAgICAgICAgaWNvbl9pbnZhbGlkLmNzcyhcImJveC1zaGFkb3dcIiwgXCJ3aGl0ZSAwcHggMHB4IDVweCAycHhcIik7XG4gICAgfVxuXG4gICAgY2hhbmdlSGVpZ2h0TWFpbkJsb2NrKCk7XG5cbiAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hhbmdlSGVpZ2h0TWFpbkJsb2NrKClcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGNoYW5nZUhlaWdodE1haW5CbG9jaygpIHtcbiAgICAgICAgdmFyIGdyb3VwID0gJCgnI2dyaWQtZ3JvdXAnKTtcblxuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gOTYwKVxuICAgICAgICAgICAgZ3JvdXAuaGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodCAtIDE3MCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGdyb3VwLmhlaWdodCgnaW5pdGlhbCcpXG4gICAgfVxuXG4gICAgJCgnLmVjb3Rla19pbnB1dHRleHQuY3VzdG9tX2Zvcm0nKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZWN0ID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIHRpdGxlID0gc2VsZWN0LnZhbCgpO1xuXG4gICAgICAgIHNlbGVjdC5wYXJlbnQoKS5maW5kKCcuY3VzdG9tX2Zvcm1fc3Bhbl90aGVtYScpLnRleHQodGl0bGUpO1xuICAgIH0pO1xuXG4gICAgJChcIi50b192YWxpZGF0ZVwiKS5pbnB1dG1hc2soKTtcbiAgICAkKFwiLnRvX3ZhbGlkYXRlXCIpLm9uKCdjaGFuZ2Uga2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiZm9ybV9fZWxlbWVudCBlcnJvclwiKTtcbiAgICB9KTtcblxuXG5cblxuICAgICQoXCIuZWNvdGVrX2J1dHRvbjNcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBjdXJyZW50X2Zvcm0gPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpO1xuICAgICAgICB2YXIgaGFzRXJyID0gZmFsc2U7XG4gICAgICAgIGlmICghY3VycmVudF9mb3JtLmZpbmQoXCIucnVsZXNfY2hlY2tib3hcIikuaXMoJzpjaGVja2VkJykpe1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgICAgIGFsZXJ0KFwi0JLRiyDQtNC+0LvQttC90Ysg0YHQvtCz0LvQsNGB0LjRgtGM0YHRjyDRgSDQv9C+0LvQuNGC0LjQutC+0Lkg0L7QsdGA0LDQsdC+0YLQutC4INC00LDQvdC90YvRhSFcIik7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudF9mb3JtLmZpbmQoXCIudG9fdmFsaWRhdGVcIikuZWFjaChmdW5jdGlvbiAobnVtLCBlbCkge1xuICAgICAgICAgICAgaWYgKCEkKGVsKS5pbnB1dG1hc2soXCJpc0NvbXBsZXRlXCIpICYmICgkKGVsKS5kYXRhKFwiaW5wdXRtYXNrLXJlZ2V4XCIpICE9IFwiLipcIikgJiYgJChlbCkucGFyZW50KCkucGFyZW50KCkuZmluZChcIi5ub3RudWxsX2ljb25cIikubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgICAgICAgICAgJChlbCkucGFyZW50KCkuYWRkQ2xhc3MoXCJmb3JtX19lbGVtZW50IGVycm9yXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBuZXcgRm9ybURhdGE7XG4gICAgICAgIHJlc3VsdHMuYXBwZW5kKFwiZnVsbFwiLCB0cnVlKTtcbiAgICAgICAgcmVzdWx0cy5hcHBlbmQoXCJyZXFfaWRcIiwgTWF0aC50cnVuYyhuZXcgRGF0ZSgpLmdldFRpbWUoKS8xMDAwMDAwMCkpO1xuICAgICAgICBpZiAoIWhhc0Vycikge1xuICAgICAgICAgICAgY3VycmVudF9mb3JtLmZpbmQoXCIuZmVlZGJhY2tfZm9ybV9pdGVtXCIpLmVhY2goZnVuY3Rpb24gKG51bSwgZWwpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSAkKGVsKS5maW5kKFwiLmZlZWRiYWNrX2Zvcm1fY2FwdGlvblwiKVswXS5jaGlsZE5vZGVzWzBdLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50X25vZGUgPSAkKGVsKS5maW5kKFwiLmVjb3Rla19pbnB1dHRleHRcIilbMF07XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKHRpdGxlLnRyaW0oKSwkKGNvbnRlbnRfbm9kZSkudmFsKCkpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLmFwcGVuZCgnZmlsZScsIGN1cnJlbnRfZm9ybS5maW5kKFwiI2RvcGZpbGVcIikucHJvcCgnZmlsZXMnKVswXSk7XG4gICAgICAgICAgICB9IGNhdGNoIChleCl7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiBcIi9hamF4LWhhbmRsZXIvXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdHMsXG4gICAgICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIFVJa2l0Lm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAocmVzdWx0ID09IFwic3VjY2Vzc1wiKSA/ICfQktCw0YjQtSDRgdC+0L7QsdGJ0LXQvdC40LUg0YPRgdC/0LXRiNC90L4g0L7RgtC/0YDQsNCy0LvQtdC90L4sINC90L7QvNC10YAg0L7QsdGA0LDRidC10L3QuNGPOiAnICsgcmVzdWx0cy5nZXQoXCJpZFwiKSArIFwiXFxu0J3QvtC80LXRgCDQvtCx0YDQsNGJ0LXQvdC40Y8g0YLQsNC6INC20LUg0L/RgNC+0LTRg9Cx0LvQuNGA0L7QstCw0L0g0L3QsCDQstCw0YjRgyDQv9C+0YfRgtGDXCIgIDogJ9Ce0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjycsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDYwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3M6ICdib3R0b20tY2VudGVyJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5lY290ZWtfaW5wdXR0ZXh0XCIpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgVUlraXQubm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Y8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnd2FybmluZycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAzMDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zOiAnYm90dG9tLWNlbnRlcidcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgIGRvYy5zZXRBdHRyaWJ1dGUoJ2RhdGEtdXNlcmFnZW50JywgbmF2aWdhdG9yLnVzZXJBZ2VudCk7XG59KTsiXX0=
