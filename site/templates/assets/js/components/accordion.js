!function(t){var i;window.UIkit2&&(i=t(UIkit2)),"function"==typeof define&&define.amd&&define("uikit-accordion",["uikit"],function(){return i||t(UIkit2)})}(function(n){"use strict";return n.component("accordion",{defaults:{showfirst:!0,collapse:!0,animate:!0,easing:"swing",duration:300,toggle:".uk-accordion-title",containers:".uk-accordion-content",clsactive:"uk-active"},boot:function(){n.ready(function(t){setTimeout(function(){n.$("[data-uk-accordion]",t).each(function(){var t=n.$(this);t.data("accordion")||n.accordion(t,n.Utils.options(t.attr("data-uk-accordion")))})},0)})},init:function(){var i=this;this.element.on("click.uk.accordion",this.options.toggle,function(t){t.preventDefault(),i.toggleItem(n.$(this).data("wrapper"),i.options.animate,i.options.collapse)}),this.update(!0),n.domObserve(this.element,function(t){i.element.children(i.options.containers).length&&i.update()})},toggleItem:function(t,i,e){var o=this;t.data("toggle").toggleClass(this.options.clsactive),t.data("content").toggleClass(this.options.clsactive);var a=t.data("toggle").hasClass(this.options.clsactive);e&&(this.toggle.not(t.data("toggle")).removeClass(this.options.clsactive),this.content.not(t.data("content")).removeClass(this.options.clsactive).parent().stop().css("overflow","hidden").animate({height:0},{easing:this.options.easing,duration:i?this.options.duration:0}).attr("aria-expanded","false")),t.stop().css("overflow","hidden"),i?t.animate({height:a?function(t){var i=n.$(t),e="auto";if(i.is(":visible"))e=i.outerHeight();else{var o={position:i.css("position"),visibility:i.css("visibility"),display:i.css("display")};e=i.css({position:"absolute",visibility:"hidden",display:"block"}).outerHeight(),i.css(o)}return e}(t.data("content")):0},{easing:this.options.easing,duration:this.options.duration,complete:function(){a&&(t.css({overflow:"",height:"auto"}),n.Utils.checkDisplay(t.data("content"))),o.trigger("display.uk.check")}}):(t.height(a?"auto":0),a&&(t.css({overflow:""}),n.Utils.checkDisplay(t.data("content"))),this.trigger("display.uk.check")),t.attr("aria-expanded",a),this.element.trigger("toggle.uk.accordion",[a,t.data("toggle"),t.data("content")])},update:function(t){var i,e,o,a=this;this.toggle=this.find(this.options.toggle),this.content=this.find(this.options.containers),this.content.each(function(t){(i=n.$(this)).parent().data("wrapper")?e=i.parent():(e=n.$(this).wrap('<div data-wrapper="true" style="overflow:hidden;height:0;position:relative;"></div>').parent()).attr("aria-expanded","false"),o=a.toggle.eq(t),e.data("toggle",o),e.data("content",i),o.data("wrapper",e),i.data("wrapper",e)}),this.element.trigger("update.uk.accordion",[this]),t&&this.options.showfirst&&this.toggleItem(this.toggle.eq(0).data("wrapper"),!1,!1)}}),n.accordion});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvYWNjb3JkaW9uLmpzIl0sIm5hbWVzIjpbImFkZG9uIiwiY29tcG9uZW50Iiwid2luZG93IiwiVUlraXQyIiwiZGVmaW5lIiwiYW1kIiwiVUkiLCJkZWZhdWx0cyIsInNob3dmaXJzdCIsImNvbGxhcHNlIiwiYW5pbWF0ZSIsImVhc2luZyIsImR1cmF0aW9uIiwidG9nZ2xlIiwiY29udGFpbmVycyIsImNsc2FjdGl2ZSIsImJvb3QiLCJyZWFkeSIsImNvbnRleHQiLCJzZXRUaW1lb3V0IiwiJCIsImVhY2giLCJlbGUiLCJ0aGlzIiwiZGF0YSIsImFjY29yZGlvbiIsIlV0aWxzIiwib3B0aW9ucyIsImF0dHIiLCJpbml0IiwiJHRoaXMiLCJlbGVtZW50Iiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJ0b2dnbGVJdGVtIiwidXBkYXRlIiwiZG9tT2JzZXJ2ZSIsImNoaWxkcmVuIiwibGVuZ3RoIiwid3JhcHBlciIsImFuaW1hdGVkIiwidG9nZ2xlQ2xhc3MiLCJhY3RpdmUiLCJoYXNDbGFzcyIsIm5vdCIsInJlbW92ZUNsYXNzIiwiY29udGVudCIsInBhcmVudCIsInN0b3AiLCJjc3MiLCJoZWlnaHQiLCIkZWxlIiwiaXMiLCJvdXRlckhlaWdodCIsInRtcCIsInBvc2l0aW9uIiwidmlzaWJpbGl0eSIsImRpc3BsYXkiLCJnZXRIZWlnaHQiLCJjb21wbGV0ZSIsIm92ZXJmbG93IiwiY2hlY2tEaXNwbGF5IiwidHJpZ2dlciIsIiRjb250ZW50IiwiJHdyYXBwZXIiLCIkdG9nZ2xlIiwiZmluZCIsImluZGV4Iiwid3JhcCIsImVxIl0sIm1hcHBpbmdzIjoiQ0FDQSxTQUFVQSxHQUNOLElBQUlDLEVBRUFDLE9BQU9DLFNBQ1BGLEVBQVlELEVBQU1HLFNBR0QsbUJBQVZDLFFBQXdCQSxPQUFPQyxLQUN0Q0QsT0FBTyxrQkFBbUIsQ0FBQyxTQUFVLFdBQ2pDLE9BQU9ILEdBQWFELEVBQU1HLFVBVHRDLENBWUcsU0FBU0csR0FFUixhQW1LQSxP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S0FBS1EsUUFBUWdDLFFBQVEsc0JBQXVCLENBQUNwQixFQUFRSCxFQUFRaEIsS0FBSyxVQUFXZ0IsRUFBUWhCLEtBQUssY0FHOUZZLE9BQVEsU0FBU1AsR0FFYixJQUFrQm1DLEVBQVVDLEVBQVVDLEVBQWxDcEMsRUFBUVAsS0FFWkEsS0FBS1YsT0FBU1UsS0FBSzRDLEtBQUs1QyxLQUFLSSxRQUFRZCxRQUNyQ1UsS0FBS3dCLFFBQVV4QixLQUFLNEMsS0FBSzVDLEtBQUtJLFFBQVFiLFlBRXRDUyxLQUFLd0IsUUFBUTFCLEtBQUssU0FBUytDLElBRXZCSixFQUFXMUQsRUFBR2MsRUFBRUcsT0FFSHlCLFNBQVN4QixLQUFLLFdBQ3ZCeUMsRUFBV0QsRUFBU2hCLFVBRXBCaUIsRUFBVzNELEVBQUdjLEVBQUVHLE1BQU04QyxLQUFLLHVGQUF1RnJCLFVBR3pHcEIsS0FBSyxnQkFBaUIsU0FHbkNzQyxFQUFVcEMsRUFBTWpCLE9BQU95RCxHQUFHRixHQUUxQkgsRUFBU3pDLEtBQUssU0FBVTBDLEdBQ3hCRCxFQUFTekMsS0FBSyxVQUFXd0MsR0FDekJFLEVBQVExQyxLQUFLLFVBQVd5QyxHQUN4QkQsRUFBU3hDLEtBQUssVUFBV3lDLEtBRzdCMUMsS0FBS1EsUUFBUWdDLFFBQVEsc0JBQXVCLENBQUN4QyxPQUV6Q00sR0FBUU4sS0FBS0ksUUFBUW5CLFdBQ3JCZSxLQUFLWSxXQUFXWixLQUFLVixPQUFPeUQsR0FBRyxHQUFHOUMsS0FBSyxZQUFZLEdBQU8sTUE4Qi9EbEIsRUFBR21CIiwiZmlsZSI6ImNvbXBvbmVudHMvYWNjb3JkaW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIFVJa2l0IDIuMjcuMiB8IGh0dHA6Ly93d3cuZ2V0dWlraXQuY29tIHwgKGMpIDIwMTQgWU9PdGhlbWUgfCBNSVQgTGljZW5zZSAqL1xyXG4oZnVuY3Rpb24oYWRkb24pIHtcclxuICAgIHZhciBjb21wb25lbnQ7XHJcblxyXG4gICAgaWYgKHdpbmRvdy5VSWtpdDIpIHtcclxuICAgICAgICBjb21wb25lbnQgPSBhZGRvbihVSWtpdDIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIGRlZmluZSgndWlraXQtYWNjb3JkaW9uJywgWyd1aWtpdCddLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gY29tcG9uZW50IHx8IGFkZG9uKFVJa2l0Mik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pKGZ1bmN0aW9uKFVJKXtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBVSS5jb21wb25lbnQoJ2FjY29yZGlvbicsIHtcclxuXHJcbiAgICAgICAgZGVmYXVsdHM6IHtcclxuICAgICAgICAgICAgc2hvd2ZpcnN0ICA6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbGxhcHNlICAgOiB0cnVlLFxyXG4gICAgICAgICAgICBhbmltYXRlICAgIDogdHJ1ZSxcclxuICAgICAgICAgICAgZWFzaW5nICAgICA6ICdzd2luZycsXHJcbiAgICAgICAgICAgIGR1cmF0aW9uICAgOiAzMDAsXHJcbiAgICAgICAgICAgIHRvZ2dsZSAgICAgOiAnLnVrLWFjY29yZGlvbi10aXRsZScsXHJcbiAgICAgICAgICAgIGNvbnRhaW5lcnMgOiAnLnVrLWFjY29yZGlvbi1jb250ZW50JyxcclxuICAgICAgICAgICAgY2xzYWN0aXZlICA6ICd1ay1hY3RpdmUnXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYm9vdDogIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gaW5pdCBjb2RlXHJcbiAgICAgICAgICAgIFVJLnJlYWR5KGZ1bmN0aW9uKGNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFVJLiQoJ1tkYXRhLXVrLWFjY29yZGlvbl0nLCBjb250ZXh0KS5lYWNoKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gVUkuJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWxlLmRhdGEoJ2FjY29yZGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVSS5hY2NvcmRpb24oZWxlLCBVSS5VdGlscy5vcHRpb25zKGVsZS5hdHRyKCdkYXRhLXVrLWFjY29yZGlvbicpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lm9uKCdjbGljay51ay5hY2NvcmRpb24nLCB0aGlzLm9wdGlvbnMudG9nZ2xlLCBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICR0aGlzLnRvZ2dsZUl0ZW0oVUkuJCh0aGlzKS5kYXRhKCd3cmFwcGVyJyksICR0aGlzLm9wdGlvbnMuYW5pbWF0ZSwgJHRoaXMub3B0aW9ucy5jb2xsYXBzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICBVSS5kb21PYnNlcnZlKHRoaXMuZWxlbWVudCwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oJHRoaXMub3B0aW9ucy5jb250YWluZXJzKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy51cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgdG9nZ2xlSXRlbTogZnVuY3Rpb24od3JhcHBlciwgYW5pbWF0ZWQsIGNvbGxhcHNlKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgd3JhcHBlci5kYXRhKCd0b2dnbGUnKS50b2dnbGVDbGFzcyh0aGlzLm9wdGlvbnMuY2xzYWN0aXZlKTtcclxuICAgICAgICAgICAgd3JhcHBlci5kYXRhKCdjb250ZW50JykudG9nZ2xlQ2xhc3ModGhpcy5vcHRpb25zLmNsc2FjdGl2ZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYWN0aXZlID0gd3JhcHBlci5kYXRhKCd0b2dnbGUnKS5oYXNDbGFzcyh0aGlzLm9wdGlvbnMuY2xzYWN0aXZlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb2xsYXBzZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGUubm90KHdyYXBwZXIuZGF0YSgndG9nZ2xlJykpLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5jbHNhY3RpdmUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50Lm5vdCh3cmFwcGVyLmRhdGEoJ2NvbnRlbnQnKSkucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmNsc2FjdGl2ZSlcclxuICAgICAgICAgICAgICAgICAgICAucGFyZW50KCkuc3RvcCgpLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJykuYW5pbWF0ZSh7IGhlaWdodDogMCB9LCB7ZWFzaW5nOiB0aGlzLm9wdGlvbnMuZWFzaW5nLCBkdXJhdGlvbjogYW5pbWF0ZWQgPyB0aGlzLm9wdGlvbnMuZHVyYXRpb24gOiAwfSkuYXR0cignYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB3cmFwcGVyLnN0b3AoKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFuaW1hdGVkKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgd3JhcHBlci5hbmltYXRlKHsgaGVpZ2h0OiBhY3RpdmUgPyBnZXRIZWlnaHQod3JhcHBlci5kYXRhKCdjb250ZW50JykpIDogMCB9LCB7ZWFzaW5nOiB0aGlzLm9wdGlvbnMuZWFzaW5nLCBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmR1cmF0aW9uLCBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5jc3MoeydvdmVyZmxvdyc6ICcnLCAnaGVpZ2h0JzogJ2F1dG8nfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFVJLlV0aWxzLmNoZWNrRGlzcGxheSh3cmFwcGVyLmRhdGEoJ2NvbnRlbnQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy50cmlnZ2VyKCdkaXNwbGF5LnVrLmNoZWNrJyk7XHJcbiAgICAgICAgICAgICAgICB9fSk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIHdyYXBwZXIuaGVpZ2h0KGFjdGl2ZSA/ICdhdXRvJyA6IDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmNzcyh7J292ZXJmbG93JzogJyd9KTtcclxuICAgICAgICAgICAgICAgICAgICBVSS5VdGlscy5jaGVja0Rpc3BsYXkod3JhcHBlci5kYXRhKCdjb250ZW50JykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZGlzcGxheS51ay5jaGVjaycpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgQVJJQVxyXG4gICAgICAgICAgICB3cmFwcGVyLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBhY3RpdmUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoJ3RvZ2dsZS51ay5hY2NvcmRpb24nLCBbYWN0aXZlLCB3cmFwcGVyLmRhdGEoJ3RvZ2dsZScpLCB3cmFwcGVyLmRhdGEoJ2NvbnRlbnQnKV0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oaW5pdCkge1xyXG5cclxuICAgICAgICAgICAgdmFyICR0aGlzID0gdGhpcywgJGNvbnRlbnQsICR3cmFwcGVyLCAkdG9nZ2xlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50b2dnbGUgPSB0aGlzLmZpbmQodGhpcy5vcHRpb25zLnRvZ2dsZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudCA9IHRoaXMuZmluZCh0aGlzLm9wdGlvbnMuY29udGFpbmVycyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuZWFjaChmdW5jdGlvbihpbmRleCkge1xyXG5cclxuICAgICAgICAgICAgICAgICRjb250ZW50ID0gVUkuJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoJGNvbnRlbnQucGFyZW50KCkuZGF0YSgnd3JhcHBlcicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHdyYXBwZXIgPSAkY29udGVudC5wYXJlbnQoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHdyYXBwZXIgPSBVSS4kKHRoaXMpLndyYXAoJzxkaXYgZGF0YS13cmFwcGVyPVwidHJ1ZVwiIHN0eWxlPVwib3ZlcmZsb3c6aGlkZGVuO2hlaWdodDowO3Bvc2l0aW9uOnJlbGF0aXZlO1wiPjwvZGl2PicpLnBhcmVudCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJbml0IEFSSUFcclxuICAgICAgICAgICAgICAgICAgICAkd3JhcHBlci5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJHRvZ2dsZSA9ICR0aGlzLnRvZ2dsZS5lcShpbmRleCk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHdyYXBwZXIuZGF0YSgndG9nZ2xlJywgJHRvZ2dsZSk7XHJcbiAgICAgICAgICAgICAgICAkd3JhcHBlci5kYXRhKCdjb250ZW50JywgJGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgJHRvZ2dsZS5kYXRhKCd3cmFwcGVyJywgJHdyYXBwZXIpO1xyXG4gICAgICAgICAgICAgICAgJGNvbnRlbnQuZGF0YSgnd3JhcHBlcicsICR3cmFwcGVyKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQudHJpZ2dlcigndXBkYXRlLnVrLmFjY29yZGlvbicsIFt0aGlzXSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5pdCAmJiB0aGlzLm9wdGlvbnMuc2hvd2ZpcnN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUl0ZW0odGhpcy50b2dnbGUuZXEoMCkuZGF0YSgnd3JhcHBlcicpLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGhlbHBlclxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEhlaWdodChlbGUpIHtcclxuXHJcbiAgICAgICAgdmFyICRlbGUgPSBVSS4kKGVsZSksIGhlaWdodCA9IFwiYXV0b1wiO1xyXG5cclxuICAgICAgICBpZiAoJGVsZS5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgICAgIGhlaWdodCA9ICRlbGUub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgdmFyIHRtcCA9IHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uICAgOiAkZWxlLmNzcygncG9zaXRpb24nKSxcclxuICAgICAgICAgICAgICAgIHZpc2liaWxpdHkgOiAkZWxlLmNzcygndmlzaWJpbGl0eScpLFxyXG4gICAgICAgICAgICAgICAgZGlzcGxheSAgICA6ICRlbGUuY3NzKCdkaXNwbGF5JylcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGhlaWdodCA9ICRlbGUuY3NzKHtwb3NpdGlvbjogJ2Fic29sdXRlJywgdmlzaWJpbGl0eTogJ2hpZGRlbicsIGRpc3BsYXk6ICdibG9jayd9KS5vdXRlckhlaWdodCgpO1xyXG5cclxuICAgICAgICAgICAgJGVsZS5jc3ModG1wKTsgLy8gcmVzZXQgZWxlbWVudFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gVUkuYWNjb3JkaW9uO1xyXG59KTsiXX0=
