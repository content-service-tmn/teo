!function(t){var e;window.UIkit2&&(e=t(UIkit2)),"function"==typeof define&&define.amd&&define("uikit-notify",["uikit"],function(){return e||t(UIkit2)})}(function(e){"use strict";var s={},o={},t=function(t){return"string"==e.$.type(t)&&(t={message:t}),arguments[1]&&(t=e.$.extend(t,"string"==e.$.type(arguments[1])?{status:arguments[1]}:arguments[1])),new i(t).show()},i=function(t){this.options=e.$.extend({},i.defaults,t),this.uuid=e.Utils.uid("notifymsg"),this.element=e.$(['<div class="uk-notify-message">','<a class="uk-close"></a>',"<div></div>","</div>"].join("")).data("notifyMessage",this),this.content(this.options.message),this.options.status&&(this.element.addClass("uk-notify-message-"+this.options.status),this.currentstatus=this.options.status),this.group=this.options.group,o[this.uuid]=this,s[this.options.pos]||(s[this.options.pos]=e.$('<div class="uk-notify uk-notify-'+this.options.pos+'"></div>').appendTo("body").on("click",".uk-notify-message",function(){var t=e.$(this).data("notifyMessage");t.element.trigger("manualclose.uk.notify",[t]),t.close()}))};return e.$.extend(i.prototype,{uuid:!1,element:!1,timout:!1,currentstatus:"",group:!1,show:function(){if(!this.element.is(":visible")){var e=this;s[this.options.pos].show().prepend(this.element);var t=parseInt(this.element.css("margin-bottom"),10);return this.element.css({opacity:0,marginTop:-1*this.element.outerHeight(),marginBottom:0}).animate({opacity:1,marginTop:0,marginBottom:t},function(){if(e.options.timeout){var t=function(){e.close()};e.timeout=setTimeout(t,e.options.timeout),e.element.hover(function(){clearTimeout(e.timeout)},function(){e.timeout=setTimeout(t,e.options.timeout)})}}),this}},close:function(t){var e=this,i=function(){e.element.remove(),s[e.options.pos].children().length||s[e.options.pos].hide(),e.options.onClose.apply(e,[]),e.element.trigger("close.uk.notify",[e]),delete o[e.uuid]};this.timeout&&clearTimeout(this.timeout),t?i():this.element.animate({opacity:0,marginTop:-1*this.element.outerHeight(),marginBottom:0},function(){i()})},content:function(t){var e=this.element.find(">div");return t?(e.html(t),this):e.html()},status:function(t){return t?(this.element.removeClass("uk-notify-message-"+this.currentstatus).addClass("uk-notify-message-"+t),this.currentstatus=t,this):this.currentstatus}}),i.defaults={message:"",status:"",timeout:5e3,group:null,pos:"top-center",onClose:function(){}},e.notify=t,e.notify.message=i,e.notify.closeAll=function(t,e){var i;if(t)for(i in o)t===o[i].group&&o[i].close(e);else for(i in o)o[i].close(e)},t});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvbm90aWZ5LmpzIl0sIm5hbWVzIjpbImFkZG9uIiwiY29tcG9uZW50Iiwid2luZG93IiwiVUlraXQyIiwiZGVmaW5lIiwiYW1kIiwiVUkiLCJjb250YWluZXJzIiwibWVzc2FnZXMiLCJub3RpZnkiLCJvcHRpb25zIiwiJCIsInR5cGUiLCJtZXNzYWdlIiwiYXJndW1lbnRzIiwiZXh0ZW5kIiwic3RhdHVzIiwiTWVzc2FnZSIsInNob3ciLCJ0aGlzIiwiZGVmYXVsdHMiLCJ1dWlkIiwiVXRpbHMiLCJ1aWQiLCJlbGVtZW50Iiwiam9pbiIsImRhdGEiLCJjb250ZW50IiwiYWRkQ2xhc3MiLCJjdXJyZW50c3RhdHVzIiwiZ3JvdXAiLCJwb3MiLCJhcHBlbmRUbyIsIm9uIiwidHJpZ2dlciIsImNsb3NlIiwicHJvdG90eXBlIiwidGltb3V0IiwiaXMiLCIkdGhpcyIsInByZXBlbmQiLCJtYXJnaW5ib3R0b20iLCJwYXJzZUludCIsImNzcyIsIm9wYWNpdHkiLCJtYXJnaW5Ub3AiLCJvdXRlckhlaWdodCIsIm1hcmdpbkJvdHRvbSIsImFuaW1hdGUiLCJ0aW1lb3V0IiwiY2xvc2VmbiIsInNldFRpbWVvdXQiLCJob3ZlciIsImNsZWFyVGltZW91dCIsImluc3RhbnRseSIsImZpbmFsaXplIiwicmVtb3ZlIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJoaWRlIiwib25DbG9zZSIsImFwcGx5IiwiaHRtbCIsImNvbnRhaW5lciIsImZpbmQiLCJyZW1vdmVDbGFzcyIsImNsb3NlQWxsIiwiaWQiXSwibWFwcGluZ3MiOiJDQUNBLFNBQVVBLEdBRU4sSUFBSUMsRUFFQUMsT0FBT0MsU0FDUEYsRUFBWUQsRUFBTUcsU0FHRCxtQkFBVkMsUUFBd0JBLE9BQU9DLEtBQ3RDRCxPQUFPLGVBQWdCLENBQUMsU0FBVSxXQUM5QixPQUFPSCxHQUFhRCxFQUFNRyxVQVZ0QyxDQWNHLFNBQVNHLEdBRVIsYUFFQSxJQUFJQyxFQUFhLEdBQ2JDLEVBQWEsR0FFYkMsRUFB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NUIsUUFBUyxTQUFTbUMsR0FFZCxJQUFJQyxFQUFZNUMsS0FBS0ssUUFBUXdDLEtBQUssUUFFbEMsT0FBSUYsR0FJSkMsRUFBVUQsS0FBS0EsR0FFUjNDLE1BTEk0QyxFQUFVRCxRQVF6QjlDLE9BQVEsU0FBU0EsR0FFYixPQUFLQSxHQUlMRyxLQUFLSyxRQUFReUMsWUFBWSxxQkFBcUI5QyxLQUFLVSxlQUFlRCxTQUFTLHFCQUFxQlosR0FFaEdHLEtBQUtVLGNBQWdCYixFQUVkRyxNQVBJQSxLQUFLVSxpQkFXeEJaLEVBQVFHLFNBQVcsQ0FDZlAsUUFBUyxHQUNURyxPQUFRLEdBQ1JpQyxRQUFTLElBQ1RuQixNQUFPLEtBQ1BDLElBQUssYUFDTDZCLFFBQVMsY0FHYnRELEVBQUdHLE9BQWtCQSxFQUNyQkgsRUFBR0csT0FBT0ksUUFBV0ksRUFDckJYLEVBQUdHLE9BQU95RCxTQXZKTSxTQUFTcEMsRUFBT3dCLEdBRXhCLElBQUlhLEVBRUosR0FBSXJDLEVBQ0EsSUFBSXFDLEtBQU0zRCxFQUFlc0IsSUFBUXRCLEVBQVMyRCxHQUFJckMsT0FBT3RCLEVBQVMyRCxHQUFJaEMsTUFBTW1CLFFBRXhFLElBQUlhLEtBQU0zRCxFQUFZQSxFQUFTMkQsR0FBSWhDLE1BQU1tQixJQWtKOUM3QyIsImZpbGUiOiJjb21wb25lbnRzL25vdGlmeS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBVSWtpdCAyLjI3LjIgfCBodHRwOi8vd3d3LmdldHVpa2l0LmNvbSB8IChjKSAyMDE0IFlPT3RoZW1lIHwgTUlUIExpY2Vuc2UgKi9cclxuKGZ1bmN0aW9uKGFkZG9uKSB7XHJcblxyXG4gICAgdmFyIGNvbXBvbmVudDtcclxuXHJcbiAgICBpZiAod2luZG93LlVJa2l0Mikge1xyXG4gICAgICAgIGNvbXBvbmVudCA9IGFkZG9uKFVJa2l0Mik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAgICAgZGVmaW5lKCd1aWtpdC1ub3RpZnknLCBbJ3Vpa2l0J10sIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQgfHwgYWRkb24oVUlraXQyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn0pKGZ1bmN0aW9uKFVJKXtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgY29udGFpbmVycyA9IHt9LFxyXG4gICAgICAgIG1lc3NhZ2VzICAgPSB7fSxcclxuXHJcbiAgICAgICAgbm90aWZ5ICAgICA9ICBmdW5jdGlvbihvcHRpb25zKXtcclxuXHJcbiAgICAgICAgICAgIGlmIChVSS4kLnR5cGUob3B0aW9ucykgPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7IG1lc3NhZ2U6IG9wdGlvbnMgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50c1sxXSkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IFVJLiQuZXh0ZW5kKG9wdGlvbnMsIFVJLiQudHlwZShhcmd1bWVudHNbMV0pID09ICdzdHJpbmcnID8ge3N0YXR1czphcmd1bWVudHNbMV19IDogYXJndW1lbnRzWzFdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChuZXcgTWVzc2FnZShvcHRpb25zKSkuc2hvdygpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xvc2VBbGwgID0gZnVuY3Rpb24oZ3JvdXAsIGluc3RhbnRseSl7XHJcblxyXG4gICAgICAgICAgICB2YXIgaWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgIGZvcihpZCBpbiBtZXNzYWdlcykgeyBpZihncm91cD09PW1lc3NhZ2VzW2lkXS5ncm91cCkgbWVzc2FnZXNbaWRdLmNsb3NlKGluc3RhbnRseSk7IH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvcihpZCBpbiBtZXNzYWdlcykgeyBtZXNzYWdlc1tpZF0uY2xvc2UoaW5zdGFudGx5KTsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB2YXIgTWVzc2FnZSA9IGZ1bmN0aW9uKG9wdGlvbnMpe1xyXG5cclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBVSS4kLmV4dGVuZCh7fSwgTWVzc2FnZS5kZWZhdWx0cywgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHRoaXMudXVpZCAgICA9IFVJLlV0aWxzLnVpZCgnbm90aWZ5bXNnJyk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gVUkuJChbXHJcblxyXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cInVrLW5vdGlmeS1tZXNzYWdlXCI+JyxcclxuICAgICAgICAgICAgICAgICc8YSBjbGFzcz1cInVrLWNsb3NlXCI+PC9hPicsXHJcbiAgICAgICAgICAgICAgICAnPGRpdj48L2Rpdj4nLFxyXG4gICAgICAgICAgICAnPC9kaXY+J1xyXG5cclxuICAgICAgICBdLmpvaW4oJycpKS5kYXRhKFwibm90aWZ5TWVzc2FnZVwiLCB0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250ZW50KHRoaXMub3B0aW9ucy5tZXNzYWdlKTtcclxuXHJcbiAgICAgICAgLy8gc3RhdHVzXHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zdGF0dXMpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZENsYXNzKCd1ay1ub3RpZnktbWVzc2FnZS0nK3RoaXMub3B0aW9ucy5zdGF0dXMpO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRzdGF0dXMgPSB0aGlzLm9wdGlvbnMuc3RhdHVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5ncm91cCA9IHRoaXMub3B0aW9ucy5ncm91cDtcclxuXHJcbiAgICAgICAgbWVzc2FnZXNbdGhpcy51dWlkXSA9IHRoaXM7XHJcblxyXG4gICAgICAgIGlmKCFjb250YWluZXJzW3RoaXMub3B0aW9ucy5wb3NdKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lcnNbdGhpcy5vcHRpb25zLnBvc10gPSBVSS4kKCc8ZGl2IGNsYXNzPVwidWstbm90aWZ5IHVrLW5vdGlmeS0nK3RoaXMub3B0aW9ucy5wb3MrJ1wiPjwvZGl2PicpLmFwcGVuZFRvKCdib2R5Jykub24oXCJjbGlja1wiLCBcIi51ay1ub3RpZnktbWVzc2FnZVwiLCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gVUkuJCh0aGlzKS5kYXRhKCdub3RpZnlNZXNzYWdlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZS5lbGVtZW50LnRyaWdnZXIoJ21hbnVhbGNsb3NlLnVrLm5vdGlmeScsIFttZXNzYWdlXSk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG5cclxuICAgIFVJLiQuZXh0ZW5kKE1lc3NhZ2UucHJvdG90eXBlLCB7XHJcblxyXG4gICAgICAgIHV1aWQ6IGZhbHNlLFxyXG4gICAgICAgIGVsZW1lbnQ6IGZhbHNlLFxyXG4gICAgICAgIHRpbW91dDogZmFsc2UsXHJcbiAgICAgICAgY3VycmVudHN0YXR1czogXCJcIixcclxuICAgICAgICBncm91cDogZmFsc2UsXHJcblxyXG4gICAgICAgIHNob3c6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5pcygnOnZpc2libGUnKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmFyICR0aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIGNvbnRhaW5lcnNbdGhpcy5vcHRpb25zLnBvc10uc2hvdygpLnByZXBlbmQodGhpcy5lbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtYXJnaW5ib3R0b20gPSBwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKCdtYXJnaW4tYm90dG9tJyksIDEwKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jc3Moe29wYWNpdHk6MCwgbWFyZ2luVG9wOiAtMSp0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSwgbWFyZ2luQm90dG9tOjB9KS5hbmltYXRlKHtvcGFjaXR5OjEsIG1hcmdpblRvcDowLCBtYXJnaW5Cb3R0b206bWFyZ2luYm90dG9tfSwgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMub3B0aW9ucy50aW1lb3V0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbG9zZWZuID0gZnVuY3Rpb24oKXsgJHRoaXMuY2xvc2UoKTsgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoY2xvc2VmbiwgJHRoaXMub3B0aW9ucy50aW1lb3V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZWxlbWVudC5ob3ZlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7IGNsZWFyVGltZW91dCgkdGhpcy50aW1lb3V0KTsgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7ICR0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGNsb3NlZm4sICR0aGlzLm9wdGlvbnMudGltZW91dCk7ICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY2xvc2U6IGZ1bmN0aW9uKGluc3RhbnRseSkge1xyXG5cclxuICAgICAgICAgICAgdmFyICR0aGlzICAgID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGZpbmFsaXplID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRhaW5lcnNbJHRoaXMub3B0aW9ucy5wb3NdLmNoaWxkcmVuKCkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcnNbJHRoaXMub3B0aW9ucy5wb3NdLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLm9wdGlvbnMub25DbG9zZS5hcHBseSgkdGhpcywgW10pO1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmVsZW1lbnQudHJpZ2dlcignY2xvc2UudWsubm90aWZ5JywgWyR0aGlzXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtZXNzYWdlc1skdGhpcy51dWlkXTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy50aW1lb3V0KSBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbnN0YW50bHkpIHtcclxuICAgICAgICAgICAgICAgIGZpbmFsaXplKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYW5pbWF0ZSh7b3BhY2l0eTowLCBtYXJnaW5Ub3A6IC0xKiB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSwgbWFyZ2luQm90dG9tOjB9LCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNvbnRlbnQ6IGZ1bmN0aW9uKGh0bWwpe1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudC5maW5kKFwiPmRpdlwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmKCFodG1sKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGFpbmVyLmh0bWwoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29udGFpbmVyLmh0bWwoaHRtbCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzdGF0dXM6IGZ1bmN0aW9uKHN0YXR1cykge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRzdGF0dXM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygndWstbm90aWZ5LW1lc3NhZ2UtJyt0aGlzLmN1cnJlbnRzdGF0dXMpLmFkZENsYXNzKCd1ay1ub3RpZnktbWVzc2FnZS0nK3N0YXR1cyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRzdGF0dXMgPSBzdGF0dXM7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBNZXNzYWdlLmRlZmF1bHRzID0ge1xyXG4gICAgICAgIG1lc3NhZ2U6IFwiXCIsXHJcbiAgICAgICAgc3RhdHVzOiBcIlwiLFxyXG4gICAgICAgIHRpbWVvdXQ6IDUwMDAsXHJcbiAgICAgICAgZ3JvdXA6IG51bGwsXHJcbiAgICAgICAgcG9zOiAndG9wLWNlbnRlcicsXHJcbiAgICAgICAgb25DbG9zZTogZnVuY3Rpb24oKSB7fVxyXG4gICAgfTtcclxuXHJcbiAgICBVSS5ub3RpZnkgICAgICAgICAgPSBub3RpZnk7XHJcbiAgICBVSS5ub3RpZnkubWVzc2FnZSAgPSBNZXNzYWdlO1xyXG4gICAgVUkubm90aWZ5LmNsb3NlQWxsID0gY2xvc2VBbGw7XHJcblxyXG4gICAgcmV0dXJuIG5vdGlmeTtcclxufSk7Il19
