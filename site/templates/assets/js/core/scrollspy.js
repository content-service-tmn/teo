!function(p){"use strict";var f=p.$win,t=p.$doc,s=[],o=function(){for(var t=0;t<s.length;t++)window.requestAnimationFrame.apply(window,[s[t].check])};p.component("scrollspy",{defaults:{target:!1,cls:"uk-scrollspy-inview",initcls:"uk-scrollspy-init-inview",topoffset:0,leftoffset:0,repeat:!1,delay:0},boot:function(){t.on("scrolling.uk.document",o),f.on("load resize orientationchange",p.Utils.debounce(o,50)),p.ready(function(t){p.$("[data-uk-scrollspy]",t).each(function(){var t=p.$(this);if(!t.data("scrollspy"))p.scrollspy(t,p.Utils.options(t.attr("data-uk-scrollspy")))})})},init:function(){var a,r=this,c=this.options.cls.split(/,/),t=function(){var t=r.options.target?r.element.find(r.options.target):r.element,l=1===t.length?1:0,n=0;t.each(function(t){var s=p.$(this),o=s.data("inviewstate"),i=p.Utils.isInView(s,r.options),e=s.data("ukScrollspyCls")||c[n].trim();!i||o||s.data("scrollspy-idle")||(a||(s.addClass(r.options.initcls),r.offset=s.offset(),a=!0,s.trigger("init.uk.scrollspy")),s.data("scrollspy-idle",setTimeout(function(){s.addClass("uk-scrollspy-inview").toggleClass(e).width(),s.trigger("inview.uk.scrollspy"),s.data("scrollspy-idle",!1),s.data("inviewstate",!0)},r.options.delay*l)),l++),!i&&o&&r.options.repeat&&(s.data("scrollspy-idle")&&(clearTimeout(s.data("scrollspy-idle")),s.data("scrollspy-idle",!1)),s.removeClass("uk-scrollspy-inview").toggleClass(e),s.data("inviewstate",!1),s.trigger("outview.uk.scrollspy")),n=c[n+1]?n+1:0})};t(),this.check=t,s.push(this)}});var i=[],e=function(){for(var t=0;t<i.length;t++)window.requestAnimationFrame.apply(window,[i[t].check])};p.component("scrollspynav",{defaults:{cls:"uk-active",closest:!1,topoffset:0,leftoffset:0,smoothscroll:!1},boot:function(){t.on("scrolling.uk.document",e),f.on("resize orientationchange",p.Utils.debounce(e,50)),p.ready(function(t){p.$("[data-uk-scrollspy-nav]",t).each(function(){var t=p.$(this);if(!t.data("scrollspynav"))p.scrollspynav(t,p.Utils.options(t.attr("data-uk-scrollspy-nav")))})})},init:function(){var e,t=[],l=this.find("a[href^='#']").each(function(){"#"!==this.getAttribute("href").trim()&&t.push(this.getAttribute("href"))}),n=p.$(t.join(",")),a=this.options.cls,r=this.options.closest||this.options.closest,c=this,s=function(){e=[];for(var t=0;t<n.length;t++)p.Utils.isInView(n.eq(t),c.options)&&e.push(n.eq(t));if(e.length){var s,o=f.scrollTop(),i=function(){for(var t=0;t<e.length;t++)if(e[t].offset().top-c.options.topoffset>=o)return e[t]}();if(!i)return;c.options.closest?(l.blur().closest(r).removeClass(a),s=l.filter("a[href='#"+i.attr("id")+"']").closest(r).addClass(a)):s=l.removeClass(a).filter("a[href='#"+i.attr("id")+"']").addClass(a),c.element.trigger("inview.uk.scrollspynav",[i,s])}};this.options.smoothscroll&&p.smoothScroll&&l.each(function(){p.smoothScroll(this,c.options.smoothscroll)}),s(),this.element.data("scrollspynav",this),this.check=s,i.push(this)}})}(UIkit2);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvc2Nyb2xsc3B5LmpzIl0sIm5hbWVzIjpbIlVJIiwiJHdpbiIsIiRkb2MiLCJzY3JvbGxzcGllcyIsImNoZWNrU2Nyb2xsU3B5IiwiaSIsImxlbmd0aCIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImFwcGx5IiwiY2hlY2siLCJjb21wb25lbnQiLCJkZWZhdWx0cyIsInRhcmdldCIsImNscyIsImluaXRjbHMiLCJ0b3BvZmZzZXQiLCJsZWZ0b2Zmc2V0IiwicmVwZWF0IiwiZGVsYXkiLCJib290Iiwib24iLCJVdGlscyIsImRlYm91bmNlIiwicmVhZHkiLCJjb250ZXh0IiwiJCIsImVhY2giLCJlbGVtZW50IiwidGhpcyIsImRhdGEiLCJzY3JvbGxzcHkiLCJvcHRpb25zIiwiYXR0ciIsImluaXQiLCJpbml0aW52aWV3IiwiJHRoaXMiLCJ0b2dnbGVjbHMiLCJzcGxpdCIsImZuIiwiZWxlbWVudHMiLCJmaW5kIiwiZGVsYXlJZHgiLCJ0b2dnbGVjbHNJZHgiLCJpZHgiLCJpbnZpZXdzdGF0ZSIsImludmlldyIsImlzSW5WaWV3IiwidG9nZ2xlIiwidHJpbSIsImFkZENsYXNzIiwib2Zmc2V0IiwidHJpZ2dlciIsInNldFRpbWVvdXQiLCJ0b2dnbGVDbGFzcyIsIndpZHRoIiwiY2xlYXJUaW1lb3V0IiwicmVtb3ZlQ2xhc3MiLCJwdXNoIiwic2Nyb2xsc3B5bmF2cyIsImNoZWNrU2Nyb2xsU3B5TmF2cyIsImNsb3Nlc3QiLCJzbW9vdGhzY3JvbGwiLCJzY3JvbGxzcHluYXYiLCJpbnZpZXdzIiwiaWRzIiwibGlua3MiLCJnZXRBdHRyaWJ1dGUiLCJ0YXJnZXRzIiwiam9pbiIsImNsc0FjdGl2ZSIsImNsc0Nsb3Nlc3QiLCJlcSIsIm5hdml0ZW1zIiwic2Nyb2xsVG9wIiwidG9wIiwiYmx1ciIsImZpbHRlciIsInNtb290aFNjcm9sbCIsIlVJa2l0MiJdLCJtYXBwaW5ncyI6IkNBQ0EsU0FBVUEsR0FFTixhQUVBLElBQUlDLEVBQWlC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QVlhLEdBQzdDRyxFQUFXUCxFQUFNVyxPQUFPLFlBQVloRSxFQUFPb0IsS0FBSyxNQUFNLE1BQU00QixRQUFRVSxHQUFZckIsU0FBU29CLElBRXpGRyxFQUFXUCxFQUFNVCxZQUFZYSxHQUFXTyxPQUFPLFlBQVloRSxFQUFPb0IsS0FBSyxNQUFNLE1BQU1pQixTQUFTb0IsR0FHaEdsQyxFQUFNUixRQUFRd0IsUUFBUSx5QkFBMEIsQ0FBQ3ZDLEVBQVE0RCxNQUk3RDVDLEtBQUtHLFFBQVE4QixjQUFnQjlELEVBQUc4RSxjQUNoQ1osRUFBTXZDLEtBQUssV0FDUDNCLEVBQUc4RSxhQUFhakQsS0FBTU8sRUFBTUosUUFBUThCLGdCQUk1Q3ZCLElBRUFWLEtBQUtELFFBQVFFLEtBQUssZUFBZ0JELE1BRWxDQSxLQUFLbkIsTUFBUTZCLEVBQ2JvQixFQUFjRCxLQUFLN0IsU0ExTS9CLENBK01Ha0QiLCJmaWxlIjoiY29yZS9zY3JvbGxzcHkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgVUlraXQgMi4yNy4yIHwgaHR0cDovL3d3dy5nZXR1aWtpdC5jb20gfCAoYykgMjAxNCBZT090aGVtZSB8IE1JVCBMaWNlbnNlICovXG4oZnVuY3Rpb24oVUkpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyICR3aW4gICAgICAgICAgID0gVUkuJHdpbixcbiAgICAgICAgJGRvYyAgICAgICAgICAgPSBVSS4kZG9jLFxuICAgICAgICBzY3JvbGxzcGllcyAgICA9IFtdLFxuICAgICAgICBjaGVja1Njcm9sbFNweSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBzY3JvbGxzcGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYXBwbHkod2luZG93LCBbc2Nyb2xsc3BpZXNbaV0uY2hlY2tdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgIFVJLmNvbXBvbmVudCgnc2Nyb2xsc3B5Jywge1xuXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICB0YXJnZXQgICAgIDogZmFsc2UsXG4gICAgICAgICAgICBjbHMgICAgICAgIDogJ3VrLXNjcm9sbHNweS1pbnZpZXcnLFxuICAgICAgICAgICAgaW5pdGNscyAgICA6ICd1ay1zY3JvbGxzcHktaW5pdC1pbnZpZXcnLFxuICAgICAgICAgICAgdG9wb2Zmc2V0ICA6IDAsXG4gICAgICAgICAgICBsZWZ0b2Zmc2V0IDogMCxcbiAgICAgICAgICAgIHJlcGVhdCAgICAgOiBmYWxzZSxcbiAgICAgICAgICAgIGRlbGF5ICAgICAgOiAwXG4gICAgICAgIH0sXG5cbiAgICAgICAgYm9vdDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8vIGxpc3RlbiB0byBzY3JvbGwgYW5kIHJlc2l6ZVxuICAgICAgICAgICAgJGRvYy5vbignc2Nyb2xsaW5nLnVrLmRvY3VtZW50JywgY2hlY2tTY3JvbGxTcHkpO1xuICAgICAgICAgICAgJHdpbi5vbignbG9hZCByZXNpemUgb3JpZW50YXRpb25jaGFuZ2UnLCBVSS5VdGlscy5kZWJvdW5jZShjaGVja1Njcm9sbFNweSwgNTApKTtcblxuICAgICAgICAgICAgLy8gaW5pdCBjb2RlXG4gICAgICAgICAgICBVSS5yZWFkeShmdW5jdGlvbihjb250ZXh0KSB7XG5cbiAgICAgICAgICAgICAgICBVSS4kKCdbZGF0YS11ay1zY3JvbGxzcHldJywgY29udGV4dCkuZWFjaChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IFVJLiQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50LmRhdGEoJ3Njcm9sbHNweScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gVUkuc2Nyb2xsc3B5KGVsZW1lbnQsIFVJLlV0aWxzLm9wdGlvbnMoZWxlbWVudC5hdHRyKCdkYXRhLXVrLXNjcm9sbHNweScpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzLCBpbnZpZXdzdGF0ZSwgaW5pdGludmlldywgdG9nZ2xlY2xzID0gdGhpcy5vcHRpb25zLmNscy5zcGxpdCgvLC8pLCBmbiA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHMgICAgID0gJHRoaXMub3B0aW9ucy50YXJnZXQgPyAkdGhpcy5lbGVtZW50LmZpbmQoJHRoaXMub3B0aW9ucy50YXJnZXQpIDogJHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgZGVsYXlJZHggICAgID0gZWxlbWVudHMubGVuZ3RoID09PSAxID8gMSA6IDAsXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZWNsc0lkeCA9IDA7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50cy5lYWNoKGZ1bmN0aW9uKGlkeCl7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgICAgID0gVUkuJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmlld3N0YXRlID0gZWxlbWVudC5kYXRhKCdpbnZpZXdzdGF0ZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW52aWV3ICAgICAgPSBVSS5VdGlscy5pc0luVmlldyhlbGVtZW50LCAkdGhpcy5vcHRpb25zKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZSAgICAgID0gZWxlbWVudC5kYXRhKCd1a1Njcm9sbHNweUNscycpIHx8IHRvZ2dsZWNsc1t0b2dnbGVjbHNJZHhdLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaW52aWV3ICYmICFpbnZpZXdzdGF0ZSAmJiAhZWxlbWVudC5kYXRhKCdzY3JvbGxzcHktaWRsZScpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW5pdGludmlldykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJHRoaXMub3B0aW9ucy5pbml0Y2xzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5vZmZzZXQgPSBlbGVtZW50Lm9mZnNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpbnZpZXcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC50cmlnZ2VyKCdpbml0LnVrLnNjcm9sbHNweScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGEoJ3Njcm9sbHNweS1pZGxlJywgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcygndWstc2Nyb2xsc3B5LWludmlldycpLnRvZ2dsZUNsYXNzKHRvZ2dsZSkud2lkdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnRyaWdnZXIoJ2ludmlldy51ay5zY3JvbGxzcHknKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YSgnc2Nyb2xsc3B5LWlkbGUnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5kYXRhKCdpbnZpZXdzdGF0ZScsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAkdGhpcy5vcHRpb25zLmRlbGF5ICogZGVsYXlJZHgpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXlJZHgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW52aWV3ICYmIGludmlld3N0YXRlICYmICR0aGlzLm9wdGlvbnMucmVwZWF0KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmRhdGEoJ3Njcm9sbHNweS1pZGxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoZWxlbWVudC5kYXRhKCdzY3JvbGxzcHktaWRsZScpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGEoJ3Njcm9sbHNweS1pZGxlJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCd1ay1zY3JvbGxzcHktaW52aWV3JykudG9nZ2xlQ2xhc3ModG9nZ2xlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YSgnaW52aWV3c3RhdGUnLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudHJpZ2dlcignb3V0dmlldy51ay5zY3JvbGxzcHknKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZWNsc0lkeCA9IHRvZ2dsZWNsc1t0b2dnbGVjbHNJZHggKyAxXSA/ICh0b2dnbGVjbHNJZHggKyAxKSA6IDA7XG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZuKCk7XG5cbiAgICAgICAgICAgIHRoaXMuY2hlY2sgPSBmbjtcblxuICAgICAgICAgICAgc2Nyb2xsc3BpZXMucHVzaCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5cbiAgICB2YXIgc2Nyb2xsc3B5bmF2cyA9IFtdLFxuICAgICAgICBjaGVja1Njcm9sbFNweU5hdnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgc2Nyb2xsc3B5bmF2cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYXBwbHkod2luZG93LCBbc2Nyb2xsc3B5bmF2c1tpXS5jaGVja10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgVUkuY29tcG9uZW50KCdzY3JvbGxzcHluYXYnLCB7XG5cbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIGNscyAgICAgICAgICA6ICd1ay1hY3RpdmUnLFxuICAgICAgICAgICAgY2xvc2VzdCAgICAgIDogZmFsc2UsXG4gICAgICAgICAgICB0b3BvZmZzZXQgICAgOiAwLFxuICAgICAgICAgICAgbGVmdG9mZnNldCAgIDogMCxcbiAgICAgICAgICAgIHNtb290aHNjcm9sbCA6IGZhbHNlXG4gICAgICAgIH0sXG5cbiAgICAgICAgYm9vdDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8vIGxpc3RlbiB0byBzY3JvbGwgYW5kIHJlc2l6ZVxuICAgICAgICAgICAgJGRvYy5vbignc2Nyb2xsaW5nLnVrLmRvY3VtZW50JywgY2hlY2tTY3JvbGxTcHlOYXZzKTtcbiAgICAgICAgICAgICR3aW4ub24oJ3Jlc2l6ZSBvcmllbnRhdGlvbmNoYW5nZScsIFVJLlV0aWxzLmRlYm91bmNlKGNoZWNrU2Nyb2xsU3B5TmF2cywgNTApKTtcblxuICAgICAgICAgICAgLy8gaW5pdCBjb2RlXG4gICAgICAgICAgICBVSS5yZWFkeShmdW5jdGlvbihjb250ZXh0KSB7XG5cbiAgICAgICAgICAgICAgICBVSS4kKCdbZGF0YS11ay1zY3JvbGxzcHktbmF2XScsIGNvbnRleHQpLmVhY2goZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBVSS4kKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudC5kYXRhKCdzY3JvbGxzcHluYXYnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IFVJLnNjcm9sbHNweW5hdihlbGVtZW50LCBVSS5VdGlscy5vcHRpb25zKGVsZW1lbnQuYXR0cignZGF0YS11ay1zY3JvbGxzcHktbmF2JykpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIHZhciBpZHMgICAgID0gW10sXG4gICAgICAgICAgICAgICAgbGlua3MgICA9IHRoaXMuZmluZChcImFbaHJlZl49JyMnXVwiKS5lYWNoKGZ1bmN0aW9uKCl7IGlmKHRoaXMuZ2V0QXR0cmlidXRlKCdocmVmJykudHJpbSgpIT09JyMnKSBpZHMucHVzaCh0aGlzLmdldEF0dHJpYnV0ZSgnaHJlZicpKTsgfSksXG4gICAgICAgICAgICAgICAgdGFyZ2V0cyA9IFVJLiQoaWRzLmpvaW4oXCIsXCIpKSxcblxuICAgICAgICAgICAgICAgIGNsc0FjdGl2ZSAgPSB0aGlzLm9wdGlvbnMuY2xzLFxuICAgICAgICAgICAgICAgIGNsc0Nsb3Nlc3QgPSB0aGlzLm9wdGlvbnMuY2xvc2VzdCB8fCB0aGlzLm9wdGlvbnMuY2xvc2VzdDtcblxuICAgICAgICAgICAgdmFyICR0aGlzID0gdGhpcywgaW52aWV3cywgZm4gPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgaW52aWV3cyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wIDsgaSA8IHRhcmdldHMubGVuZ3RoIDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChVSS5VdGlscy5pc0luVmlldyh0YXJnZXRzLmVxKGkpLCAkdGhpcy5vcHRpb25zKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW52aWV3cy5wdXNoKHRhcmdldHMuZXEoaSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGludmlld3MubGVuZ3RoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hdml0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wID0gJHdpbi5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpPCBpbnZpZXdzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW52aWV3c1tpXS5vZmZzZXQoKS50b3AgLSAkdGhpcy5vcHRpb25zLnRvcG9mZnNldCA+PSBzY3JvbGxUb3Ape1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGludmlld3NbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0KSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLm9wdGlvbnMuY2xvc2VzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlua3MuYmx1cigpLmNsb3Nlc3QoY2xzQ2xvc2VzdCkucmVtb3ZlQ2xhc3MoY2xzQWN0aXZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdml0ZW1zID0gbGlua3MuZmlsdGVyKFwiYVtocmVmPScjXCIrdGFyZ2V0LmF0dHIoJ2lkJykrXCInXVwiKS5jbG9zZXN0KGNsc0Nsb3Nlc3QpLmFkZENsYXNzKGNsc0FjdGl2ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZpdGVtcyA9IGxpbmtzLnJlbW92ZUNsYXNzKGNsc0FjdGl2ZSkuZmlsdGVyKFwiYVtocmVmPScjXCIrdGFyZ2V0LmF0dHIoXCJpZFwiKStcIiddXCIpLmFkZENsYXNzKGNsc0FjdGl2ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5lbGVtZW50LnRyaWdnZXIoJ2ludmlldy51ay5zY3JvbGxzcHluYXYnLCBbdGFyZ2V0LCBuYXZpdGVtc10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc21vb3Roc2Nyb2xsICYmIFVJLnNtb290aFNjcm9sbCkge1xuICAgICAgICAgICAgICAgIGxpbmtzLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgVUkuc21vb3RoU2Nyb2xsKHRoaXMsICR0aGlzLm9wdGlvbnMuc21vb3Roc2Nyb2xsKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm4oKTtcblxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmRhdGEoJ3Njcm9sbHNweW5hdicsIHRoaXMpO1xuXG4gICAgICAgICAgICB0aGlzLmNoZWNrID0gZm47XG4gICAgICAgICAgICBzY3JvbGxzcHluYXZzLnB1c2godGhpcyk7XG5cbiAgICAgICAgfVxuICAgIH0pO1xuXG59KShVSWtpdDIpOyJdfQ==
