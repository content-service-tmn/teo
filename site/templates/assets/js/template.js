$(document).ready(function(){$(".js-input").on("focus focusout",function(e){e.preventDefault(),$(e.target).parent().toggleClass("is_focused"),"focusout"==e.type&&$(e.target).val($.trim($(e.target).val()))}),$(".js-input").on("change keyup",function(e){e.preventDefault(),""===$.trim($(e.target).val())||$(e.target).hasClass("is_filled")?$(e.target).parent().removeClass("is_filled"):$(e.target).parent().addClass("is_filled"),$(this).parent().removeClass("error")}),$(".js-phone").on("focusout",function(e){e.preventDefault();var t=$(this).val().replace(/[^0-9]/gi,"");7==t.substr(0,1)&&(t="+7"+t.substr(1,t.length-1)),$(this).val(t)});var e=$("#svg1"),t=$("#svg2"),a=$(".header__content"),n=0,s=3;t.find("polygon").click(function(){a.eq(s).toggleClass("active"),s=$(this).index()-1,a.eq(s).toggleClass("active")}).mouseover(function(){n=$(this).index()-1,e.find("polygon").eq(n).toggleClass("active")}).mouseleave(function(){n=$(this).index()-1,e.find("polygon").eq(n).toggleClass("active")});var i=$("#svg_on_mappage");i.find("polygon").mouseover(function(){n=$(this).index()-1,i.find("polygon").eq(n).toggleClass("active")}).mouseleave(function(){n=$(this).index()-1,i.find("polygon").eq(n).toggleClass("active")}).click(function(){n=$(this).index()-1,window.location.replace(i.find("polygon").eq(n).attr("data-link"))}),$("#submit_form").click(function(e){e.preventDefault();var t=$("#callback_source").attr("data-source"),a=$("#name"),n=$("#phone"),s=$("#company"),i=$("#mail"),x=new RegExp(/\d{11}/),o=new RegExp(/.+/),l=new RegExp(/^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,})(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@)(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22))(?:\.(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\]))$/),r=!1;if(o.test(a.val())||(a.parent().addClass("error"),r=!0),x.test(n.val())||(n.parent().addClass("error"),r=!0),l.test(i.val())||(i.parent().addClass("error"),r=!0),r)return!1;var c={name:a.val(),phone:n.val(),company:s.val(),email:i.val()};null!=t&&(c.from=t),a.val(""),n.val(""),s.val(""),i.val(""),$.ajax({url:"/teo/ajax-handler/",type:"POST",data:{data:c},success:function(e){UIkit.offcanvas.hide([force=!1]),UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено":"Ошибка отправки сообщения",status:e,timeout:3e3,pos:"bottom-center"})},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}),$(".proposal_request").click(function(){$("#callback_source").attr("data-source",$(this).attr("data-source"))}),$("#submit_form2").click(function(e){e.preventDefault();var t=$("#name9"),a=$("#text9"),n=$("#mail9"),s=new RegExp(/.+/),i=new RegExp(/^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,})(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@)(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22))(?:\.(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\]))$/),x=!1;if(s.test(t.val())||(t.parent().addClass("error"),x=!0),s.test(a.val())||(a.parent().addClass("error"),x=!0),i.test(n.val())||(n.parent().addClass("error"),x=!0),x)return!1;var o={name:t.val(),email:n.val(),quest:a.val()};t.val(""),a.val(""),n.val(""),$.ajax({url:"/teo/ajax-handler/",type:"POST",data:{data:o},success:function(e){UIkit.offcanvas.hide([force=!1]),UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено":"Ошибка отправки сообщения",status:e,timeout:3e3,pos:"bottom-center"})},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}),$(".inputfile_button").click(function(){$(this).closest(".feedback_form_inputfile_block").find(".inputfile_input").trigger("click")}),$(".inputfile_input").change(function(){var e=$(this).val(),t=e;new RegExp("[^*](.txt|.jpg|.png|.zip|.rar|.doc|.docx|.xls|.xlsx|.pdf)","i").test(e)?5242880<this.files[0].size?(t='<span class="red">Размер файла превышает 5 Мб</span>',$(this).val("")):(val_mas=e.split("\\"),t=val_mas[val_mas.length-1]):(t='<span class="red">Неверное расширение файла</span>',$(this).val(""));$(this).closest(".feedback_form_inputfile_block").find(".inputfile_caption").html(t).attr("title",e)}),$(".feedback_radio_input").change(function(){var e=$(this).val();$(".feedback_container").not("#feedback_"+e).slideUp(300),$("#feedback_"+e).slideDown(300)}),$(".canSpeak").mouseenter(function(){"true"==sessionStorage.getItem("isInvalid")&&function e(t){speechSynthesis.speaking?(speechSynthesis.cancel(),null!==x&&clearTimeout(x),x=setTimeout(function(){e(t)},250)):speechSynthesis.speak(t)}(new SpeechSynthesisUtterance($(this)[0].innerText))});var x=null;var o=$(".menu__phone-container__icon");function l(){var e=$("#grid-group");960<=window.innerWidth?e.height(window.innerHeight-170):e.height("initial")}$(".invalid").click(function(){"true"==sessionStorage.getItem("isInvalid")?($(this).css("fill","black"),o.css("box-shadow","none"),sessionStorage.setItem("isInvalid",!1)):($(this).css("fill","#e9ac45"),$(this).find(".menu__phone-container__icon")&&o.css("box-shadow","white 0px 0px 5px 2px"),sessionStorage.setItem("isInvalid",!0))}),"true"==sessionStorage.getItem("isInvalid")&&($(".invalid").css("fill","#e9ac45"),o.css("box-shadow","white 0px 0px 5px 2px")),l(),$(window).resize(function(){l()}),$(".feedback_form_field-arrow").click(function(){var e=$(this).closest(".feedback_form_field").find("select");if(document.createEvent){var t=document.createEvent("MouseEvents");t.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e[0].dispatchEvent(t)}else e.fireEvent&&e[0].fireEvent("onmousedown")}),$(".to_validate").inputmask()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBsYXRlLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5Iiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJwYXJlbnQiLCJ0b2dnbGVDbGFzcyIsInR5cGUiLCJ2YWwiLCJ0cmltIiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwidGhpcyIsInJlcGxhY2UiLCJzdWJzdHIiLCJsZW5ndGgiLCJzdmcxIiwic3ZnMiIsImNvbnRlbnRzIiwiaSIsImoiLCJmaW5kIiwiY2xpY2siLCJlcSIsImluZGV4IiwibW91c2VvdmVyIiwibW91c2VsZWF2ZSIsInN2Z19vbl9wYWdlIiwid2luZG93IiwibG9jYXRpb24iLCJhdHRyIiwiZnJvbSIsIm5hbWUiLCJwaG9uZSIsImNvbXBhbnkiLCJlbWFpbCIsInJlZ2V4X3Bob25lIiwiUmVnRXhwIiwicmVnZXhfbmFtZSIsInJlZ2V4X2VtYWlsIiwiaGFzRXJyIiwidGVzdCIsImRhdGEiLCJ1bmRlZmluZWQiLCJhamF4IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsIlVJa2l0Iiwib2ZmY2FudmFzIiwiaGlkZSIsImZvcmNlIiwibm90aWZ5IiwibWVzc2FnZSIsInN0YXR1cyIsInRpbWVvdXQiLCJwb3MiLCJlcnJvciIsInF1ZXN0IiwiY2xvc2VzdCIsInRyaWdnZXIiLCJjaGFuZ2UiLCJodG1sIiwiZmlsZXMiLCJzaXplIiwidmFsX21hcyIsInNwbGl0IiwiYmxvY2tpZCIsIm5vdCIsInNsaWRlVXAiLCJzbGlkZURvd24iLCJtb3VzZWVudGVyIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwic2F5IiwidGV4dCIsInNwZWVjaFN5bnRoZXNpcyIsInNwZWFraW5nIiwiY2FuY2VsIiwic2F5VGltZW91dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzcGVhayIsIlNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSIsImlubmVyVGV4dCIsImljb25faW52YWxpZCIsImNoYW5nZUhlaWdodE1haW5CbG9jayIsImdyb3VwIiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiY3NzIiwic2V0SXRlbSIsInJlc2l6ZSIsImVsZW1lbnQiLCJjcmVhdGVFdmVudCIsImluaXRNb3VzZUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImZpcmVFdmVudCIsImlucHV0bWFzayJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUVDLFVBQVVDLE1BQU0sV0FDaEJGLEVBQUUsYUFBYUcsR0FBRyxpQkFBa0IsU0FBU0MsR0FDdkNBLEVBQUVDLGlCQUNGTCxFQUFFSSxFQUFFRSxRQUFRQyxTQUFTQyxZQUFZLGNBQ3BCLFlBQVZKLEVBQUVLLE1BQ0RULEVBQUVJLEVBQUVFLFFBQVFJLElBQUlWLEVBQUVXLEtBQUtYLEVBQUVJLEVBQUVFLFFBQVFJLFVBRzNDVixFQUFFLGFBQWFHLEdBQUcsZUFBZ0IsU0FBU0MsR0FDdkNBLEVBQUVDLGlCQUMrQixLQUE5QkwsRUFBRVcsS0FBS1gsRUFBRUksRUFBRUUsUUFBUUksUUFBa0JWLEVBQUVJLEVBQUVFLFFBQVFNLFNBQVMsYUFHekRaLEVBQUVJLEVBQUVFLFFBQVFDLFNBQVNNLFlBQVksYUFGakNiLEVBQUVJLEVBQUVFLFFBQVFDLFNBQVNPLFNBQVMsYUFJbENkLEVBQUVlLE1BQU1SLFNBQVNNLFlBQVksV0FFakNiLEVBQUUsYUFBYUcsR0FBRyxXQUFZLFNBQVNDLEdBQ25DQSxFQUFFQyxpQkFDRixJQUFJSyxFQUFNVixFQUFFZSxNQUFNTCxNQUFNTSxRQUFRLFdBQVcsSUFDcEIsR0FBcEJOLEVBQUlPLE9BQU8sRUFBRyxLQUNiUCxFQUFNLEtBQU9BLEVBQUlPLE9BQU8sRUFBR1AsRUFBSVEsT0FBUyxJQUU1Q2xCLEVBQUVlLE1BQU1MLElBQUlBLEtBR2hCLElBQUlTLEVBQU9uQixFQUFFLFNBQ1RvQixFQUFPcEIsRUFBRSxTQUNUcUIsRUFBV3JCLEVBQUUsb0JBQ2JzQixFQUFJLEVBQ0pDLEVBQUksRUFDUkgsRUFBS0ksS0FBSyxXQUFXQyxNQUFNLFdBQ3pCSixFQUFTSyxHQUFHSCxHQUFHZixZQUFZLFVBQzNCZSxFQUFJdkIsRUFBRWUsTUFBTVksUUFBUSxFQUNwQk4sRUFBU0ssR0FBR0gsR0FBR2YsWUFBWSxZQUU1Qm9CLFVBQVUsV0FDVE4sRUFBSXRCLEVBQUVlLE1BQU1ZLFFBQVEsRUFDcEJSLEVBQUtLLEtBQUssV0FBV0UsR0FBR0osR0FBR2QsWUFBWSxZQUV4Q3FCLFdBQVcsV0FDVlAsRUFBSXRCLEVBQUVlLE1BQU1ZLFFBQVEsRUFDcEJSLEVBQUtLLEtBQUssV0FBV0UsR0FBR0osR0FBR2QsWUFBWSxZQUd6QyxJQUFJc0IsRUFBYzlCLEVBQUUsbUJBQ3BCOEIsRUFBWU4sS0FBSyxXQUNaSSxVQUFVLFdBQ1hOLEVBQUl0QixFQUFFZSxNQUFNWSxRQUFRLEVBQ3BCRyxFQUFZTixLQUFLLFdBQVdFLEdBQUdKLEdBQUdkLFlBQVksWUFFN0NxQixXQUFXLFdBQ1JQLEVBQUl0QixFQUFFZSxNQUFNWSxRQUFRLEVBQ3BCRyxFQUFZTixLQUFLLFdBQVdFLEdBQUdKLEdBQUdkLFlBQVksWUFFakRpQixNQUFNLFdBQ0hILEVBQUl0QixFQUFFZSxNQUFNWSxRQUFRLEVBQ3BCSSxPQUFPQyxTQUFTaEIsUUFBUWMsRUFBWU4sS0FBSyxXQUFXRSxHQUFHSixHQUFHVyxLQUFLLGdCQUd2RWpDLEVBQUUsZ0JBQWdCeUIsTUFBTSxTQUFVckIsR0FFOUJBLEVBQUVDLGlCQUNGLElBQUk2QixFQUFPbEMsRUFBRSxvQkFBb0JpQyxLQUFLLGVBQ2xDRSxFQUFPbkMsRUFBRSxTQUNUb0MsRUFBUXBDLEVBQUUsVUFDVnFDLEVBQVVyQyxFQUFFLFlBQ1pzQyxFQUFRdEMsRUFBRSxTQUVWdUMsRUFBYyxJQUFJQyxPQUFPLFVBQ3pCQyxFQUFhLElBQUlELE9BQU8sTUFDeEJFLEVBQWMsSUFBSUYsT0FBTyw4aUNBRXpCRyxHQUFTLEVBY2IsR0FaS0YsRUFBV0csS0FBS1QsRUFBS3pCLFNBQ3RCeUIsRUFBSzVCLFNBQVNPLFNBQVMsU0FDdkI2QixHQUFTLEdBRVJKLEVBQVlLLEtBQUtSLEVBQU0xQixTQUN4QjBCLEVBQU03QixTQUFTTyxTQUFTLFNBQ3hCNkIsR0FBUyxHQUVSRCxFQUFZRSxLQUFLTixFQUFNNUIsU0FDeEI0QixFQUFNL0IsU0FBU08sU0FBUyxTQUN4QjZCLEdBQVMsR0FFVEEsRUFDQSxPQUFPLEVBR1gsSUFBSUUsRUFBTyxDQUNQVixLQUFNQSxFQUFLekIsTUFDWDBCLE1BQU9BLEVBQU0xQixNQUNiMkIsUUFBU0EsRUFBUTNCLE1BQ2pCNEIsTUFBT0EsRUFBTTVCLE9BR0xvQyxNQUFSWixJQUNBVyxFQUFLWCxLQUFPQSxHQUdoQkMsRUFBS3pCLElBQUksSUFDVDBCLEVBQU0xQixJQUFJLElBQ1YyQixFQUFRM0IsSUFBSSxJQUNaNEIsRUFBTTVCLElBQUksSUFFVlYsRUFBRStDLEtBQUssQ0FDSEMsSUFBSyxxQkFDTHZDLEtBQU0sT0FDTm9DLEtBQU0sQ0FBQ0EsS0FBTUEsR0FDYkksUUFBUyxTQUFVQyxHQUNmQyxNQUFNQyxVQUFVQyxLQUFLLENBQUNDLE9BQVEsSUFDOUJILE1BQU1JLE9BQU8sQ0FDVEMsUUFBb0IsV0FBVk4sRUFBdUIsb0NBQXNDLDRCQUN2RU8sT0FBUVAsRUFDUlEsUUFBUyxJQUNUQyxJQUFLLG1CQUdiQyxNQUFPLFNBQVVWLEdBQ2JDLE1BQU1JLE9BQU8sQ0FDVEMsUUFBUyw0QkFDVEMsT0FBUSxVQUNSQyxRQUFTLElBQ1RDLElBQUssdUJBUXJCM0QsRUFBRSxxQkFBcUJ5QixNQUFNLFdBQ3pCekIsRUFBRSxvQkFBb0JpQyxLQUFLLGNBQWVqQyxFQUFFZSxNQUFNa0IsS0FBSyxrQkFHM0RqQyxFQUFFLGlCQUFpQnlCLE1BQU0sU0FBVXJCLEdBRS9CQSxFQUFFQyxpQkFDRixJQUFJOEIsRUFBT25DLEVBQUUsVUFDVDZELEVBQVE3RCxFQUFFLFVBQ1ZzQyxFQUFRdEMsRUFBRSxVQUVWeUMsRUFBYSxJQUFJRCxPQUFPLE1BQ3hCRSxFQUFjLElBQUlGLE9BQU8sOGlDQUV6QkcsR0FBUyxFQWNiLEdBWktGLEVBQVdHLEtBQUtULEVBQUt6QixTQUN0QnlCLEVBQUs1QixTQUFTTyxTQUFTLFNBQ3ZCNkIsR0FBUyxHQUVSRixFQUFXRyxLQUFLaUIsRUFBTW5ELFNBQ3ZCbUQsRUFBTXRELFNBQVNPLFNBQVMsU0FDeEI2QixHQUFTLEdBRVJELEVBQVlFLEtBQUtOLEVBQU01QixTQUN4QjRCLEVBQU0vQixTQUFTTyxTQUFTLFNBQ3hCNkIsR0FBUyxHQUVUQSxFQUNBLE9BQU8sRUFHWCxJQUFJRSxFQUFPLENBQ1BWLEtBQU1BLEVBQUt6QixNQUNYNEIsTUFBT0EsRUFBTTVCLE1BQ2JtRCxNQUFPQSxFQUFNbkQsT0FJakJ5QixFQUFLekIsSUFBSSxJQUNUbUQsRUFBTW5ELElBQUksSUFDVjRCLEVBQU01QixJQUFJLElBRVZWLEVBQUUrQyxLQUFLLENBQ0hDLElBQUsscUJBQ0x2QyxLQUFNLE9BQ05vQyxLQUFNLENBQUNBLEtBQU1BLEdBQ2JJLFFBQVMsU0FBVUMsR0FDZkMsTUFBTUMsVUFBVUMsS0FBSyxDQUFDQyxPQUFRLElBQzlCSCxNQUFNSSxPQUFPLENBQ1RDLFFBQW9CLFdBQVZOLEVBQXVCLG9DQUFzQyw0QkFDdkVPLE9BQVFQLEVBQ1JRLFFBQVMsSUFDVEMsSUFBSyxtQkFHYkMsTUFBTyxTQUFVVixHQUNiQyxNQUFNSSxPQUFPLENBQ1RDLFFBQVMsNEJBQ1RDLE9BQVEsVUFDUkMsUUFBUyxJQUNUQyxJQUFLLHVCQVVyQjNELEVBQUUscUJBQXFCeUIsTUFBTSxXQUNaekIsRUFBRWUsTUFBTStDLFFBQVEsa0NBQWtDdEMsS0FBSyxvQkFDN0R1QyxRQUFRLFdBR25CL0QsRUFBRSxvQkFBb0JnRSxPQUFPLFdBQ3pCLElBQUl0RCxFQUFNVixFQUFFZSxNQUFNTCxNQUVkdUQsRUFBT3ZELEVBQ0YsSUFBSThCLE9BQU8sNERBQXVFLEtBQ2xGSSxLQUFLbEMsR0FLQyxRQURBSyxLQUFLbUQsTUFBTSxHQUFHQyxNQUVyQkYsRUFBTyx1REFDUGpFLEVBQUVlLE1BQU1MLElBQUksTUFFWjBELFFBQVUxRCxFQUFJMkQsTUFBTSxNQUNwQkosRUFBT0csUUFBUUEsUUFBUWxELE9BQVMsS0FUcEMrQyxFQUFPLHFEQUNQakUsRUFBRWUsTUFBTUwsSUFBSSxLQWFoQlYsRUFBRWUsTUFBTStDLFFBQVEsa0NBQWtDdEMsS0FBSyxzQkFBc0J5QyxLQUFLQSxHQUFNaEMsS0FBSyxRQUFTdkIsS0FHMUdWLEVBQUUseUJBQXlCZ0UsT0FBTyxXQUM5QixJQUFJTSxFQUFVdEUsRUFBRWUsTUFBTUwsTUFDdEJWLEVBQUUsdUJBQXVCdUUsSUFBSSxhQUFlRCxHQUFTRSxRQUFRLEtBQzdEeEUsRUFBRSxhQUFlc0UsR0FBU0csVUFBVSxPQUV4Q3pFLEVBQUUsYUFBYTBFLFdBQVcsV0FDcUIsUUFBdkNDLGVBQWVDLFFBQVEsY0FRL0IsU0FBU0MsRUFBSUMsR0FDTEMsZ0JBQWdCQyxVQUVoQkQsZ0JBQWdCRSxTQUdHLE9BQWZDLEdBQ0FDLGFBQWFELEdBRWpCQSxFQUFhRSxXQUFXLFdBQWNQLEVBQUlDLElBQVUsTUFJcERDLGdCQUFnQk0sTUFBTVAsR0FuQnRCRCxDQURVLElBQUlTLHlCQUF5QnRGLEVBQUVlLE1BQU0sR0FBR3dFLGNBSzFELElBQUlMLEVBQWEsS0FtQmpCLElBQUlNLEVBQWV4RixFQUFFLGdDQTRCckIsU0FBU3lGLElBQ0wsSUFBSUMsRUFBUTFGLEVBQUUsZUFFVyxLQUFyQitCLE9BQU80RCxXQUNQRCxFQUFNRSxPQUFPN0QsT0FBTzhELFlBQWMsS0FFbENILEVBQU1FLE9BQU8sV0FoQ3JCNUYsRUFBRSxZQUFZeUIsTUFBTSxXQUMyQixRQUF2Q2tELGVBQWVDLFFBQVEsY0FDdkI1RSxFQUFFZSxNQUFNK0UsSUFBSSxPQUFPLFNBQ25CTixFQUFhTSxJQUFJLGFBQWMsUUFDL0JuQixlQUFlb0IsUUFBUSxhQUFhLEtBRXBDL0YsRUFBRWUsTUFBTStFLElBQUksT0FBUSxXQUVoQjlGLEVBQUVlLE1BQU1TLEtBQUssaUNBQ2JnRSxFQUFhTSxJQUFJLGFBQWMseUJBR25DbkIsZUFBZW9CLFFBQVEsYUFBYSxNQUdELFFBQXZDcEIsZUFBZUMsUUFBUSxlQUN2QjVFLEVBQUUsWUFBWThGLElBQUksT0FBTyxXQUN6Qk4sRUFBYU0sSUFBSSxhQUFjLDBCQUduQ0wsSUFFQXpGLEVBQUUrQixRQUFRaUUsT0FBTyxXQUNiUCxNQWFKekYsRUFBRSw4QkFBOEJ5QixNQUFNLFdBQ2xDLElBQUl3RSxFQUFVakcsRUFBRWUsTUFBTStDLFFBQVEsd0JBQXdCdEMsS0FBSyxVQUUzRCxHQUFJdkIsU0FBU2lHLFlBQWEsQ0FDdEIsSUFBSTlGLEVBQUlILFNBQVNpRyxZQUFZLGVBQzdCOUYsRUFBRStGLGVBQWUsYUFBYSxHQUFNLEVBQU1wRSxPQUFRLEVBQUcsRUFBRyxFQUFHLEVBQUcsR0FBRyxHQUFPLEdBQU8sR0FBTyxFQUFPLEVBQUcsTUFDaEdrRSxFQUFRLEdBQUdHLGNBQWNoRyxRQUNsQjZGLEVBQVFJLFdBQ2ZKLEVBQVEsR0FBR0ksVUFBVSxpQkFLN0JyRyxFQUFFLGdCQUFnQnNHIiwiZmlsZSI6InRlbXBsYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICQoJy5qcy1pbnB1dCcpLm9uKCdmb2N1cyBmb2N1c291dCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoKS50b2dnbGVDbGFzcygnaXNfZm9jdXNlZCcpO1xuICAgICAgICBpZihlLnR5cGUgPT0gJ2ZvY3Vzb3V0Jykge1xuICAgICAgICAgICAgJChlLnRhcmdldCkudmFsKCQudHJpbSgkKGUudGFyZ2V0KS52YWwoKSkpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgJCgnLmpzLWlucHV0Jykub24oJ2NoYW5nZSBrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZigkLnRyaW0oJChlLnRhcmdldCkudmFsKCkpICE9PSAnJyAmJiAhJChlLnRhcmdldCkuaGFzQ2xhc3MoJ2lzX2ZpbGxlZCcpKSB7XG4gICAgICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoKS5hZGRDbGFzcygnaXNfZmlsbGVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnaXNfZmlsbGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImVycm9yXCIpO1xuICAgIH0pO1xuICAgICQoJy5qcy1waG9uZScpLm9uKCdmb2N1c291dCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgdmFsID0gJCh0aGlzKS52YWwoKS5yZXBsYWNlKC9bXjAtOV0vZ2ksJycpO1xuICAgICAgICBpZih2YWwuc3Vic3RyKDAsIDEpID09IDcpIHtcbiAgICAgICAgICAgIHZhbCA9ICcrNycgKyB2YWwuc3Vic3RyKDEsIHZhbC5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuICAgICAgICAkKHRoaXMpLnZhbCh2YWwpO1xuICAgIH0pO1xuXG4gICAgdmFyIHN2ZzEgPSAkKCcjc3ZnMScpO1xuICAgIHZhciBzdmcyID0gJCgnI3N2ZzInKTtcbiAgICB2YXIgY29udGVudHMgPSAkKCcuaGVhZGVyX19jb250ZW50Jyk7XG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBqID0gMztcbiAgICBzdmcyLmZpbmQoJ3BvbHlnb24nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgIGNvbnRlbnRzLmVxKGopLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgIGogPSAkKHRoaXMpLmluZGV4KCktMTtcbiAgICAgIGNvbnRlbnRzLmVxKGopLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KVxuICAgIC5tb3VzZW92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICBpID0gJCh0aGlzKS5pbmRleCgpLTE7XG4gICAgICBzdmcxLmZpbmQoJ3BvbHlnb24nKS5lcShpKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgfSlcbiAgICAubW91c2VsZWF2ZShmdW5jdGlvbigpIHtcbiAgICAgIGkgPSAkKHRoaXMpLmluZGV4KCktMTtcbiAgICAgIHN2ZzEuZmluZCgncG9seWdvbicpLmVxKGkpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIHZhciBzdmdfb25fcGFnZSA9ICQoXCIjc3ZnX29uX21hcHBhZ2VcIik7XG4gICAgc3ZnX29uX3BhZ2UuZmluZCgncG9seWdvbicpXG4gICAgICAgIC5tb3VzZW92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICBpID0gJCh0aGlzKS5pbmRleCgpLTE7XG4gICAgICAgIHN2Z19vbl9wYWdlLmZpbmQoJ3BvbHlnb24nKS5lcShpKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaSA9ICQodGhpcykuaW5kZXgoKS0xO1xuICAgICAgICAgICAgc3ZnX29uX3BhZ2UuZmluZCgncG9seWdvbicpLmVxKGkpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGkgPSAkKHRoaXMpLmluZGV4KCktMTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHN2Z19vbl9wYWdlLmZpbmQoJ3BvbHlnb24nKS5lcShpKS5hdHRyKFwiZGF0YS1saW5rXCIpKTtcbiAgICAgICAgfSk7XG5cbiAgICAkKFwiI3N1Ym1pdF9mb3JtXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgZnJvbSA9ICQoXCIjY2FsbGJhY2tfc291cmNlXCIpLmF0dHIoXCJkYXRhLXNvdXJjZVwiKTtcbiAgICAgICAgdmFyIG5hbWUgPSAkKFwiI25hbWVcIik7XG4gICAgICAgIHZhciBwaG9uZSA9ICQoXCIjcGhvbmVcIik7XG4gICAgICAgIHZhciBjb21wYW55ID0gJChcIiNjb21wYW55XCIpO1xuICAgICAgICB2YXIgZW1haWwgPSAkKFwiI21haWxcIik7XG5cbiAgICAgICAgdmFyIHJlZ2V4X3Bob25lID0gbmV3IFJlZ0V4cCgvXFxkezExfS8pO1xuICAgICAgICB2YXIgcmVnZXhfbmFtZSA9IG5ldyBSZWdFeHAoLy4rLyk7XG4gICAgICAgIHZhciByZWdleF9lbWFpbCA9IG5ldyBSZWdFeHAoL14oPyEoPzooPzpcXHgyMj9cXHg1Q1tcXHgwMC1cXHg3RV1cXHgyMj8pfCg/OlxceDIyP1teXFx4NUNcXHgyMl1cXHgyMj8pKXsyNTUsfSkoPyEoPzooPzpcXHgyMj9cXHg1Q1tcXHgwMC1cXHg3RV1cXHgyMj8pfCg/OlxceDIyP1teXFx4NUNcXHgyMl1cXHgyMj8pKXs2NSx9QCkoPzooPzpbXFx4MjFcXHgyMy1cXHgyN1xceDJBXFx4MkJcXHgyRFxceDJGLVxceDM5XFx4M0RcXHgzRlxceDVFLVxceDdFXSspfCg/OlxceDIyKD86W1xceDAxLVxceDA4XFx4MEJcXHgwQ1xceDBFLVxceDFGXFx4MjFcXHgyMy1cXHg1QlxceDVELVxceDdGXXwoPzpcXHg1Q1tcXHgwMC1cXHg3Rl0pKSpcXHgyMikpKD86XFwuKD86KD86W1xceDIxXFx4MjMtXFx4MjdcXHgyQVxceDJCXFx4MkRcXHgyRi1cXHgzOVxceDNEXFx4M0ZcXHg1RS1cXHg3RV0rKXwoPzpcXHgyMig/OltcXHgwMS1cXHgwOFxceDBCXFx4MENcXHgwRS1cXHgxRlxceDIxXFx4MjMtXFx4NUJcXHg1RC1cXHg3Rl18KD86XFx4NUNbXFx4MDAtXFx4N0ZdKSkqXFx4MjIpKSkqQCg/Oig/Oig/IS4qW14uXXs2NCx9KSg/Oig/Oig/OnhuLS0pP1thLXowLTldKyg/Oi1bYS16MC05XSspKlxcLil7MSwxMjZ9KXsxLH0oPzooPzpbYS16XVthLXowLTldKil8KD86KD86eG4tLSlbYS16MC05XSspKSg/Oi1bYS16MC05XSspKil8KD86XFxbKD86KD86SVB2NjooPzooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezd9KXwoPzooPyEoPzouKlthLWYwLTldWzpcXF1dKXs3LH0pKD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDV9KT86Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCw1fSk/KSkpfCg/Oig/OklQdjY6KD86KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXs1fTopfCg/Oig/ISg/Oi4qW2EtZjAtOV06KXs1LH0pKD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDN9KT86Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCwzfTopPykpKT8oPzooPzoyNVswLTVdKXwoPzoyWzAtNF1bMC05XSl8KD86MVswLTldezJ9KXwoPzpbMS05XT9bMC05XSkpKD86XFwuKD86KD86MjVbMC01XSl8KD86MlswLTRdWzAtOV0pfCg/OjFbMC05XXsyfSl8KD86WzEtOV0/WzAtOV0pKSl7M30pKVxcXSkpJC8pO1xuXG4gICAgICAgIHZhciBoYXNFcnIgPSBmYWxzZTtcblxuICAgICAgICBpZiAoIXJlZ2V4X25hbWUudGVzdChuYW1lLnZhbCgpKSkge1xuICAgICAgICAgICAgbmFtZS5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlZ2V4X3Bob25lLnRlc3QocGhvbmUudmFsKCkpKSB7XG4gICAgICAgICAgICBwaG9uZS5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlZ2V4X2VtYWlsLnRlc3QoZW1haWwudmFsKCkpKSB7XG4gICAgICAgICAgICBlbWFpbC5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzRXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUudmFsKCksXG4gICAgICAgICAgICBwaG9uZTogcGhvbmUudmFsKCksXG4gICAgICAgICAgICBjb21wYW55OiBjb21wYW55LnZhbCgpLFxuICAgICAgICAgICAgZW1haWw6IGVtYWlsLnZhbCgpXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGZyb20gIT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIGRhdGEuZnJvbSA9IGZyb207XG4gICAgICAgIH1cblxuICAgICAgICBuYW1lLnZhbChcIlwiKTtcbiAgICAgICAgcGhvbmUudmFsKFwiXCIpO1xuICAgICAgICBjb21wYW55LnZhbChcIlwiKTtcbiAgICAgICAgZW1haWwudmFsKFwiXCIpO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiL3Rlby9hamF4LWhhbmRsZXIvXCIsXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7ZGF0YTogZGF0YX0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgVUlraXQub2ZmY2FudmFzLmhpZGUoW2ZvcmNlID0gZmFsc2VdKTtcbiAgICAgICAgICAgICAgICBVSWtpdC5ub3RpZnkoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAocmVzdWx0ID09IFwic3VjY2Vzc1wiKSA/ICfQktCw0YjQtSDRgdC+0L7QsdGJ0LXQvdC40LUg0YPRgdC/0LXRiNC90L4g0L7RgtC/0YDQsNCy0LvQtdC90L4nIDogJ9Ce0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjycsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAzMDAwLFxuICAgICAgICAgICAgICAgICAgICBwb3M6ICdib3R0b20tY2VudGVyJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgVUlraXQubm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ9Ce0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjycsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAzMDAwLFxuICAgICAgICAgICAgICAgICAgICBwb3M6ICdib3R0b20tY2VudGVyJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICAkKFwiLnByb3Bvc2FsX3JlcXVlc3RcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI2NhbGxiYWNrX3NvdXJjZVwiKS5hdHRyKFwiZGF0YS1zb3VyY2VcIiwgJCh0aGlzKS5hdHRyKFwiZGF0YS1zb3VyY2VcIikpO1xuICAgIH0pO1xuXG4gICAgJChcIiNzdWJtaXRfZm9ybTJcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBuYW1lID0gJChcIiNuYW1lOVwiKTtcbiAgICAgICAgdmFyIHF1ZXN0ID0gJChcIiN0ZXh0OVwiKTtcbiAgICAgICAgdmFyIGVtYWlsID0gJChcIiNtYWlsOVwiKTtcblxuICAgICAgICB2YXIgcmVnZXhfbmFtZSA9IG5ldyBSZWdFeHAoLy4rLyk7XG4gICAgICAgIHZhciByZWdleF9lbWFpbCA9IG5ldyBSZWdFeHAoL14oPyEoPzooPzpcXHgyMj9cXHg1Q1tcXHgwMC1cXHg3RV1cXHgyMj8pfCg/OlxceDIyP1teXFx4NUNcXHgyMl1cXHgyMj8pKXsyNTUsfSkoPyEoPzooPzpcXHgyMj9cXHg1Q1tcXHgwMC1cXHg3RV1cXHgyMj8pfCg/OlxceDIyP1teXFx4NUNcXHgyMl1cXHgyMj8pKXs2NSx9QCkoPzooPzpbXFx4MjFcXHgyMy1cXHgyN1xceDJBXFx4MkJcXHgyRFxceDJGLVxceDM5XFx4M0RcXHgzRlxceDVFLVxceDdFXSspfCg/OlxceDIyKD86W1xceDAxLVxceDA4XFx4MEJcXHgwQ1xceDBFLVxceDFGXFx4MjFcXHgyMy1cXHg1QlxceDVELVxceDdGXXwoPzpcXHg1Q1tcXHgwMC1cXHg3Rl0pKSpcXHgyMikpKD86XFwuKD86KD86W1xceDIxXFx4MjMtXFx4MjdcXHgyQVxceDJCXFx4MkRcXHgyRi1cXHgzOVxceDNEXFx4M0ZcXHg1RS1cXHg3RV0rKXwoPzpcXHgyMig/OltcXHgwMS1cXHgwOFxceDBCXFx4MENcXHgwRS1cXHgxRlxceDIxXFx4MjMtXFx4NUJcXHg1RC1cXHg3Rl18KD86XFx4NUNbXFx4MDAtXFx4N0ZdKSkqXFx4MjIpKSkqQCg/Oig/Oig/IS4qW14uXXs2NCx9KSg/Oig/Oig/OnhuLS0pP1thLXowLTldKyg/Oi1bYS16MC05XSspKlxcLil7MSwxMjZ9KXsxLH0oPzooPzpbYS16XVthLXowLTldKil8KD86KD86eG4tLSlbYS16MC05XSspKSg/Oi1bYS16MC05XSspKil8KD86XFxbKD86KD86SVB2NjooPzooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezd9KXwoPzooPyEoPzouKlthLWYwLTldWzpcXF1dKXs3LH0pKD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDV9KT86Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCw1fSk/KSkpfCg/Oig/OklQdjY6KD86KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXs1fTopfCg/Oig/ISg/Oi4qW2EtZjAtOV06KXs1LH0pKD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDN9KT86Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCwzfTopPykpKT8oPzooPzoyNVswLTVdKXwoPzoyWzAtNF1bMC05XSl8KD86MVswLTldezJ9KXwoPzpbMS05XT9bMC05XSkpKD86XFwuKD86KD86MjVbMC01XSl8KD86MlswLTRdWzAtOV0pfCg/OjFbMC05XXsyfSl8KD86WzEtOV0/WzAtOV0pKSl7M30pKVxcXSkpJC8pO1xuXG4gICAgICAgIHZhciBoYXNFcnIgPSBmYWxzZTtcblxuICAgICAgICBpZiAoIXJlZ2V4X25hbWUudGVzdChuYW1lLnZhbCgpKSkge1xuICAgICAgICAgICAgbmFtZS5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlZ2V4X25hbWUudGVzdChxdWVzdC52YWwoKSkpIHtcbiAgICAgICAgICAgIHF1ZXN0LnBhcmVudCgpLmFkZENsYXNzKFwiZXJyb3JcIik7XG4gICAgICAgICAgICBoYXNFcnIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVnZXhfZW1haWwudGVzdChlbWFpbC52YWwoKSkpIHtcbiAgICAgICAgICAgIGVtYWlsLnBhcmVudCgpLmFkZENsYXNzKFwiZXJyb3JcIik7XG4gICAgICAgICAgICBoYXNFcnIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNFcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZS52YWwoKSxcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbC52YWwoKSxcbiAgICAgICAgICAgIHF1ZXN0OiBxdWVzdC52YWwoKVxuICAgICAgICB9O1xuXG5cbiAgICAgICAgbmFtZS52YWwoXCJcIik7XG4gICAgICAgIHF1ZXN0LnZhbChcIlwiKTtcbiAgICAgICAgZW1haWwudmFsKFwiXCIpO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiL3Rlby9hamF4LWhhbmRsZXIvXCIsXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7ZGF0YTogZGF0YX0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgVUlraXQub2ZmY2FudmFzLmhpZGUoW2ZvcmNlID0gZmFsc2VdKTtcbiAgICAgICAgICAgICAgICBVSWtpdC5ub3RpZnkoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAocmVzdWx0ID09IFwic3VjY2Vzc1wiKSA/ICfQktCw0YjQtSDRgdC+0L7QsdGJ0LXQvdC40LUg0YPRgdC/0LXRiNC90L4g0L7RgtC/0YDQsNCy0LvQtdC90L4nIDogJ9Ce0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjycsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAzMDAwLFxuICAgICAgICAgICAgICAgICAgICBwb3M6ICdib3R0b20tY2VudGVyJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgVUlraXQubm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ9Ce0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjycsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAzMDAwLFxuICAgICAgICAgICAgICAgICAgICBwb3M6ICdib3R0b20tY2VudGVyJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cblxuXG4gICAgJChcIi5pbnB1dGZpbGVfYnV0dG9uXCIpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBidXR0b24gPSAkKHRoaXMpLmNsb3Nlc3QoXCIuZmVlZGJhY2tfZm9ybV9pbnB1dGZpbGVfYmxvY2tcIikuZmluZChcIi5pbnB1dGZpbGVfaW5wdXRcIik7XG4gICAgICAgIGJ1dHRvbi50cmlnZ2VyKFwiY2xpY2tcIik7XG4gICAgfSk7XG5cbiAgICAkKFwiLmlucHV0ZmlsZV9pbnB1dFwiKS5jaGFuZ2UoZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHZhbCA9ICQodGhpcykudmFsKCk7XG5cbiAgICAgICAgdmFyIGh0bWwgPSB2YWw7XG4gICAgICAgIHZhciByZWc9IG5ldyBSZWdFeHAoXCJbXipdKFxcLnR4dHxcXC5qcGd8XFwucG5nfFxcLnppcHxcXC5yYXJ8XFwuZG9jfFxcLmRvY3h8XFwueGxzfFxcLnhsc3h8XFwucGRmKVwiLCAnaScpO1xuICAgICAgICBpZiAoIXJlZy50ZXN0KHZhbCkpIHtcbiAgICAgICAgICAgIGh0bWwgPSBcIjxzcGFuIGNsYXNzPVxcXCJyZWRcXFwiPtCd0LXQstC10YDQvdC+0LUg0YDQsNGB0YjQuNGA0LXQvdC40LUg0YTQsNC50LvQsDwvc3Bhbj5cIjtcbiAgICAgICAgICAgICQodGhpcykudmFsKFwiXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLmZpbGVzWzBdLnNpemU7XG4gICAgICAgICAgICBpZiAoc2l6ZSA+IDUgKiAxMDI0ICogMTAyNCl7XG4gICAgICAgICAgICAgICAgaHRtbCA9IFwiPHNwYW4gY2xhc3M9XFxcInJlZFxcXCI+0KDQsNC30LzQtdGAINGE0LDQudC70LAg0L/RgNC10LLRi9GI0LDQtdGCIDUg0JzQsTwvc3Bhbj5cIjtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbChcIlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFsX21hcyA9IHZhbC5zcGxpdChcIlxcXFxcIik7XG4gICAgICAgICAgICAgICAgaHRtbCA9IHZhbF9tYXNbdmFsX21hcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KFwiLmZlZWRiYWNrX2Zvcm1faW5wdXRmaWxlX2Jsb2NrXCIpLmZpbmQoXCIuaW5wdXRmaWxlX2NhcHRpb25cIikuaHRtbChodG1sKS5hdHRyKFwidGl0bGVcIiwgdmFsKTtcbiAgICB9KTtcblxuICAgICQoXCIuZmVlZGJhY2tfcmFkaW9faW5wdXRcIikuY2hhbmdlKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBibG9ja2lkID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgJChcIi5mZWVkYmFja19jb250YWluZXJcIikubm90KFwiI2ZlZWRiYWNrX1wiICsgYmxvY2tpZCkuc2xpZGVVcCgzMDApO1xuICAgICAgICAkKFwiI2ZlZWRiYWNrX1wiICsgYmxvY2tpZCkuc2xpZGVEb3duKDMwMCk7XG4gICAgfSk7XG4gICAgJChcIi5jYW5TcGVha1wiKS5tb3VzZWVudGVyKGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdpc0ludmFsaWQnKSA9PSBcInRydWVcIikge1xuICAgICAgICAgICAgdmFyIG1zZyA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UoJCh0aGlzKVswXS5pbm5lclRleHQpO1xuICAgICAgICAgICAgc2F5KG1zZyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBzYXlUaW1lb3V0ID0gbnVsbDtcblxuICAgIGZ1bmN0aW9uIHNheSh0ZXh0KSB7XG4gICAgICAgIGlmIChzcGVlY2hTeW50aGVzaXMuc3BlYWtpbmcpIHtcbiAgICAgICAgICAgIC8vIFNwZWVjaFN5biBpcyBjdXJyZW50bHkgc3BlYWtpbmcsIGNhbmNlbCB0aGUgY3VycmVudCB1dHRlcmFuY2UocylcbiAgICAgICAgICAgIHNwZWVjaFN5bnRoZXNpcy5jYW5jZWwoKTtcblxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGRvbid0IGNyZWF0ZSBtb3JlIHRoYW4gb25lIHRpbWVvdXQuLi5cbiAgICAgICAgICAgIGlmIChzYXlUaW1lb3V0ICE9PSBudWxsKVxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzYXlUaW1lb3V0KTtcblxuICAgICAgICAgICAgc2F5VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBzYXkodGV4dCk7IH0sIDI1MCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBHb29kIHRvIGdvXG4gICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMuc3BlYWsodGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaWNvbl9pbnZhbGlkID0gJCgnLm1lbnVfX3Bob25lLWNvbnRhaW5lcl9faWNvbicpO1xuXG4gICAgJChcIi5pbnZhbGlkXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2lzSW52YWxpZCcpID09IFwidHJ1ZVwiKXtcbiAgICAgICAgICAgICQodGhpcykuY3NzKFwiZmlsbFwiLFwiYmxhY2tcIik7XG4gICAgICAgICAgICBpY29uX2ludmFsaWQuY3NzKFwiYm94LXNoYWRvd1wiLCBcIm5vbmVcIik7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdpc0ludmFsaWQnLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKHRoaXMpLmNzcyhcImZpbGxcIiwgXCIjZTlhYzQ1XCIpO1xuXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5maW5kKCcubWVudV9fcGhvbmUtY29udGFpbmVyX19pY29uJykpIHtcbiAgICAgICAgICAgICAgICBpY29uX2ludmFsaWQuY3NzKFwiYm94LXNoYWRvd1wiLCBcIndoaXRlIDBweCAwcHggNXB4IDJweFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnaXNJbnZhbGlkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnaXNJbnZhbGlkJykgPT0gXCJ0cnVlXCIpe1xuICAgICAgICAkKFwiLmludmFsaWRcIikuY3NzKFwiZmlsbFwiLFwiI2U5YWM0NVwiKTtcbiAgICAgICAgaWNvbl9pbnZhbGlkLmNzcyhcImJveC1zaGFkb3dcIiwgXCJ3aGl0ZSAwcHggMHB4IDVweCAycHhcIik7XG4gICAgfVxuXG4gICAgY2hhbmdlSGVpZ2h0TWFpbkJsb2NrKCk7XG5cbiAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hhbmdlSGVpZ2h0TWFpbkJsb2NrKClcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGNoYW5nZUhlaWdodE1haW5CbG9jaygpIHtcbiAgICAgICAgdmFyIGdyb3VwID0gJCgnI2dyaWQtZ3JvdXAnKTtcblxuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gOTYwKVxuICAgICAgICAgICAgZ3JvdXAuaGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodCAtIDE3MCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGdyb3VwLmhlaWdodCgnaW5pdGlhbCcpXG4gICAgfVxuXG4gICAgLy8g0L7RgtC60YDRi9GC0LjQtSDQtNC10YTQvtC70YLQvdC+0LPQviDRgdC10LvQtdC60YLQsCDQv9GA0Lgg0L3QsNC20LDRgtC40Lgg0L3QsCDRgdGC0YDQtdC70L7Rh9C60YNcbiAgICAkKCcuZmVlZGJhY2tfZm9ybV9maWVsZC1hcnJvdycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5mZWVkYmFja19mb3JtX2ZpZWxkJykuZmluZCgnc2VsZWN0Jyk7XG5cbiAgICAgICAgaWYgKGRvY3VtZW50LmNyZWF0ZUV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiTW91c2VFdmVudHNcIik7XG4gICAgICAgICAgICBlLmluaXRNb3VzZUV2ZW50KFwibW91c2Vkb3duXCIsIHRydWUsIHRydWUsIHdpbmRvdywgMCwgMCwgMCwgMCwgMCwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDAsIG51bGwpO1xuICAgICAgICAgICAgZWxlbWVudFswXS5kaXNwYXRjaEV2ZW50KGUpO1xuICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuZmlyZUV2ZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50WzBdLmZpcmVFdmVudChcIm9ubW91c2Vkb3duXCIpO1xuICAgICAgICB9XG5cbiAgICB9KVxuXG4gICAgJChcIi50b192YWxpZGF0ZVwiKS5pbnB1dG1hc2soKTtcbn0pOyJdfQ==
