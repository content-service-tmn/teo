!function(a){if(!a.fn.swipeLeft){var l,p,u,g,c,s={};a(function(){var t,n,i,o=0,r=0;"MSGesture"in window&&((c=new MSGesture).target=document.body),a(document).on("MSGestureEnd gestureend",function(e){var t=1<e.originalEvent.velocityX?"Right":e.originalEvent.velocityX<-1?"Left":1<e.originalEvent.velocityY?"Down":e.originalEvent.velocityY<-1?"Up":null;t&&void 0!==s.el&&(s.el.trigger("swipe"),s.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(e){("MSPointerDown"!=e.type||d(e.originalEvent))&&(i="MSPointerDown"==e.type||"pointerdown"==e.type?e:e.originalEvent.touches[0],t=Date.now(),n=t-(s.last||t),s.el=a("tagName"in i.target?i.target:i.target.parentNode),l&&clearTimeout(l),s.x1=i.pageX,s.y1=i.pageY,0<n&&n<=250&&(s.isDoubleTap=!0),s.last=t,g=setTimeout(v,750),e.originalEvent&&e.originalEvent.pointerId&&c&&("MSPointerDown"==e.type||"pointerdown"==e.type||"touchstart"==e.type)&&c.addPointer(e.originalEvent.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){("MSPointerMove"!=e.type||d(e.originalEvent))&&(i="MSPointerMove"==e.type||"pointermove"==e.type?e:e.originalEvent.touches[0],y(),s.x2=i.pageX,s.y2=i.pageY,o+=Math.abs(s.x1-s.x2),r+=Math.abs(s.y1-s.y2))}).on("touchend MSPointerUp pointerup",function(e){("MSPointerUp"!=e.type||d(e.originalEvent))&&(y(),s.x2&&30<Math.abs(s.x1-s.x2)||s.y2&&30<Math.abs(s.y1-s.y2)?u=setTimeout(function(){var e,t,n,i;void 0!==s.el&&(s.el.trigger("swipe"),s.el.trigger("swipe"+(e=s.x1,t=s.x2,n=s.y1,i=s.y2,Math.abs(e-t)>=Math.abs(n-i)?0<e-t?"Left":"Right":0<n-i?"Up":"Down"))),s={}},0):"last"in s&&(isNaN(o)||o<30&&r<30?p=setTimeout(function(){var e=a.Event("tap");e.cancelTouch=w,void 0!==s.el&&s.el.trigger(e),s.isDoubleTap?(void 0!==s.el&&s.el.trigger("doubleTap"),s={}):l=setTimeout(function(){l=null,void 0!==s.el&&s.el.trigger("singleTap"),s={}},250)},0):s={},o=r=0))}).on("touchcancel MSPointerCancel pointercancel",w),a(window).on("scroll",w)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){a.fn[t]=function(e){return a(this).on(t,e)}})}function v(){g=null,s.last&&(void 0!==s.el&&s.el.trigger("longTap"),s={})}function y(){g&&clearTimeout(g),g=null}function w(){l&&clearTimeout(l),p&&clearTimeout(p),u&&clearTimeout(u),g&&clearTimeout(g),l=p=u=g=null,s={}}function d(e){return e.pointerType==e.MSPOINTER_TYPE_TOUCH&&e.isPrimary}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvdG91Y2guanMiXSwibmFtZXMiOlsiJCIsImZuIiwic3dpcGVMZWZ0IiwidG91Y2hUaW1lb3V0IiwidGFwVGltZW91dCIsInN3aXBlVGltZW91dCIsImxvbmdUYXBUaW1lb3V0IiwiZ2VzdHVyZSIsInRvdWNoIiwibm93IiwiZGVsdGEiLCJmaXJzdFRvdWNoIiwiZGVsdGFYIiwiZGVsdGFZIiwid2luZG93IiwiTVNHZXN0dXJlIiwidGFyZ2V0IiwiZG9jdW1lbnQiLCJib2R5Iiwib24iLCJlIiwic3dpcGVEaXJlY3Rpb25Gcm9tVmVsb2NpdHkiLCJvcmlnaW5hbEV2ZW50IiwidmVsb2NpdHlYIiwidmVsb2NpdHlZIiwidW5kZWZpbmVkIiwiZWwiLCJ0cmlnZ2VyIiwidHlwZSIsImlzUHJpbWFyeVRvdWNoIiwidG91Y2hlcyIsIkRhdGUiLCJsYXN0IiwicGFyZW50Tm9kZSIsImNsZWFyVGltZW91dCIsIngxIiwicGFnZVgiLCJ5MSIsInBhZ2VZIiwiaXNEb3VibGVUYXAiLCJzZXRUaW1lb3V0IiwibG9uZ1RhcCIsInBvaW50ZXJJZCIsImFkZFBvaW50ZXIiLCJjYW5jZWxMb25nVGFwIiwieDIiLCJ5MiIsIk1hdGgiLCJhYnMiLCJpc05hTiIsImV2ZW50IiwiRXZlbnQiLCJjYW5jZWxUb3VjaCIsImNhbmNlbEFsbCIsImZvckVhY2giLCJldmVudE5hbWUiLCJjYWxsYmFjayIsInRoaXMiLCJwb2ludGVyVHlwZSIsIk1TUE9JTlRFUl9UWVBFX1RPVUNIIiwiaXNQcmltYXJ5IiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FLQyxTQUFVQSxHQUVULElBQUlBLEVBQUVDLEdBQUdDLFVBQVQsQ0FLQSxJQUFnQkMsRUFBY0MsRUFBWUMsRUFBY0MsRUFBb0NDLEVBQXhGQyxFQUFRLEdBZ0NaUixFQUFFLFdBQ0EsSUFBSVMsRUFBS0MsRUFBK0JDLEVBQXhCQyxFQUFTLEVBQUdDLEVBQVMsRUFFakMsY0FBZUMsVUFDakJQLEVBQVUsSUFBSVEsV0FDTkMsT0FBU0Ms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QUFNa0IsSUFBbUJsQixFQUFNa0IsR0FBR0MsUUFBUXVCLEdBRzNDMUMsRUFBTStCLGtCQUNVZCxJQUFiakIsRUFBTWtCLElBQW1CbEIsRUFBTWtCLEdBQUdDLFFBQVEsYUFDL0NuQixFQUFRLElBS1JMLEVBQWVxQyxXQUFXLFdBQ3hCckMsRUFBZSxVQUNHc0IsSUFBYmpCLEVBQU1rQixJQUFtQmxCLEVBQU1rQixHQUFHQyxRQUFRLGFBQy9DbkIsRUFBUSxJQUNQLE1BRUosR0FFSEEsRUFBUSxHQUVWSSxFQUFTQyxFQUFTLE1BTXJCTSxHQUFHLDRDQUE2Q2tDLEdBSW5EckQsRUFBRWMsUUFBUUssR0FBRyxTQUFVa0MsS0FHekIsQ0FBQyxRQUFTLFlBQWEsYUFBYyxVQUFXLFlBQWEsWUFBYSxNQUFPLFlBQWEsV0FBV0MsUUFBUSxTQUFTQyxHQUN4SHZELEVBQUVDLEdBQUdzRCxHQUFhLFNBQVNDLEdBQVcsT0FBT3hELEVBQUV5RCxNQUFNdEMsR0FBR29DLEVBQVdDLE1BMUpyRSxTQUFTZixJQUNQbkMsRUFBaUIsS0FDYkUsRUFBTXdCLFlBQ1VQLElBQWJqQixFQUFNa0IsSUFBbUJsQixFQUFNa0IsR0FBR0MsUUFBUSxXQUMvQ25CLEVBQVEsSUFJWixTQUFTb0MsSUFDSHRDLEdBQWdCNEIsYUFBYTVCLEdBQ2pDQSxFQUFpQixLQUduQixTQUFTK0MsSUFDSGxELEdBQWdCK0IsYUFBYS9CLEdBQzdCQyxHQUFnQjhCLGFBQWE5QixHQUM3QkMsR0FBZ0I2QixhQUFhN0IsR0FDN0JDLEdBQWdCNEIsYUFBYTVCLEdBQ2pDSCxFQUFlQyxFQUFhQyxFQUFlQyxFQUFpQixLQUM1REUsRUFBUSxHQUdWLFNBQVNxQixFQUFlcUIsR0FDdEIsT0FBT0EsRUFBTVEsYUFBZVIsRUFBTVMsc0JBQXdCVCxFQUFNVSxXQXBDbkUsQ0F5S0VDIiwiZmlsZSI6ImNvcmUvdG91Y2guanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgVUlraXQgMi4yNy4yIHwgaHR0cDovL3d3dy5nZXR1aWtpdC5jb20gfCAoYykgMjAxNCBZT090aGVtZSB8IE1JVCBMaWNlbnNlICovXG4vLyAgQmFzZWQgb24gWmVwdG9zIHRvdWNoLmpzXG4vLyAgaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9tYWRyb2JieS96ZXB0by9tYXN0ZXIvc3JjL3RvdWNoLmpzXG4vLyAgWmVwdG8uanMgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbjsoZnVuY3Rpb24oJCl7XG5cbiAgaWYgKCQuZm4uc3dpcGVMZWZ0KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cblxuICB2YXIgdG91Y2ggPSB7fSwgdG91Y2hUaW1lb3V0LCB0YXBUaW1lb3V0LCBzd2lwZVRpbWVvdXQsIGxvbmdUYXBUaW1lb3V0LCBsb25nVGFwRGVsYXkgPSA3NTAsIGdlc3R1cmU7XG5cbiAgZnVuY3Rpb24gc3dpcGVEaXJlY3Rpb24oeDEsIHgyLCB5MSwgeTIpIHtcbiAgICByZXR1cm4gTWF0aC5hYnMoeDEgLSB4MikgPj0gTWF0aC5hYnMoeTEgLSB5MikgPyAoeDEgLSB4MiA+IDAgPyAnTGVmdCcgOiAnUmlnaHQnKSA6ICh5MSAtIHkyID4gMCA/ICdVcCcgOiAnRG93bicpO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9uZ1RhcCgpIHtcbiAgICBsb25nVGFwVGltZW91dCA9IG51bGw7XG4gICAgaWYgKHRvdWNoLmxhc3QpIHtcbiAgICAgIGlmICggdG91Y2guZWwgIT09IHVuZGVmaW5lZCApIHRvdWNoLmVsLnRyaWdnZXIoJ2xvbmdUYXAnKTtcbiAgICAgIHRvdWNoID0ge307XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsTG9uZ1RhcCgpIHtcbiAgICBpZiAobG9uZ1RhcFRpbWVvdXQpIGNsZWFyVGltZW91dChsb25nVGFwVGltZW91dCk7XG4gICAgbG9uZ1RhcFRpbWVvdXQgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsQWxsKCkge1xuICAgIGlmICh0b3VjaFRpbWVvdXQpICAgY2xlYXJUaW1lb3V0KHRvdWNoVGltZW91dCk7XG4gICAgaWYgKHRhcFRpbWVvdXQpICAgICBjbGVhclRpbWVvdXQodGFwVGltZW91dCk7XG4gICAgaWYgKHN3aXBlVGltZW91dCkgICBjbGVhclRpbWVvdXQoc3dpcGVUaW1lb3V0KTtcbiAgICBpZiAobG9uZ1RhcFRpbWVvdXQpIGNsZWFyVGltZW91dChsb25nVGFwVGltZW91dCk7XG4gICAgdG91Y2hUaW1lb3V0ID0gdGFwVGltZW91dCA9IHN3aXBlVGltZW91dCA9IGxvbmdUYXBUaW1lb3V0ID0gbnVsbDtcbiAgICB0b3VjaCA9IHt9O1xuICB9XG5cbiAgZnVuY3Rpb24gaXNQcmltYXJ5VG91Y2goZXZlbnQpe1xuICAgIHJldHVybiBldmVudC5wb2ludGVyVHlwZSA9PSBldmVudC5NU1BPSU5URVJfVFlQRV9UT1VDSCAmJiBldmVudC5pc1ByaW1hcnk7XG4gIH1cblxuICAkKGZ1bmN0aW9uKCl7XG4gICAgdmFyIG5vdywgZGVsdGEsIGRlbHRhWCA9IDAsIGRlbHRhWSA9IDAsIGZpcnN0VG91Y2g7XG5cbiAgICBpZiAoJ01TR2VzdHVyZScgaW4gd2luZG93KSB7XG4gICAgICBnZXN0dXJlID0gbmV3IE1TR2VzdHVyZSgpO1xuICAgICAgZ2VzdHVyZS50YXJnZXQgPSBkb2N1bWVudC5ib2R5O1xuICAgIH1cblxuICAgICQoZG9jdW1lbnQpXG4gICAgICAub24oJ01TR2VzdHVyZUVuZCBnZXN0dXJlZW5kJywgZnVuY3Rpb24oZSl7XG5cbiAgICAgICAgdmFyIHN3aXBlRGlyZWN0aW9uRnJvbVZlbG9jaXR5ID0gZS5vcmlnaW5hbEV2ZW50LnZlbG9jaXR5WCA+IDEgPyAnUmlnaHQnIDogZS5vcmlnaW5hbEV2ZW50LnZlbG9jaXR5WCA8IC0xID8gJ0xlZnQnIDogZS5vcmlnaW5hbEV2ZW50LnZlbG9jaXR5WSA+IDEgPyAnRG93bicgOiBlLm9yaWdpbmFsRXZlbnQudmVsb2NpdHlZIDwgLTEgPyAnVXAnIDogbnVsbDtcblxuICAgICAgICBpZiAoc3dpcGVEaXJlY3Rpb25Gcm9tVmVsb2NpdHkgJiYgdG91Y2guZWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRvdWNoLmVsLnRyaWdnZXIoJ3N3aXBlJyk7XG4gICAgICAgICAgdG91Y2guZWwudHJpZ2dlcignc3dpcGUnKyBzd2lwZURpcmVjdGlvbkZyb21WZWxvY2l0eSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAvLyBNU1BvaW50ZXJEb3duOiBmb3IgSUUxMFxuICAgICAgLy8gcG9pbnRlcmRvd246IGZvciBJRTExXG4gICAgICAub24oJ3RvdWNoc3RhcnQgTVNQb2ludGVyRG93biBwb2ludGVyZG93bicsIGZ1bmN0aW9uKGUpe1xuXG4gICAgICAgIGlmKGUudHlwZSA9PSAnTVNQb2ludGVyRG93bicgJiYgIWlzUHJpbWFyeVRvdWNoKGUub3JpZ2luYWxFdmVudCkpIHJldHVybjtcblxuICAgICAgICBmaXJzdFRvdWNoID0gKGUudHlwZSA9PSAnTVNQb2ludGVyRG93bicgfHwgZS50eXBlID09ICdwb2ludGVyZG93bicpID8gZSA6IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdO1xuXG4gICAgICAgIG5vdyAgICAgID0gRGF0ZS5ub3coKTtcbiAgICAgICAgZGVsdGEgICAgPSBub3cgLSAodG91Y2gubGFzdCB8fCBub3cpO1xuICAgICAgICB0b3VjaC5lbCA9ICQoJ3RhZ05hbWUnIGluIGZpcnN0VG91Y2gudGFyZ2V0ID8gZmlyc3RUb3VjaC50YXJnZXQgOiBmaXJzdFRvdWNoLnRhcmdldC5wYXJlbnROb2RlKTtcblxuICAgICAgICBpZih0b3VjaFRpbWVvdXQpIGNsZWFyVGltZW91dCh0b3VjaFRpbWVvdXQpO1xuXG4gICAgICAgIHRvdWNoLngxID0gZmlyc3RUb3VjaC5wYWdlWDtcbiAgICAgICAgdG91Y2gueTEgPSBmaXJzdFRvdWNoLnBhZ2VZO1xuXG4gICAgICAgIGlmIChkZWx0YSA+IDAgJiYgZGVsdGEgPD0gMjUwKSB0b3VjaC5pc0RvdWJsZVRhcCA9IHRydWU7XG5cbiAgICAgICAgdG91Y2gubGFzdCA9IG5vdztcbiAgICAgICAgbG9uZ1RhcFRpbWVvdXQgPSBzZXRUaW1lb3V0KGxvbmdUYXAsIGxvbmdUYXBEZWxheSk7XG5cbiAgICAgICAgLy8gYWRkcyB0aGUgY3VycmVudCB0b3VjaCBjb250YWN0IGZvciBJRSBnZXN0dXJlIHJlY29nbml0aW9uXG4gICAgICAgIGlmIChlLm9yaWdpbmFsRXZlbnQgJiYgZS5vcmlnaW5hbEV2ZW50LnBvaW50ZXJJZCAmJiBnZXN0dXJlICYmICggZS50eXBlID09ICdNU1BvaW50ZXJEb3duJyB8fCBlLnR5cGUgPT0gJ3BvaW50ZXJkb3duJyB8fCBlLnR5cGUgPT0gJ3RvdWNoc3RhcnQnICkgKSB7XG4gICAgICAgICAgZ2VzdHVyZS5hZGRQb2ludGVyKGUub3JpZ2luYWxFdmVudC5wb2ludGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgIH0pXG4gICAgICAvLyBNU1BvaW50ZXJNb3ZlOiBmb3IgSUUxMFxuICAgICAgLy8gcG9pbnRlcm1vdmU6IGZvciBJRTExXG4gICAgICAub24oJ3RvdWNobW92ZSBNU1BvaW50ZXJNb3ZlIHBvaW50ZXJtb3ZlJywgZnVuY3Rpb24oZSl7XG5cbiAgICAgICAgaWYgKGUudHlwZSA9PSAnTVNQb2ludGVyTW92ZScgJiYgIWlzUHJpbWFyeVRvdWNoKGUub3JpZ2luYWxFdmVudCkpIHJldHVybjtcblxuICAgICAgICBmaXJzdFRvdWNoID0gKGUudHlwZSA9PSAnTVNQb2ludGVyTW92ZScgfHwgZS50eXBlID09ICdwb2ludGVybW92ZScpID8gZSA6IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdO1xuXG4gICAgICAgIGNhbmNlbExvbmdUYXAoKTtcbiAgICAgICAgdG91Y2gueDIgPSBmaXJzdFRvdWNoLnBhZ2VYO1xuICAgICAgICB0b3VjaC55MiA9IGZpcnN0VG91Y2gucGFnZVk7XG5cbiAgICAgICAgZGVsdGFYICs9IE1hdGguYWJzKHRvdWNoLngxIC0gdG91Y2gueDIpO1xuICAgICAgICBkZWx0YVkgKz0gTWF0aC5hYnModG91Y2gueTEgLSB0b3VjaC55Mik7XG4gICAgICB9KVxuICAgICAgLy8gTVNQb2ludGVyVXA6IGZvciBJRTEwXG4gICAgICAvLyBwb2ludGVydXA6IGZvciBJRTExXG4gICAgICAub24oJ3RvdWNoZW5kIE1TUG9pbnRlclVwIHBvaW50ZXJ1cCcsIGZ1bmN0aW9uKGUpe1xuXG4gICAgICAgIGlmIChlLnR5cGUgPT0gJ01TUG9pbnRlclVwJyAmJiAhaXNQcmltYXJ5VG91Y2goZS5vcmlnaW5hbEV2ZW50KSkgcmV0dXJuO1xuXG4gICAgICAgIGNhbmNlbExvbmdUYXAoKTtcblxuICAgICAgICAvLyBzd2lwZVxuICAgICAgICBpZiAoKHRvdWNoLngyICYmIE1hdGguYWJzKHRvdWNoLngxIC0gdG91Y2gueDIpID4gMzApIHx8ICh0b3VjaC55MiAmJiBNYXRoLmFicyh0b3VjaC55MSAtIHRvdWNoLnkyKSA+IDMwKSl7XG5cbiAgICAgICAgICBzd2lwZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCB0b3VjaC5lbCAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICB0b3VjaC5lbC50cmlnZ2VyKCdzd2lwZScpO1xuICAgICAgICAgICAgICB0b3VjaC5lbC50cmlnZ2VyKCdzd2lwZScgKyAoc3dpcGVEaXJlY3Rpb24odG91Y2gueDEsIHRvdWNoLngyLCB0b3VjaC55MSwgdG91Y2gueTIpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b3VjaCA9IHt9O1xuICAgICAgICAgIH0sIDApO1xuXG4gICAgICAgIC8vIG5vcm1hbCB0YXBcbiAgICAgICAgfSBlbHNlIGlmICgnbGFzdCcgaW4gdG91Y2gpIHtcblxuICAgICAgICAgIC8vIGRvbid0IGZpcmUgdGFwIHdoZW4gZGVsdGEgcG9zaXRpb24gY2hhbmdlZCBieSBtb3JlIHRoYW4gMzAgcGl4ZWxzLFxuICAgICAgICAgIC8vIGZvciBpbnN0YW5jZSB3aGVuIG1vdmluZyB0byBhIHBvaW50IGFuZCBiYWNrIHRvIG9yaWdpblxuICAgICAgICAgIGlmIChpc05hTihkZWx0YVgpIHx8IChkZWx0YVggPCAzMCAmJiBkZWx0YVkgPCAzMCkpIHtcbiAgICAgICAgICAgIC8vIGRlbGF5IGJ5IG9uZSB0aWNrIHNvIHdlIGNhbiBjYW5jZWwgdGhlICd0YXAnIGV2ZW50IGlmICdzY3JvbGwnIGZpcmVzXG4gICAgICAgICAgICAvLyAoJ3RhcCcgZmlyZXMgYmVmb3JlICdzY3JvbGwnKVxuICAgICAgICAgICAgdGFwVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgLy8gdHJpZ2dlciB1bml2ZXJzYWwgJ3RhcCcgd2l0aCB0aGUgb3B0aW9uIHRvIGNhbmNlbFRvdWNoKClcbiAgICAgICAgICAgICAgLy8gKGNhbmNlbFRvdWNoIGNhbmNlbHMgcHJvY2Vzc2luZyBvZiBzaW5nbGUgdnMgZG91YmxlIHRhcHMgZm9yIGZhc3RlciAndGFwJyByZXNwb25zZSlcbiAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gJC5FdmVudCgndGFwJyk7XG4gICAgICAgICAgICAgIGV2ZW50LmNhbmNlbFRvdWNoID0gY2FuY2VsQWxsO1xuICAgICAgICAgICAgICBpZiAoIHRvdWNoLmVsICE9PSB1bmRlZmluZWQgKSB0b3VjaC5lbC50cmlnZ2VyKGV2ZW50KTtcblxuICAgICAgICAgICAgICAvLyB0cmlnZ2VyIGRvdWJsZSB0YXAgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgICAgaWYgKHRvdWNoLmlzRG91YmxlVGFwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCB0b3VjaC5lbCAhPT0gdW5kZWZpbmVkICkgdG91Y2guZWwudHJpZ2dlcignZG91YmxlVGFwJyk7XG4gICAgICAgICAgICAgICAgdG91Y2ggPSB7fTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIHRyaWdnZXIgc2luZ2xlIHRhcCBhZnRlciAyNTBtcyBvZiBpbmFjdGl2aXR5XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRvdWNoVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgIHRvdWNoVGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICBpZiAoIHRvdWNoLmVsICE9PSB1bmRlZmluZWQgKSB0b3VjaC5lbC50cmlnZ2VyKCdzaW5nbGVUYXAnKTtcbiAgICAgICAgICAgICAgICAgIHRvdWNoID0ge307XG4gICAgICAgICAgICAgICAgfSwgMjUwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvdWNoID0ge307XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlbHRhWCA9IGRlbHRhWSA9IDA7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAvLyB3aGVuIHRoZSBicm93c2VyIHdpbmRvdyBsb3NlcyBmb2N1cyxcbiAgICAgIC8vIGZvciBleGFtcGxlIHdoZW4gYSBtb2RhbCBkaWFsb2cgaXMgc2hvd24sXG4gICAgICAvLyBjYW5jZWwgYWxsIG9uZ29pbmcgZXZlbnRzXG4gICAgICAub24oJ3RvdWNoY2FuY2VsIE1TUG9pbnRlckNhbmNlbCBwb2ludGVyY2FuY2VsJywgY2FuY2VsQWxsKTtcblxuICAgIC8vIHNjcm9sbGluZyB0aGUgd2luZG93IGluZGljYXRlcyBpbnRlbnRpb24gb2YgdGhlIHVzZXJcbiAgICAvLyB0byBzY3JvbGwsIG5vdCB0YXAgb3Igc3dpcGUsIHNvIGNhbmNlbCBhbGwgb25nb2luZyBldmVudHNcbiAgICAkKHdpbmRvdykub24oJ3Njcm9sbCcsIGNhbmNlbEFsbCk7XG4gIH0pO1xuXG4gIFsnc3dpcGUnLCAnc3dpcGVMZWZ0JywgJ3N3aXBlUmlnaHQnLCAnc3dpcGVVcCcsICdzd2lwZURvd24nLCAnZG91YmxlVGFwJywgJ3RhcCcsICdzaW5nbGVUYXAnLCAnbG9uZ1RhcCddLmZvckVhY2goZnVuY3Rpb24oZXZlbnROYW1lKXtcbiAgICAkLmZuW2V2ZW50TmFtZV0gPSBmdW5jdGlvbihjYWxsYmFjayl7IHJldHVybiAkKHRoaXMpLm9uKGV2ZW50TmFtZSwgY2FsbGJhY2spOyB9O1xuICB9KTtcbn0pKGpRdWVyeSk7Il19
