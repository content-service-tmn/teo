$(document).ready(function(){$(".js-input").on("focus focusout",function(e){e.preventDefault(),$(e.target).parent().toggleClass("is_focused"),"focusout"==e.type&&$(e.target).val($.trim($(e.target).val()))}),$(".js-input").on("change keyup",function(e){e.preventDefault(),""===$.trim($(e.target).val())||$(e.target).hasClass("is_filled")?$(e.target).parent().removeClass("is_filled"):$(e.target).parent().addClass("is_filled"),$(this).parent().removeClass("error")}),$(".js-phone").on("focusout",function(e){e.preventDefault();var t=$(this).val().replace(/[^0-9]/gi,"");7==t.substr(0,1)&&(t="+7"+t.substr(1,t.length-1)),$(this).val(t)});var e=$("#svg1"),t=$("#svg2"),a=$(".header__content"),n=0,s=3;t.find("polygon").click(function(){a.eq(s).toggleClass("active"),s=$(this).index()-1,a.eq(s).toggleClass("active")}).mouseover(function(){n=$(this).index()-1,e.find("polygon").eq(n).toggleClass("active")}).mouseleave(function(){n=$(this).index()-1,e.find("polygon").eq(n).toggleClass("active")});var i=$("#svg_on_mappage");i.find("polygon").mouseover(function(){n=$(this).index()-1,i.find("polygon").eq(n).toggleClass("active")}).mouseleave(function(){n=$(this).index()-1,i.find("polygon").eq(n).toggleClass("active")}).click(function(){n=$(this).index()-1,window.location.replace(i.find("polygon").eq(n).attr("data-link"))}),$("#submit_form").click(function(e){e.preventDefault();var t=$("#callback_source").attr("data-source"),a=$("#name"),n=$("#phone"),s=$("#company"),i=$("#mail"),x=new RegExp(/\d{11}/),o=new RegExp(/.+/),l=new RegExp(/^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,})(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@)(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22))(?:\.(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\]))$/),r=!1;if(o.test(a.val())||(a.parent().addClass("error"),r=!0),x.test(n.val())||(n.parent().addClass("error"),r=!0),l.test(i.val())||(i.parent().addClass("error"),r=!0),r)return!1;var c={name:a.val(),phone:n.val(),company:s.val(),email:i.val()};null!=t&&(c.from=t),a.val(""),n.val(""),s.val(""),i.val(""),$.ajax({url:"/teo/ajax-handler/",type:"POST",data:{data:c},success:function(e){UIkit.offcanvas.hide([force=!1]),UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено":"Ошибка отправки сообщения",status:e,timeout:3e3,pos:"bottom-center"})},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}),$(".proposal_request").click(function(){$("#callback_source").attr("data-source",$(this).attr("data-source"))}),$("#submit_form2").click(function(e){e.preventDefault();var t=$("#name9"),a=$("#text9"),n=$("#mail9"),s=new RegExp(/.+/),i=new RegExp(/^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,})(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@)(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22))(?:\.(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\]))$/),x=!1;if(s.test(t.val())||(t.parent().addClass("error"),x=!0),s.test(a.val())||(a.parent().addClass("error"),x=!0),i.test(n.val())||(n.parent().addClass("error"),x=!0),x)return!1;var o={name:t.val(),email:n.val(),quest:a.val()};t.val(""),a.val(""),n.val(""),$.ajax({url:"/teo/ajax-handler/",type:"POST",data:{data:o},success:function(e){UIkit.offcanvas.hide([force=!1]),UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено":"Ошибка отправки сообщения",status:e,timeout:3e3,pos:"bottom-center"})},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}),$(".inputfile_button").click(function(){$(this).closest(".feedback_form_inputfile_block").find(".inputfile_input").trigger("click")}),$(".inputfile_input").change(function(){var e=$(this).val(),t=e;new RegExp("[^*](.txt|.jpg|.png|.zip|.rar|.doc|.docx|.xls|.xlsx|.pdf)","i").test(e)?5242880<this.files[0].size?(t='<span class="red">Размер файла превышает 5 Мб</span>',$(this).val("")):(val_mas=e.split("\\"),t=val_mas[val_mas.length-1]):(t='<span class="red">Неверное расширение файла</span>',$(this).val(""));$(this).closest(".feedback_form_inputfile_block").find(".inputfile_caption").html(t).attr("title",e)}),$(".feedback_radio_input").change(function(){var e=$(this).val();$(".feedback_container").not("#feedback_"+e).slideUp(300),$("#feedback_"+e).slideDown(300)}),$(".canSpeak").mouseenter(function(){"true"==sessionStorage.getItem("isInvalid")&&function e(t){speechSynthesis.speaking?(speechSynthesis.cancel(),null!==x&&clearTimeout(x),x=setTimeout(function(){e(t)},250)):speechSynthesis.speak(t)}(new SpeechSynthesisUtterance($(this)[0].innerText))});var x=null;var o=$(".menu__phone-container__icon");function l(){var e=$("#grid-group");960<=window.innerWidth?e.height(window.innerHeight-170):e.height("initial")}$(".invalid").click(function(){"true"==sessionStorage.getItem("isInvalid")?($(this).css("fill","black"),o.css("box-shadow","none"),sessionStorage.setItem("isInvalid",!1)):($(this).css("fill","#e9ac45"),$(this).find(".menu__phone-container__icon")&&o.css("box-shadow","white 0px 0px 5px 2px"),sessionStorage.setItem("isInvalid",!0))}),"true"==sessionStorage.getItem("isInvalid")&&($(".invalid").css("fill","#e9ac45"),o.css("box-shadow","white 0px 0px 5px 2px")),l(),$(window).resize(function(){l()}),$(".feedback_form_field-arrow").click(function(){var e=$(this).closest(".feedback_form_field").find("select");if(document.createEvent){var t=document.createEvent("MouseEvents");t.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e[0].dispatchEvent(t)}else e.fireEvent&&e[0].fireEvent("onmousedown")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBsYXRlLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5Iiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJwYXJlbnQiLCJ0b2dnbGVDbGFzcyIsInR5cGUiLCJ2YWwiLCJ0cmltIiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwidGhpcyIsInJlcGxhY2UiLCJzdWJzdHIiLCJsZW5ndGgiLCJzdmcxIiwic3ZnMiIsImNvbnRlbnRzIiwiaSIsImoiLCJmaW5kIiwiY2xpY2siLCJlcSIsImluZGV4IiwibW91c2VvdmVyIiwibW91c2VsZWF2ZSIsInN2Z19vbl9wYWdlIiwid2luZG93IiwibG9jYXRpb24iLCJhdHRyIiwiZnJvbSIsIm5hbWUiLCJwaG9uZSIsImNvbXBhbnkiLCJlbWFpbCIsInJlZ2V4X3Bob25lIiwiUmVnRXhwIiwicmVnZXhfbmFtZSIsInJlZ2V4X2VtYWlsIiwiaGFzRXJyIiwidGVzdCIsImRhdGEiLCJ1bmRlZmluZWQiLCJhamF4IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsIlVJa2l0Iiwib2ZmY2FudmFzIiwiaGlkZSIsImZvcmNlIiwibm90aWZ5IiwibWVzc2FnZSIsInN0YXR1cyIsInRpbWVvdXQiLCJwb3MiLCJlcnJvciIsInF1ZXN0IiwiY2xvc2VzdCIsInRyaWdnZXIiLCJjaGFuZ2UiLCJodG1sIiwiZmlsZXMiLCJzaXplIiwidmFsX21hcyIsInNwbGl0IiwiYmxvY2tpZCIsIm5vdCIsInNsaWRlVXAiLCJzbGlkZURvd24iLCJtb3VzZWVudGVyIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwic2F5IiwidGV4dCIsInNwZWVjaFN5bnRoZXNpcyIsInNwZWFraW5nIiwiY2FuY2VsIiwic2F5VGltZW91dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzcGVhayIsIlNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSIsImlubmVyVGV4dCIsImljb25faW52YWxpZCIsImNoYW5nZUhlaWdodE1haW5CbG9jayIsImdyb3VwIiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiY3NzIiwic2V0SXRlbSIsInJlc2l6ZSIsImVsZW1lbnQiLCJjcmVhdGVFdmVudCIsImluaXRNb3VzZUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImZpcmVFdmVudCJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUVDLFVBQVVDLE1BQU0sV0FDaEJGLEVBQUUsYUFBYUcsR0FBRyxpQkFBa0IsU0FBU0MsR0FDdkNBLEVBQUVDLGlCQUNGTCxFQUFFSSxFQUFFRSxRQUFRQyxTQUFTQyxZQUFZLGNBQ3BCLFlBQVZKLEVBQUVLLE1BQ0RULEVBQUVJLEVBQUVFLFFBQVFJLElBQUlWLEVBQUVXLEtBQUtYLEVBQUVJLEVBQUVFLFFBQVFJLFVBRzNDVixFQUFFLGFBQWFHLEdBQUcsZUFBZ0IsU0FBU0MsR0FDdkNBLEVBQUVDLGlCQUMrQixLQUE5QkwsRUFBRVcsS0FBS1gsRUFBRUksRUFBRUUsUUFBUUksUUFBa0JWLEVBQUVJLEVBQUVFLFFBQVFNLFNBQVMsYUFHekRaLEVBQUVJLEVBQUVFLFFBQVFDLFNBQVNNLFlBQVksYUFGakNiLEVBQUVJLEVBQUVFLFFBQVFDLFNBQVNPLFNBQVMsYUFJbENkLEVBQUVlLE1BQU1SLFNBQVNNLFlBQVksV0FFakNiLEVBQUUsYUFBYUcsR0FBRyxXQUFZLFNBQVNDLEdBQ25DQSxFQUFFQyxpQkFDRixJQUFJSyxFQUFNVixFQUFFZSxNQUFNTCxNQUFNTSxRQUFRLFdBQVcsSUFDcEIsR0FBcEJOLEVBQUlPLE9BQU8sRUFBRyxLQUNiUCxFQUFNLEtBQU9BLEVBQUlPLE9BQU8sRUFBR1AsRUFBSVEsT0FBUyxJQUU1Q2xCLEVBQUVlLE1BQU1MLElBQUlBLEtBR2hCLElBQUlTLEVBQU9uQixFQUFFLFNBQ1RvQixFQUFPcEIsRUFBRSxTQUNUcUIsRUFBV3JCLEVBQUUsb0JBQ2JzQixFQUFJLEVBQ0pDLEVBQUksRUFDUkgsRUFBS0ksS0FBSyxXQUFXQyxNQUFNLFdBQ3pCSixF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T0FBTyxXQUN6Qk4sRUFBYU0sSUFBSSxhQUFjLDBCQUduQ0wsSUFFQXpGLEVBQUUrQixRQUFRaUUsT0FBTyxXQUNiUCxNQWFKekYsRUFBRSw4QkFBOEJ5QixNQUFNLFdBQ2xDLElBQUl3RSxFQUFVakcsRUFBRWUsTUFBTStDLFFBQVEsd0JBQXdCdEMsS0FBSyxVQUUzRCxHQUFJdkIsU0FBU2lHLFlBQWEsQ0FDdEIsSUFBSTlGLEVBQUlILFNBQVNpRyxZQUFZLGVBQzdCOUYsRUFBRStGLGVBQWUsYUFBYSxHQUFNLEVBQU1wRSxPQUFRLEVBQUcsRUFBRyxFQUFHLEVBQUcsR0FBRyxHQUFPLEdBQU8sR0FBTyxFQUFPLEVBQUcsTUFDaEdrRSxFQUFRLEdBQUdHLGNBQWNoRyxRQUNsQjZGLEVBQVFJLFdBQ2ZKLEVBQVEsR0FBR0ksVUFBVSIsImZpbGUiOiJ0ZW1wbGF0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAkKCcuanMtaW5wdXQnKS5vbignZm9jdXMgZm9jdXNvdXQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ2lzX2ZvY3VzZWQnKTtcbiAgICAgICAgaWYoZS50eXBlID09ICdmb2N1c291dCcpIHtcbiAgICAgICAgICAgICQoZS50YXJnZXQpLnZhbCgkLnRyaW0oJChlLnRhcmdldCkudmFsKCkpKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoJy5qcy1pbnB1dCcpLm9uKCdjaGFuZ2Uga2V5dXAnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYoJC50cmltKCQoZS50YXJnZXQpLnZhbCgpKSAhPT0gJycgJiYgISQoZS50YXJnZXQpLmhhc0NsYXNzKCdpc19maWxsZWQnKSkge1xuICAgICAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCkuYWRkQ2xhc3MoJ2lzX2ZpbGxlZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2lzX2ZpbGxlZCcpO1xuICAgICAgICB9XG4gICAgICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJlcnJvclwiKTtcbiAgICB9KTtcbiAgICAkKCcuanMtcGhvbmUnKS5vbignZm9jdXNvdXQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIHZhbCA9ICQodGhpcykudmFsKCkucmVwbGFjZSgvW14wLTldL2dpLCcnKTtcbiAgICAgICAgaWYodmFsLnN1YnN0cigwLCAxKSA9PSA3KSB7XG4gICAgICAgICAgICB2YWwgPSAnKzcnICsgdmFsLnN1YnN0cigxLCB2YWwubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgJCh0aGlzKS52YWwodmFsKTtcbiAgICB9KTtcblxuICAgIHZhciBzdmcxID0gJCgnI3N2ZzEnKTtcbiAgICB2YXIgc3ZnMiA9ICQoJyNzdmcyJyk7XG4gICAgdmFyIGNvbnRlbnRzID0gJCgnLmhlYWRlcl9fY29udGVudCcpO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgaiA9IDM7XG4gICAgc3ZnMi5maW5kKCdwb2x5Z29uJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICBjb250ZW50cy5lcShqKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICBqID0gJCh0aGlzKS5pbmRleCgpLTE7XG4gICAgICBjb250ZW50cy5lcShqKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgfSlcbiAgICAubW91c2VvdmVyKGZ1bmN0aW9uKCkge1xuICAgICAgaSA9ICQodGhpcykuaW5kZXgoKS0xO1xuICAgICAgc3ZnMS5maW5kKCdwb2x5Z29uJykuZXEoaSkudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pXG4gICAgLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7XG4gICAgICBpID0gJCh0aGlzKS5pbmRleCgpLTE7XG4gICAgICBzdmcxLmZpbmQoJ3BvbHlnb24nKS5lcShpKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICB2YXIgc3ZnX29uX3BhZ2UgPSAkKFwiI3N2Z19vbl9tYXBwYWdlXCIpO1xuICAgIHN2Z19vbl9wYWdlLmZpbmQoJ3BvbHlnb24nKVxuICAgICAgICAubW91c2VvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaSA9ICQodGhpcykuaW5kZXgoKS0xO1xuICAgICAgICBzdmdfb25fcGFnZS5maW5kKCdwb2x5Z29uJykuZXEoaSkudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KVxuICAgICAgICAubW91c2VsZWF2ZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGkgPSAkKHRoaXMpLmluZGV4KCktMTtcbiAgICAgICAgICAgIHN2Z19vbl9wYWdlLmZpbmQoJ3BvbHlnb24nKS5lcShpKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpID0gJCh0aGlzKS5pbmRleCgpLTE7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShzdmdfb25fcGFnZS5maW5kKCdwb2x5Z29uJykuZXEoaSkuYXR0cihcImRhdGEtbGlua1wiKSk7XG4gICAgICAgIH0pO1xuXG4gICAgJChcIiNzdWJtaXRfZm9ybVwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGZyb20gPSAkKFwiI2NhbGxiYWNrX3NvdXJjZVwiKS5hdHRyKFwiZGF0YS1zb3VyY2VcIik7XG4gICAgICAgIHZhciBuYW1lID0gJChcIiNuYW1lXCIpO1xuICAgICAgICB2YXIgcGhvbmUgPSAkKFwiI3Bob25lXCIpO1xuICAgICAgICB2YXIgY29tcGFueSA9ICQoXCIjY29tcGFueVwiKTtcbiAgICAgICAgdmFyIGVtYWlsID0gJChcIiNtYWlsXCIpO1xuXG4gICAgICAgIHZhciByZWdleF9waG9uZSA9IG5ldyBSZWdFeHAoL1xcZHsxMX0vKTtcbiAgICAgICAgdmFyIHJlZ2V4X25hbWUgPSBuZXcgUmVnRXhwKC8uKy8pO1xuICAgICAgICB2YXIgcmVnZXhfZW1haWwgPSBuZXcgUmVnRXhwKC9eKD8hKD86KD86XFx4MjI/XFx4NUNbXFx4MDAtXFx4N0VdXFx4MjI/KXwoPzpcXHgyMj9bXlxceDVDXFx4MjJdXFx4MjI/KSl7MjU1LH0pKD8hKD86KD86XFx4MjI/XFx4NUNbXFx4MDAtXFx4N0VdXFx4MjI/KXwoPzpcXHgyMj9bXlxceDVDXFx4MjJdXFx4MjI/KSl7NjUsfUApKD86KD86W1xceDIxXFx4MjMtXFx4MjdcXHgyQVxceDJCXFx4MkRcXHgyRi1cXHgzOVxceDNEXFx4M0ZcXHg1RS1cXHg3RV0rKXwoPzpcXHgyMig/OltcXHgwMS1cXHgwOFxceDBCXFx4MENcXHgwRS1cXHgxRlxceDIxXFx4MjMtXFx4NUJcXHg1RC1cXHg3Rl18KD86XFx4NUNbXFx4MDAtXFx4N0ZdKSkqXFx4MjIpKSg/OlxcLig/Oig/OltcXHgyMVxceDIzLVxceDI3XFx4MkFcXHgyQlxceDJEXFx4MkYtXFx4MzlcXHgzRFxceDNGXFx4NUUtXFx4N0VdKyl8KD86XFx4MjIoPzpbXFx4MDEtXFx4MDhcXHgwQlxceDBDXFx4MEUtXFx4MUZcXHgyMVxceDIzLVxceDVCXFx4NUQtXFx4N0ZdfCg/OlxceDVDW1xceDAwLVxceDdGXSkpKlxceDIyKSkpKkAoPzooPzooPyEuKlteLl17NjQsfSkoPzooPzooPzp4bi0tKT9bYS16MC05XSsoPzotW2EtejAtOV0rKSpcXC4pezEsMTI2fSl7MSx9KD86KD86W2Etel1bYS16MC05XSopfCg/Oig/OnhuLS0pW2EtejAtOV0rKSkoPzotW2EtejAtOV0rKSopfCg/OlxcWyg/Oig/OklQdjY6KD86KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXs3fSl8KD86KD8hKD86LipbYS1mMC05XVs6XFxdXSl7Nyx9KSg/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCw1fSk/OjooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezAsNX0pPykpKXwoPzooPzpJUHY2Oig/Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7NX06KXwoPzooPyEoPzouKlthLWYwLTldOil7NSx9KSg/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCwzfSk/OjooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezAsM306KT8pKSk/KD86KD86MjVbMC01XSl8KD86MlswLTRdWzAtOV0pfCg/OjFbMC05XXsyfSl8KD86WzEtOV0/WzAtOV0pKSg/OlxcLig/Oig/OjI1WzAtNV0pfCg/OjJbMC00XVswLTldKXwoPzoxWzAtOV17Mn0pfCg/OlsxLTldP1swLTldKSkpezN9KSlcXF0pKSQvKTtcblxuICAgICAgICB2YXIgaGFzRXJyID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFyZWdleF9uYW1lLnRlc3QobmFtZS52YWwoKSkpIHtcbiAgICAgICAgICAgIG5hbWUucGFyZW50KCkuYWRkQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZWdleF9waG9uZS50ZXN0KHBob25lLnZhbCgpKSkge1xuICAgICAgICAgICAgcGhvbmUucGFyZW50KCkuYWRkQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZWdleF9lbWFpbC50ZXN0KGVtYWlsLnZhbCgpKSkge1xuICAgICAgICAgICAgZW1haWwucGFyZW50KCkuYWRkQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0Vycikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLnZhbCgpLFxuICAgICAgICAgICAgcGhvbmU6IHBob25lLnZhbCgpLFxuICAgICAgICAgICAgY29tcGFueTogY29tcGFueS52YWwoKSxcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbC52YWwoKVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChmcm9tICE9IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICBkYXRhLmZyb20gPSBmcm9tO1xuICAgICAgICB9XG5cbiAgICAgICAgbmFtZS52YWwoXCJcIik7XG4gICAgICAgIHBob25lLnZhbChcIlwiKTtcbiAgICAgICAgY29tcGFueS52YWwoXCJcIik7XG4gICAgICAgIGVtYWlsLnZhbChcIlwiKTtcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcIi90ZW8vYWpheC1oYW5kbGVyL1wiLFxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge2RhdGE6IGRhdGF9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIFVJa2l0Lm9mZmNhbnZhcy5oaWRlKFtmb3JjZSA9IGZhbHNlXSk7XG4gICAgICAgICAgICAgICAgVUlraXQubm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogKHJlc3VsdCA9PSBcInN1Y2Nlc3NcIikgPyAn0JLQsNGI0LUg0YHQvtC+0LHRidC10L3QuNC1INGD0YHQv9C10YjQvdC+INC+0YLQv9GA0LDQstC70LXQvdC+JyA6ICfQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Y8nLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcG9zOiAnYm90dG9tLWNlbnRlcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIFVJa2l0Lm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Y8nLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcG9zOiAnYm90dG9tLWNlbnRlcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgJChcIi5wcm9wb3NhbF9yZXF1ZXN0XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiNjYWxsYmFja19zb3VyY2VcIikuYXR0cihcImRhdGEtc291cmNlXCIsICQodGhpcykuYXR0cihcImRhdGEtc291cmNlXCIpKTtcbiAgICB9KTtcblxuICAgICQoXCIjc3VibWl0X2Zvcm0yXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgbmFtZSA9ICQoXCIjbmFtZTlcIik7XG4gICAgICAgIHZhciBxdWVzdCA9ICQoXCIjdGV4dDlcIik7XG4gICAgICAgIHZhciBlbWFpbCA9ICQoXCIjbWFpbDlcIik7XG5cbiAgICAgICAgdmFyIHJlZ2V4X25hbWUgPSBuZXcgUmVnRXhwKC8uKy8pO1xuICAgICAgICB2YXIgcmVnZXhfZW1haWwgPSBuZXcgUmVnRXhwKC9eKD8hKD86KD86XFx4MjI/XFx4NUNbXFx4MDAtXFx4N0VdXFx4MjI/KXwoPzpcXHgyMj9bXlxceDVDXFx4MjJdXFx4MjI/KSl7MjU1LH0pKD8hKD86KD86XFx4MjI/XFx4NUNbXFx4MDAtXFx4N0VdXFx4MjI/KXwoPzpcXHgyMj9bXlxceDVDXFx4MjJdXFx4MjI/KSl7NjUsfUApKD86KD86W1xceDIxXFx4MjMtXFx4MjdcXHgyQVxceDJCXFx4MkRcXHgyRi1cXHgzOVxceDNEXFx4M0ZcXHg1RS1cXHg3RV0rKXwoPzpcXHgyMig/OltcXHgwMS1cXHgwOFxceDBCXFx4MENcXHgwRS1cXHgxRlxceDIxXFx4MjMtXFx4NUJcXHg1RC1cXHg3Rl18KD86XFx4NUNbXFx4MDAtXFx4N0ZdKSkqXFx4MjIpKSg/OlxcLig/Oig/OltcXHgyMVxceDIzLVxceDI3XFx4MkFcXHgyQlxceDJEXFx4MkYtXFx4MzlcXHgzRFxceDNGXFx4NUUtXFx4N0VdKyl8KD86XFx4MjIoPzpbXFx4MDEtXFx4MDhcXHgwQlxceDBDXFx4MEUtXFx4MUZcXHgyMVxceDIzLVxceDVCXFx4NUQtXFx4N0ZdfCg/OlxceDVDW1xceDAwLVxceDdGXSkpKlxceDIyKSkpKkAoPzooPzooPyEuKlteLl17NjQsfSkoPzooPzooPzp4bi0tKT9bYS16MC05XSsoPzotW2EtejAtOV0rKSpcXC4pezEsMTI2fSl7MSx9KD86KD86W2Etel1bYS16MC05XSopfCg/Oig/OnhuLS0pW2EtejAtOV0rKSkoPzotW2EtejAtOV0rKSopfCg/OlxcWyg/Oig/OklQdjY6KD86KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXs3fSl8KD86KD8hKD86LipbYS1mMC05XVs6XFxdXSl7Nyx9KSg/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCw1fSk/OjooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezAsNX0pPykpKXwoPzooPzpJUHY2Oig/Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7NX06KXwoPzooPyEoPzouKlthLWYwLTldOil7NSx9KSg/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCwzfSk/OjooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezAsM306KT8pKSk/KD86KD86MjVbMC01XSl8KD86MlswLTRdWzAtOV0pfCg/OjFbMC05XXsyfSl8KD86WzEtOV0/WzAtOV0pKSg/OlxcLig/Oig/OjI1WzAtNV0pfCg/OjJbMC00XVswLTldKXwoPzoxWzAtOV17Mn0pfCg/OlsxLTldP1swLTldKSkpezN9KSlcXF0pKSQvKTtcblxuICAgICAgICB2YXIgaGFzRXJyID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFyZWdleF9uYW1lLnRlc3QobmFtZS52YWwoKSkpIHtcbiAgICAgICAgICAgIG5hbWUucGFyZW50KCkuYWRkQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZWdleF9uYW1lLnRlc3QocXVlc3QudmFsKCkpKSB7XG4gICAgICAgICAgICBxdWVzdC5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlZ2V4X2VtYWlsLnRlc3QoZW1haWwudmFsKCkpKSB7XG4gICAgICAgICAgICBlbWFpbC5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzRXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUudmFsKCksXG4gICAgICAgICAgICBlbWFpbDogZW1haWwudmFsKCksXG4gICAgICAgICAgICBxdWVzdDogcXVlc3QudmFsKClcbiAgICAgICAgfTtcblxuXG4gICAgICAgIG5hbWUudmFsKFwiXCIpO1xuICAgICAgICBxdWVzdC52YWwoXCJcIik7XG4gICAgICAgIGVtYWlsLnZhbChcIlwiKTtcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcIi90ZW8vYWpheC1oYW5kbGVyL1wiLFxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge2RhdGE6IGRhdGF9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIFVJa2l0Lm9mZmNhbnZhcy5oaWRlKFtmb3JjZSA9IGZhbHNlXSk7XG4gICAgICAgICAgICAgICAgVUlraXQubm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogKHJlc3VsdCA9PSBcInN1Y2Nlc3NcIikgPyAn0JLQsNGI0LUg0YHQvtC+0LHRidC10L3QuNC1INGD0YHQv9C10YjQvdC+INC+0YLQv9GA0LDQstC70LXQvdC+JyA6ICfQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Y8nLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcG9zOiAnYm90dG9tLWNlbnRlcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIFVJa2l0Lm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Y8nLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMCxcbiAgICAgICAgICAgICAgICAgICAgcG9zOiAnYm90dG9tLWNlbnRlcidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG5cblxuICAgICQoXCIuaW5wdXRmaWxlX2J1dHRvblwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYnV0dG9uID0gJCh0aGlzKS5jbG9zZXN0KFwiLmZlZWRiYWNrX2Zvcm1faW5wdXRmaWxlX2Jsb2NrXCIpLmZpbmQoXCIuaW5wdXRmaWxlX2lucHV0XCIpO1xuICAgICAgICBidXR0b24udHJpZ2dlcihcImNsaWNrXCIpO1xuICAgIH0pO1xuXG4gICAgJChcIi5pbnB1dGZpbGVfaW5wdXRcIikuY2hhbmdlKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciB2YWwgPSAkKHRoaXMpLnZhbCgpO1xuXG4gICAgICAgIHZhciBodG1sID0gdmFsO1xuICAgICAgICB2YXIgcmVnPSBuZXcgUmVnRXhwKFwiW14qXShcXC50eHR8XFwuanBnfFxcLnBuZ3xcXC56aXB8XFwucmFyfFxcLmRvY3xcXC5kb2N4fFxcLnhsc3xcXC54bHN4fFxcLnBkZilcIiwgJ2knKTtcbiAgICAgICAgaWYgKCFyZWcudGVzdCh2YWwpKSB7XG4gICAgICAgICAgICBodG1sID0gXCI8c3BhbiBjbGFzcz1cXFwicmVkXFxcIj7QndC10LLQtdGA0L3QvtC1INGA0LDRgdGI0LjRgNC10L3QuNC1INGE0LDQudC70LA8L3NwYW4+XCI7XG4gICAgICAgICAgICAkKHRoaXMpLnZhbChcIlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5maWxlc1swXS5zaXplO1xuICAgICAgICAgICAgaWYgKHNpemUgPiA1ICogMTAyNCAqIDEwMjQpe1xuICAgICAgICAgICAgICAgIGh0bWwgPSBcIjxzcGFuIGNsYXNzPVxcXCJyZWRcXFwiPtCg0LDQt9C80LXRgCDRhNCw0LnQu9CwINC/0YDQtdCy0YvRiNCw0LXRgiA1INCc0LE8L3NwYW4+XCI7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoXCJcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbF9tYXMgPSB2YWwuc3BsaXQoXCJcXFxcXCIpO1xuICAgICAgICAgICAgICAgIGh0bWwgPSB2YWxfbWFzW3ZhbF9tYXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgICQodGhpcykuY2xvc2VzdChcIi5mZWVkYmFja19mb3JtX2lucHV0ZmlsZV9ibG9ja1wiKS5maW5kKFwiLmlucHV0ZmlsZV9jYXB0aW9uXCIpLmh0bWwoaHRtbCkuYXR0cihcInRpdGxlXCIsIHZhbCk7XG4gICAgfSk7XG5cbiAgICAkKFwiLmZlZWRiYWNrX3JhZGlvX2lucHV0XCIpLmNoYW5nZShmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYmxvY2tpZCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICQoXCIuZmVlZGJhY2tfY29udGFpbmVyXCIpLm5vdChcIiNmZWVkYmFja19cIiArIGJsb2NraWQpLnNsaWRlVXAoMzAwKTtcbiAgICAgICAgJChcIiNmZWVkYmFja19cIiArIGJsb2NraWQpLnNsaWRlRG93bigzMDApO1xuICAgIH0pO1xuICAgICQoXCIuY2FuU3BlYWtcIikubW91c2VlbnRlcihmdW5jdGlvbigpe1xuICAgICAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnaXNJbnZhbGlkJykgPT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgIHZhciBtc2cgPSBuZXcgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKCQodGhpcylbMF0uaW5uZXJUZXh0KTtcbiAgICAgICAgICAgIHNheShtc2cpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgc2F5VGltZW91dCA9IG51bGw7XG5cbiAgICBmdW5jdGlvbiBzYXkodGV4dCkge1xuICAgICAgICBpZiAoc3BlZWNoU3ludGhlc2lzLnNwZWFraW5nKSB7XG4gICAgICAgICAgICAvLyBTcGVlY2hTeW4gaXMgY3VycmVudGx5IHNwZWFraW5nLCBjYW5jZWwgdGhlIGN1cnJlbnQgdXR0ZXJhbmNlKHMpXG4gICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMuY2FuY2VsKCk7XG5cbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBkb24ndCBjcmVhdGUgbW9yZSB0aGFuIG9uZSB0aW1lb3V0Li4uXG4gICAgICAgICAgICBpZiAoc2F5VGltZW91dCAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2F5VGltZW91dCk7XG5cbiAgICAgICAgICAgIHNheVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgc2F5KHRleHQpOyB9LCAyNTApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gR29vZCB0byBnb1xuICAgICAgICAgICAgc3BlZWNoU3ludGhlc2lzLnNwZWFrKHRleHQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGljb25faW52YWxpZCA9ICQoJy5tZW51X19waG9uZS1jb250YWluZXJfX2ljb24nKTtcblxuICAgICQoXCIuaW52YWxpZFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdpc0ludmFsaWQnKSA9PSBcInRydWVcIil7XG4gICAgICAgICAgICAkKHRoaXMpLmNzcyhcImZpbGxcIixcImJsYWNrXCIpO1xuICAgICAgICAgICAgaWNvbl9pbnZhbGlkLmNzcyhcImJveC1zaGFkb3dcIiwgXCJub25lXCIpO1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnaXNJbnZhbGlkJywgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJmaWxsXCIsIFwiI2U5YWM0NVwiKTtcblxuICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLm1lbnVfX3Bob25lLWNvbnRhaW5lcl9faWNvbicpKSB7XG4gICAgICAgICAgICAgICAgaWNvbl9pbnZhbGlkLmNzcyhcImJveC1zaGFkb3dcIiwgXCJ3aGl0ZSAwcHggMHB4IDVweCAycHhcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2lzSW52YWxpZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2lzSW52YWxpZCcpID09IFwidHJ1ZVwiKXtcbiAgICAgICAgJChcIi5pbnZhbGlkXCIpLmNzcyhcImZpbGxcIixcIiNlOWFjNDVcIik7XG4gICAgICAgIGljb25faW52YWxpZC5jc3MoXCJib3gtc2hhZG93XCIsIFwid2hpdGUgMHB4IDBweCA1cHggMnB4XCIpO1xuICAgIH1cblxuICAgIGNoYW5nZUhlaWdodE1haW5CbG9jaygpO1xuXG4gICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoYW5nZUhlaWdodE1haW5CbG9jaygpXG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBjaGFuZ2VIZWlnaHRNYWluQmxvY2soKSB7XG4gICAgICAgIHZhciBncm91cCA9ICQoJyNncmlkLWdyb3VwJyk7XG5cbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID49IDk2MClcbiAgICAgICAgICAgIGdyb3VwLmhlaWdodCh3aW5kb3cuaW5uZXJIZWlnaHQgLSAxNzApO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBncm91cC5oZWlnaHQoJ2luaXRpYWwnKVxuICAgIH1cblxuICAgIC8vINC+0YLQutGA0YvRgtC40LUg0LTQtdGE0L7Qu9GC0L3QvtCz0L4g0YHQtdC70LXQutGC0LAg0L/RgNC4INC90LDQttCw0YLQuNC4INC90LAg0YHRgtGA0LXQu9C+0YfQutGDXG4gICAgJCgnLmZlZWRiYWNrX2Zvcm1fZmllbGQtYXJyb3cnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gJCh0aGlzKS5jbG9zZXN0KCcuZmVlZGJhY2tfZm9ybV9maWVsZCcpLmZpbmQoJ3NlbGVjdCcpO1xuXG4gICAgICAgIGlmIChkb2N1bWVudC5jcmVhdGVFdmVudCkge1xuICAgICAgICAgICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIk1vdXNlRXZlbnRzXCIpO1xuICAgICAgICAgICAgZS5pbml0TW91c2VFdmVudChcIm1vdXNlZG93blwiLCB0cnVlLCB0cnVlLCB3aW5kb3csIDAsIDAsIDAsIDAsIDAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLCBudWxsKTtcbiAgICAgICAgICAgIGVsZW1lbnRbMF0uZGlzcGF0Y2hFdmVudChlKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LmZpcmVFdmVudCkge1xuICAgICAgICAgICAgZWxlbWVudFswXS5maXJlRXZlbnQoXCJvbm1vdXNlZG93blwiKTtcbiAgICAgICAgfVxuXG4gICAgfSlcbn0pOyJdfQ==
