!function(t){var i;window.UIkit2&&(i=t(UIkit2)),"function"==typeof define&&define.amd&&define("uikit-accordion",["uikit"],function(){return i||t(UIkit2)})}(function(n){"use strict";return n.component("accordion",{defaults:{showfirst:!0,collapse:!0,animate:!0,easing:"swing",duration:300,toggle:".uk-accordion-title",containers:".uk-accordion-content",clsactive:"uk-active"},boot:function(){n.ready(function(t){setTimeout(function(){n.$("[data-uk-accordion]",t).each(function(){var t=n.$(this);t.data("accordion")||n.accordion(t,n.Utils.options(t.attr("data-uk-accordion")))})},0)})},init:function(){var i=this;this.element.on("click.uk.accordion",this.options.toggle,function(t){t.preventDefault(),i.toggleItem(n.$(this).data("wrapper"),i.options.animate,i.options.collapse)}),this.update(!0),n.domObserve(this.element,function(t){i.element.children(i.options.containers).length&&i.update()})},toggleItem:function(t,i,e){var o=this;t.data("toggle").toggleClass(this.options.clsactive),t.data("content").toggleClass(this.options.clsactive);var a=t.data("toggle").hasClass(this.options.clsactive);e&&(this.toggle.not(t.data("toggle")).removeClass(this.options.clsactive),this.content.not(t.data("content")).removeClass(this.options.clsactive).parent().stop().css("overflow","hidden").animate({height:0},{easing:this.options.easing,duration:i?this.options.duration:0}).attr("aria-expanded","false")),t.stop().css("overflow","hidden"),i?t.animate({height:a?function(t){var i=n.$(t),e="auto";if(i.is(":visible"))e=i.outerHeight();else{var o={position:i.css("position"),visibility:i.css("visibility"),display:i.css("display")};e=i.css({position:"absolute",visibility:"hidden",display:"block"}).outerHeight(),i.css(o)}return e}(t.data("content")):0},{easing:this.options.easing,duration:this.options.duration,complete:function(){a&&(t.css({overflow:"",height:"auto"}),n.Utils.checkDisplay(t.data("content"))),o.trigger("display.uk.check")}}):(t.height(a?"auto":0),a&&(t.css({overflow:""}),n.Utils.checkDisplay(t.data("content"))),this.trigger("display.uk.check")),t.attr("aria-expanded",a),this.element.trigger("toggle.uk.accordion",[a,t.data("toggle"),t.data("content")])},update:function(t){var i,e,o,a=this;this.toggle=this.find(this.options.toggle),this.content=this.find(this.options.containers),this.content.each(function(t){(i=n.$(this)).parent().data("wrapper")?e=i.parent():(e=n.$(this).wrap('<div data-wrapper="true" style="overflow:hidden;height:0;position:relative;"></div>').parent()).attr("aria-expanded","false"),o=a.toggle.eq(t),e.data("toggle",o),e.data("content",i),o.data("wrapper",e),i.data("wrapper",e)}),this.element.trigger("update.uk.accordion",[this]),t&&this.options.showfirst&&this.toggleItem(this.toggle.eq(0).data("wrapper"),!1,!1)}}),n.accordion});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvYWNjb3JkaW9uLmpzIl0sIm5hbWVzIjpbImFkZG9uIiwiY29tcG9uZW50Iiwid2luZG93IiwiVUlraXQyIiwiZGVmaW5lIiwiYW1kIiwiVUkiLCJkZWZhdWx0cyIsInNob3dmaXJzdCIsImNvbGxhcHNlIiwiYW5pbWF0ZSIsImVhc2luZyIsImR1cmF0aW9uIiwidG9nZ2xlIiwiY29udGFpbmVycyIsImNsc2FjdGl2ZSIsImJvb3QiLCJyZWFkeSIsImNvbnRleHQiLCJzZXRUaW1lb3V0IiwiJCIsImVhY2giLCJlbGUiLCJ0aGlzIiwiZGF0YSIsImFjY29yZGlvbiIsIlV0aWxzIiwib3B0aW9ucyIsImF0dHIiLCJpbml0IiwiJHRoaXMiLCJlbGVtZW50Iiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJ0b2dnbGVJdGVtIiwidXBkYXRlIiwiZG9tT2JzZXJ2ZSIsImNoaWxkcmVuIiwibGVuZ3RoIiwid3JhcHBlciIsImFuaW1hdGVkIiwidG9nZ2xlQ2xhc3MiLCJhY3RpdmUiLCJoYXNDbGFzcyIsIm5vdCIsInJlbW92ZUNsYXNzIiwiY29udGVudCIsInBhcmVudCIsInN0b3AiLCJjc3MiLCJoZWlnaHQiLCIkZWxlIiwiaXMiLCJvdXRlckhlaWdodCIsInRtcCIsInBvc2l0aW9uIiwidmlzaWJpbGl0eSIsImRpc3BsYXkiLCJnZXRIZWlnaHQiLCJjb21wbGV0ZSIsIm92ZXJmbG93IiwiY2hlY2tEaXNwbGF5IiwidHJpZ2dlciIsIiRjb250ZW50IiwiJHdyYXBwZXIiLCIkdG9nZ2xlIiwiZmluZCIsImluZGV4Iiwid3JhcCIsImVxIl0sIm1hcHBpbmdzIjoiQ0FDQSxTQUFVQSxHQUNOLElBQUlDLEVBRUFDLE9BQU9DLFNBQ1BGLEVBQVlELEVBQU1HLFNBR0QsbUJBQVZDLFFBQXdCQSxPQUFPQyxLQUN0Q0QsT0FBTyxrQkFBbUIsQ0FBQyxTQUFVLFdBQ2pDLE9BQU9ILEdBQWFELEVBQU1HLFVBVHRDLENBWUcsU0FBU0csR0FFUixhQW1LQSxP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S0FBS1EsUUFBUWdDLFFBQVEsc0JBQXVCLENBQUNwQixFQUFRSCxFQUFRaEIsS0FBSyxVQUFXZ0IsRUFBUWhCLEtBQUssY0FHOUZZLE9BQVEsU0FBU1AsR0FFYixJQUFrQm1DLEVBQVVDLEVBQVVDLEVBQWxDcEMsRUFBUVAsS0FFWkEsS0FBS1YsT0FBU1UsS0FBSzRDLEtBQUs1QyxLQUFLSSxRQUFRZCxRQUNyQ1UsS0FBS3dCLFFBQVV4QixLQUFLNEMsS0FBSzVDLEtBQUtJLFFBQVFiLFlBRXRDUyxLQUFLd0IsUUFBUTFCLEtBQUssU0FBUytDLElBRXZCSixFQUFXMUQsRUFBR2MsRUFBRUcsT0FFSHlCLFNBQVN4QixLQUFLLFdBQ3ZCeUMsRUFBV0QsRUFBU2hCLFVBRXBCaUIsRUFBVzNELEVBQUdjLEVBQUVHLE1BQU04QyxLQUFLLHVGQUF1RnJCLFVBR3pHcEIsS0FBSyxnQkFBaUIsU0FHbkNzQyxFQUFVcEMsRUFBTWpCLE9BQU95RCxHQUFHRixHQUUxQkgsRUFBU3pDLEtBQUssU0FBVTBDLEdBQ3hCRCxFQUFTekMsS0FBSyxVQUFXd0MsR0FDekJFLEVBQVExQyxLQUFLLFVBQVd5QyxHQUN4QkQsRUFBU3hDLEtBQUssVUFBV3lDLEtBRzdCMUMsS0FBS1EsUUFBUWdDLFFBQVEsc0JBQXVCLENBQUN4QyxPQUV6Q00sR0FBUU4sS0FBS0ksUUFBUW5CLFdBQ3JCZSxLQUFLWSxXQUFXWixLQUFLVixPQUFPeUQsR0FBRyxHQUFHOUMsS0FBSyxZQUFZLEdBQU8sTUE4Qi9EbEIsRUFBR21CIiwiZmlsZSI6ImNvbXBvbmVudHMvYWNjb3JkaW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIFVJa2l0IDIuMjcuMiB8IGh0dHA6Ly93d3cuZ2V0dWlraXQuY29tIHwgKGMpIDIwMTQgWU9PdGhlbWUgfCBNSVQgTGljZW5zZSAqL1xuKGZ1bmN0aW9uKGFkZG9uKSB7XG4gICAgdmFyIGNvbXBvbmVudDtcblxuICAgIGlmICh3aW5kb3cuVUlraXQyKSB7XG4gICAgICAgIGNvbXBvbmVudCA9IGFkZG9uKFVJa2l0Mik7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZSgndWlraXQtYWNjb3JkaW9uJywgWyd1aWtpdCddLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudCB8fCBhZGRvbihVSWtpdDIpO1xuICAgICAgICB9KTtcbiAgICB9XG59KShmdW5jdGlvbihVSSl7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIFVJLmNvbXBvbmVudCgnYWNjb3JkaW9uJywge1xuXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBzaG93Zmlyc3QgIDogdHJ1ZSxcbiAgICAgICAgICAgIGNvbGxhcHNlICAgOiB0cnVlLFxuICAgICAgICAgICAgYW5pbWF0ZSAgICA6IHRydWUsXG4gICAgICAgICAgICBlYXNpbmcgICAgIDogJ3N3aW5nJyxcbiAgICAgICAgICAgIGR1cmF0aW9uICAgOiAzMDAsXG4gICAgICAgICAgICB0b2dnbGUgICAgIDogJy51ay1hY2NvcmRpb24tdGl0bGUnLFxuICAgICAgICAgICAgY29udGFpbmVycyA6ICcudWstYWNjb3JkaW9uLWNvbnRlbnQnLFxuICAgICAgICAgICAgY2xzYWN0aXZlICA6ICd1ay1hY3RpdmUnXG4gICAgICAgIH0sXG5cbiAgICAgICAgYm9vdDogIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAvLyBpbml0IGNvZGVcbiAgICAgICAgICAgIFVJLnJlYWR5KGZ1bmN0aW9uKGNvbnRleHQpIHtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBVSS4kKCdbZGF0YS11ay1hY2NvcmRpb25dJywgY29udGV4dCkuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gVUkuJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGUuZGF0YSgnYWNjb3JkaW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVSS5hY2NvcmRpb24oZWxlLCBVSS5VdGlscy5vcHRpb25zKGVsZS5hdHRyKCdkYXRhLXVrLWFjY29yZGlvbicpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgdmFyICR0aGlzID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lm9uKCdjbGljay51ay5hY2NvcmRpb24nLCB0aGlzLm9wdGlvbnMudG9nZ2xlLCBmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICAkdGhpcy50b2dnbGVJdGVtKFVJLiQodGhpcykuZGF0YSgnd3JhcHBlcicpLCAkdGhpcy5vcHRpb25zLmFuaW1hdGUsICR0aGlzLm9wdGlvbnMuY29sbGFwc2UpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRydWUpO1xuXG4gICAgICAgICAgICBVSS5kb21PYnNlcnZlKHRoaXMuZWxlbWVudCwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5lbGVtZW50LmNoaWxkcmVuKCR0aGlzLm9wdGlvbnMuY29udGFpbmVycykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRvZ2dsZUl0ZW06IGZ1bmN0aW9uKHdyYXBwZXIsIGFuaW1hdGVkLCBjb2xsYXBzZSkge1xuXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICB3cmFwcGVyLmRhdGEoJ3RvZ2dsZScpLnRvZ2dsZUNsYXNzKHRoaXMub3B0aW9ucy5jbHNhY3RpdmUpO1xuICAgICAgICAgICAgd3JhcHBlci5kYXRhKCdjb250ZW50JykudG9nZ2xlQ2xhc3ModGhpcy5vcHRpb25zLmNsc2FjdGl2ZSk7XG5cbiAgICAgICAgICAgIHZhciBhY3RpdmUgPSB3cmFwcGVyLmRhdGEoJ3RvZ2dsZScpLmhhc0NsYXNzKHRoaXMub3B0aW9ucy5jbHNhY3RpdmUpO1xuXG4gICAgICAgICAgICBpZiAoY29sbGFwc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZS5ub3Qod3JhcHBlci5kYXRhKCd0b2dnbGUnKSkucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmNsc2FjdGl2ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50Lm5vdCh3cmFwcGVyLmRhdGEoJ2NvbnRlbnQnKSkucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmNsc2FjdGl2ZSlcbiAgICAgICAgICAgICAgICAgICAgLnBhcmVudCgpLnN0b3AoKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpLmFuaW1hdGUoeyBoZWlnaHQ6IDAgfSwge2Vhc2luZzogdGhpcy5vcHRpb25zLmVhc2luZywgZHVyYXRpb246IGFuaW1hdGVkID8gdGhpcy5vcHRpb25zLmR1cmF0aW9uIDogMH0pLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd3JhcHBlci5zdG9wKCkuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcblxuICAgICAgICAgICAgaWYgKGFuaW1hdGVkKSB7XG5cbiAgICAgICAgICAgICAgICB3cmFwcGVyLmFuaW1hdGUoeyBoZWlnaHQ6IGFjdGl2ZSA/IGdldEhlaWdodCh3cmFwcGVyLmRhdGEoJ2NvbnRlbnQnKSkgOiAwIH0sIHtlYXNpbmc6IHRoaXMub3B0aW9ucy5lYXNpbmcsIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuZHVyYXRpb24sIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmNzcyh7J292ZXJmbG93JzogJycsICdoZWlnaHQnOiAnYXV0byd9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFVJLlV0aWxzLmNoZWNrRGlzcGxheSh3cmFwcGVyLmRhdGEoJ2NvbnRlbnQnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkdGhpcy50cmlnZ2VyKCdkaXNwbGF5LnVrLmNoZWNrJyk7XG4gICAgICAgICAgICAgICAgfX0pO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgd3JhcHBlci5oZWlnaHQoYWN0aXZlID8gJ2F1dG8nIDogMCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuY3NzKHsnb3ZlcmZsb3cnOiAnJ30pO1xuICAgICAgICAgICAgICAgICAgICBVSS5VdGlscy5jaGVja0Rpc3BsYXkod3JhcHBlci5kYXRhKCdjb250ZW50JykpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZGlzcGxheS51ay5jaGVjaycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgQVJJQVxuICAgICAgICAgICAgd3JhcHBlci5hdHRyKCdhcmlhLWV4cGFuZGVkJywgYWN0aXZlKTtcblxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoJ3RvZ2dsZS51ay5hY2NvcmRpb24nLCBbYWN0aXZlLCB3cmFwcGVyLmRhdGEoJ3RvZ2dsZScpLCB3cmFwcGVyLmRhdGEoJ2NvbnRlbnQnKV0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oaW5pdCkge1xuXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzLCAkY29udGVudCwgJHdyYXBwZXIsICR0b2dnbGU7XG5cbiAgICAgICAgICAgIHRoaXMudG9nZ2xlID0gdGhpcy5maW5kKHRoaXMub3B0aW9ucy50b2dnbGUpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5maW5kKHRoaXMub3B0aW9ucy5jb250YWluZXJzKTtcblxuICAgICAgICAgICAgdGhpcy5jb250ZW50LmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcblxuICAgICAgICAgICAgICAgICRjb250ZW50ID0gVUkuJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgIGlmICgkY29udGVudC5wYXJlbnQoKS5kYXRhKCd3cmFwcGVyJykpIHtcbiAgICAgICAgICAgICAgICAgICAgJHdyYXBwZXIgPSAkY29udGVudC5wYXJlbnQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkd3JhcHBlciA9IFVJLiQodGhpcykud3JhcCgnPGRpdiBkYXRhLXdyYXBwZXI9XCJ0cnVlXCIgc3R5bGU9XCJvdmVyZmxvdzpoaWRkZW47aGVpZ2h0OjA7cG9zaXRpb246cmVsYXRpdmU7XCI+PC9kaXY+JykucGFyZW50KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSW5pdCBBUklBXG4gICAgICAgICAgICAgICAgICAgICR3cmFwcGVyLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkdG9nZ2xlID0gJHRoaXMudG9nZ2xlLmVxKGluZGV4KTtcblxuICAgICAgICAgICAgICAgICR3cmFwcGVyLmRhdGEoJ3RvZ2dsZScsICR0b2dnbGUpO1xuICAgICAgICAgICAgICAgICR3cmFwcGVyLmRhdGEoJ2NvbnRlbnQnLCAkY29udGVudCk7XG4gICAgICAgICAgICAgICAgJHRvZ2dsZS5kYXRhKCd3cmFwcGVyJywgJHdyYXBwZXIpO1xuICAgICAgICAgICAgICAgICRjb250ZW50LmRhdGEoJ3dyYXBwZXInLCAkd3JhcHBlcik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoJ3VwZGF0ZS51ay5hY2NvcmRpb24nLCBbdGhpc10pO1xuXG4gICAgICAgICAgICBpZiAoaW5pdCAmJiB0aGlzLm9wdGlvbnMuc2hvd2ZpcnN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVJdGVtKHRoaXMudG9nZ2xlLmVxKDApLmRhdGEoJ3dyYXBwZXInKSwgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICAvLyBoZWxwZXJcblxuICAgIGZ1bmN0aW9uIGdldEhlaWdodChlbGUpIHtcblxuICAgICAgICB2YXIgJGVsZSA9IFVJLiQoZWxlKSwgaGVpZ2h0ID0gXCJhdXRvXCI7XG5cbiAgICAgICAgaWYgKCRlbGUuaXMoXCI6dmlzaWJsZVwiKSkge1xuICAgICAgICAgICAgaGVpZ2h0ID0gJGVsZS5vdXRlckhlaWdodCgpO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICB2YXIgdG1wID0ge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uICAgOiAkZWxlLmNzcygncG9zaXRpb24nKSxcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5IDogJGVsZS5jc3MoJ3Zpc2liaWxpdHknKSxcbiAgICAgICAgICAgICAgICBkaXNwbGF5ICAgIDogJGVsZS5jc3MoJ2Rpc3BsYXknKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaGVpZ2h0ID0gJGVsZS5jc3Moe3Bvc2l0aW9uOiAnYWJzb2x1dGUnLCB2aXNpYmlsaXR5OiAnaGlkZGVuJywgZGlzcGxheTogJ2Jsb2NrJ30pLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICRlbGUuY3NzKHRtcCk7IC8vIHJlc2V0IGVsZW1lbnRcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBoZWlnaHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIFVJLmFjY29yZGlvbjtcbn0pOyJdfQ==
