!function(i){var t;window.UIkit2&&(t=i(UIkit2)),"function"==typeof define&&define.amd&&define("uikit-lightbox",["uikit"],function(){return t||i(UIkit2)})}(function(g){"use strict";var d,r={};return g.component("lightbox",{defaults:{allowfullscreen:!0,duration:400,group:!1,keyboard:!0},index:0,items:!1,boot:function(){g.$html.on("click","[data-uk-lightbox]",function(i){i.preventDefault();var t=g.$(this);t.data("lightbox")||g.lightbox(t,g.Utils.options(t.attr("data-uk-lightbox"))),t.data("lightbox").show(t)}),g.$doc.on("keyup",function(i){if(d&&d.is(":visible")&&d.lightbox.options.keyboard)switch(i.preventDefault(),i.keyCode){case 37:d.lightbox.previous();break;case 39:d.lightbox.next()}})},init:function(){var t=[];if(this.index=0,this.siblings=[],this.element&&this.element.length){var i=this.options.group?g.$('[data-uk-lightbox*="'+this.options.group+'"]'):this.element;i.each(function(){var i=g.$(this);t.push({source:i.attr("href"),title:i.attr("data-title")||i.attr("title"),type:i.attr("data-lightbox-type")||"auto",link:i})}),this.index=i.index(this.element),this.siblings=t}else this.options.group&&this.options.group.length&&(this.siblings=this.options.group);this.trigger("lightbox-init",[this])},show:function(e){this.modal=function(i){if(d)return d.lightbox=i,d;(d=g.$(['<div class="uk-modal">','<div class="uk-modal-dialog uk-modal-dialog-lightbox uk-slidenav-position" style="margin-left:auto;margin-right:auto;width:200px;height:200px;top:'+Math.abs(window.innerHeight/2-200)+'px;">','<a href="#" class="uk-modal-close uk-close uk-close-alt"></a>','<div class="uk-lightbox-content"></div>','<div class="uk-modal-spinner uk-hidden"></div>',"</div>","</div>"].join("")).appendTo("body")).dialog=d.find(".uk-modal-dialog:first"),d.content=d.find(".uk-lightbox-content:first"),d.loader=d.find(".uk-modal-spinner:first"),d.closer=d.find(".uk-close.uk-close-alt"),d.modal=g.modal(d,{modal:!1}),d.on("swipeRight swipeLeft",function(i){d.lightbox["swipeLeft"==i.type?"next":"previous"]()}).on("click","[data-lightbox-previous], [data-lightbox-next]",function(i){i.preventDefault(),d.lightbox[g.$(this).is("[data-lightbox-next]")?"next":"previous"]()}),d.on("hide.uk.modal",function(i){d.content.html("")});var t={w:window.innerWidth,h:window.innerHeight};return g.$win.on("load resize orientationchange",g.Utils.debounce(function(i){t.w!==window.innerWidth&&d.is(":visible")&&!g.Utils.isFullscreen()&&d.lightbox.fitSize(),t={w:window.innerWidth,h:window.innerHeight}},100)),d.lightbox=i,d}(this),this.modal.dialog.stop(),this.modal.content.stop();var i,t,o=this,n=g.$.Deferred();"object"==typeof(e=e||0)&&this.siblings.forEach(function(i,t){e[0]===i.link[0]&&(e=t)}),e<0?e=this.siblings.length-e:this.siblings[e]||(e=0),t=this.siblings[e],i={lightbox:o,source:t.source,type:t.type,index:e,promise:n,title:t.title,item:t,meta:{content:"",width:null,height:null}},this.index=e,this.modal.content.empty(),this.modal.is(":visible")||(this.modal.content.css({width:"",height:""}).empty(),this.modal.modal.show()),this.modal.loader.removeClass("uk-hidden"),n.promise().done(function(){o.data=i,o.fitSize(i)}).fail(function(){i.meta.content='<div class="uk-position-cover uk-flex uk-flex-middle uk-flex-center"><strong>Loading resource failed!</strong></div>',i.meta.width=400,i.meta.height=300,o.data=i,o.fitSize(i)}),o.trigger("showitem.uk.lightbox",[i])},fitSize:function(){var i=this,t=this.data,e=this.modal.dialog.outerWidth()-this.modal.dialog.width(),o=parseInt(this.modal.dialog.css("margin-top"),10)+parseInt(this.modal.dialog.css("margin-bottom"),10),n=t.meta.content,s=i.options.duration;1<this.siblings.length&&(n=[n,'<a href="#" class="uk-slidenav uk-slidenav-contrast uk-slidenav-previous uk-hidden-touch" data-lightbox-previous></a>','<a href="#" class="uk-slidenav uk-slidenav-contrast uk-slidenav-next uk-hidden-touch" data-lightbox-next></a>'].join(""));var h,a,l=g.$("<div>&nbsp;</div>").css({opacity:0,position:"absolute",top:0,left:0,width:"100%",maxWidth:i.modal.dialog.css("max-width"),padding:i.modal.dialog.css("padding"),margin:i.modal.dialog.css("margin")}),d=t.meta.width,r=t.meta.height;l.appendTo("body").width(),h=l.width(),a=window.innerHeight-o,l.remove(),this.modal.dialog.find(".uk-modal-caption").remove(),t.title&&(this.modal.dialog.append('<div class="uk-modal-caption">'+t.title+"</div>"),a-=this.modal.dialog.find(".uk-modal-caption").outerHeight()),h<t.meta.width&&(r=Math.floor(r*(h/d)),d=h),a<r&&(r=Math.floor(a),d=Math.ceil(t.meta.width*(a/t.meta.height))),this.modal.content.css("opacity",0).width(d).html(n),"iframe"==t.type&&this.modal.content.find("iframe:first").height(r);var u=r+e,c=Math.floor(window.innerHeight/2-u/2)-o;c<0&&(c=0),this.modal.closer.addClass("uk-hidden"),i.modal.data("mwidth")==d&&i.modal.data("mheight")==r&&(s=0),this.modal.dialog.animate({width:d+e,height:r+e,top:c},s,"swing",function(){i.modal.loader.addClass("uk-hidden"),i.modal.content.css({width:""}).animate({opacity:1},function(){i.modal.closer.removeClass("uk-hidden")}),i.modal.data({mwidth:d,mheight:r})})},next:function(){this.show(this.siblings[this.index+1]?this.index+1:0)},previous:function(){this.show(this.siblings[this.index-1]?this.index-1:this.siblings.length-1)}}),g.plugin("lightbox","image",{init:function(i){i.on("showitem.uk.lightbox",function(i,o){if("image"==o.type||o.source&&o.source.match(/\.(jpg|jpeg|png|gif|svg)$/i)){var t=function(i,t,e){o.meta={content:'<img class="uk-responsive-width" width="'+t+'" height="'+e+'" src ="'+i+'">',width:t,height:e},o.type="image",o.promise.resolve()};if(r[o.source])t(o.source,r[o.source].width,r[o.source].height);else{var e=new Image;e.onerror=function(){o.promise.reject("Loading image failed")},e.onload=function(){r[o.source]={width:e.width,height:e.height},t(o.source,r[o.source].width,r[o.source].height)},e.src=o.source}}})}}),g.plugin("lightbox","youtube",{init:function(i){var a=/(\/\/.*?youtube\.[a-z]+)\/watch\?v=([^&]+)&?(.*)/,l=/youtu\.be\/(.*)/;i.on("showitem.uk.lightbox",function(i,o){var t,e,n=function(i,t,e){o.meta={content:'<iframe src="//www.youtube.com/embed/'+i+'" width="'+t+'" height="'+e+'" style="max-width:100%;"'+(d.lightbox.options.allowfullscreen?" allowfullscreen":"")+"></iframe>",width:t,height:e},o.type="iframe",o.promise.resolve()};if((e=o.source.match(a))&&(t=e[2]),(e=o.source.match(l))&&(t=e[1]),t){if(r[t])n(t,r[t].width,r[t].height);else{var s=new Image,h=!1;s.onerror=function(){r[t]={width:640,height:320},n(t,r[t].width,r[t].height)},s.onload=function(){120==s.width&&90==s.height?h?(r[t]={width:640,height:320},n(t,r[t].width,r[t].height)):(h=!0,s.src="//img.youtube.com/vi/"+t+"/0.jpg"):(r[t]={width:s.width,height:s.height},n(t,s.width,s.height))},s.src="//img.youtube.com/vi/"+t+"/maxresdefault.jpg"}i.stopImmediatePropagation()}})}}),g.plugin("lightbox","vimeo",{init:function(i){var n,s=/(\/\/.*?)vimeo\.[a-z]+\/([0-9]+).*?/;i.on("showitem.uk.lightbox",function(i,o){var t,e=function(i,t,e){o.meta={content:'<iframe src="//player.vimeo.com/video/'+i+'" width="'+t+'" height="'+e+'" style="width:100%;box-sizing:border-box;"'+(d.lightbox.options.allowfullscreen?" allowfullscreen":"")+"></iframe>",width:t,height:e},o.type="iframe",o.promise.resolve()};(n=o.source.match(s))&&(t=n[2],r[t]?e(t,r[t].width,r[t].height):g.$.ajax({type:"GET",url:"//vimeo.com/api/oembed.json?url="+encodeURI(o.source),jsonp:"callback",dataType:"jsonp",success:function(i){r[t]={width:i.width,height:i.height},e(t,r[t].width,r[t].height)}}),i.stopImmediatePropagation())})}}),g.plugin("lightbox","video",{init:function(i){i.on("showitem.uk.lightbox",function(i,o){var t=function(i,t,e){o.meta={content:'<video class="uk-responsive-width" src="'+i+'" width="'+t+'" height="'+e+'" controls></video>',width:t,height:e},o.type="video",o.promise.resolve()};if("video"==o.type||o.source.match(/\.(mp4|webm|ogv)$/i))if(r[o.source])t(o.source,r[o.source].width,r[o.source].height);else var e=g.$('<video style="position:fixed;visibility:hidden;top:-10000px;"></video>').attr("src",o.source).appendTo("body"),n=setInterval(function(){e[0].videoWidth&&(clearInterval(n),r[o.source]={width:e[0].videoWidth,height:e[0].videoHeight},t(o.source,r[o.source].width,r[o.source].height),e.remove())},20)})}}),g.plugin("lightbox","iframe",{init:function(s){s.on("showitem.uk.lightbox",function(i,t){var e,o,n;("iframe"===t.type||t.source.match(/\.(html|php)$/))&&(e=t.source,o=s.options.width||800,n=s.options.height||600,t.meta={content:'<iframe class="uk-responsive-width" src="'+e+'" width="'+o+'" height="'+n+'"'+(d.lightbox.options.allowfullscreen?" allowfullscreen":"")+"></iframe>",width:o,height:n},t.type="iframe",t.promise.resolve())})}}),g.lightbox.create=function(i,t){if(i){var e=[];return i.forEach(function(i){e.push(g.$.extend({source:"",title:"",type:"auto",link:!1},"string"==typeof i?{source:i}:i))}),g.lightbox(g.$.extend({},t,{group:e}))}},g.lightbox});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvbGlnaHRib3guanMiXSwibmFtZXMiOlsiYWRkb24iLCJjb21wb25lbnQiLCJ3aW5kb3ciLCJVSWtpdDIiLCJkZWZpbmUiLCJhbWQiLCJVSSIsIm1vZGFsIiwiY2FjaGUiLCJkZWZhdWx0cyIsImFsbG93ZnVsbHNjcmVlbiIsImR1cmF0aW9uIiwiZ3JvdXAiLCJrZXlib2FyZCIsImluZGV4IiwiaXRlbXMiLCJib290IiwiJGh0bWwiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImxpbmsiLCIkIiwidGhpcyIsImRhdGEiLCJsaWdodGJveCIsIlV0aWxzIiwib3B0aW9ucyIsImF0dHIiLCJzaG93IiwiJGRvYyIsImlzIiwia2V5Q29kZSIsInByZXZpb3VzIiwibmV4dCIsImluaXQiLCJzaWJsaW5ncyIsImVsZW1lbnQiLCJsZW5ndGgiLCJkb21TaWJsaW5ncyIsImVhY2giLCJlbGUiLCJwdXNoIiwic291cmNlIiwidGl0bGUiLCJ0eXBlIiwidHJpZ2dlciIsIk1hdGgiLCJhYnMiLCJpbm5lckhlaWdodCIsImpvaW4iLCJhcHBlbmRUbyIsImRpYWxvZyIsImZpbmQiLCJjb250ZW50IiwibG9hZGVyIiwiY2xvc2VyIiwiaHRtbCIsInJlc2l6ZUNhY2hlIiwidyIsImlubmVyV2lkdGgiLCJoIiwiJHdpbiIsImRlYm91bmNlIiwiaXNGdWxsc2NyZWVuIiwiZml0U2l6ZSIsImdldE1vZGFsIiwic3RvcCIsIml0ZW0iLCIkdGhpcyIsInByb21pc2UiLCJEZWZlcnJlZCIsImZvckVhY2giLCJzIiwiaWR4IiwibWV0YSIsIndpZHRoIiwiaGVpZ2h0IiwiZW1wdHkiLCJjc3MiLCJyZW1vdmVDbGFzcyIsImRvbmUiLCJmYWlsIiwicGFkIiwib3V0ZXJXaWR0aCIsImRwYWQiLCJwYXJzZUludCIsIm1heHdpZHRoIiwibWF4aGVpZ2h0IiwidG1wIiwib3BhY2l0eSIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsIm1heFdpZHRoIiwicGFkZGluZyIsIm1hcmdpbiIsInJlbW92ZSIsImFwcGVuZCIsIm91dGVySGVpZ2h0IiwiZmxvb3IiLCJjZWlsIiwiZGgiLCJ0IiwiYWRkQ2xhc3MiLCJhbmltYXRlIiwibXdpZHRoIiwibWhlaWdodCIsInBsdWdpbiIsIm1hdGNoIiwicmVzb2x2ZSIsImltZyIsIkltYWdlIiwib25lcnJvciIsInJlamVjdCIsIm9ubG9hZCIsInNyYyIsInlvdXR1YmVSZWdFeHAiLCJ5b3V0dWJlUmVnRXhwU2hvcnQiLCJpZCIsIm1hdGNoZXMiLCJsb3dyZXMiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJyZWdleCIsImFqYXgiLCJ1cmwiLCJlbmNvZGVVUkkiLCJqc29ucCIsImRhdGFUeXBlIiwic3VjY2VzcyIsInZpZCIsImlkbGUiLCJzZXRJbnRlcnZhbCIsInZpZGVvV2lkdGgiLCJjbGVhckludGVydmFsIiwidmlkZW9IZWlnaHQiLCJjcmVhdGUiLCJleHRlbmQiXSwibWFwcGluZ3MiOiJDQUNBLFNBQVVBLEdBRU4sSUFBSUMsRUFFQUMsT0FBT0MsU0FDUEYsRUFBWUQsRUFBTUcsU0FHRCxtQkFBVkMsUUFBd0JBLE9BQU9DLEtBQ3RDRCxPQUFPLGlCQUFrQixDQUFDLFNBQVUsV0FDaEMsT0FBT0gsR0FBYUQsRUFBTUcsVUFWdEMsQ0FjRyxTQUFTRyxHQUVSLGFBRUEsSUFBSUMsRUFBT0MsRUFBUSxHQXVqQm5CLE9BcmpCQUYsRUFBR0wsVUFBVSxXQUFZLENBRXJCUSxTQUFVLENBQ05DLGlCQUFrQixFQUNsQkMsU0FBa0IsSUFDbEJDLE9BQWtCLEVBQ2xCQyxVQUFrQixHQUd0QkMsTUFBUSxFQUNSQyxPQUFRLEVBRVJDLEtBQU0sV0FFRlYsRUFBR1csTUFBTUMsR0FBRyxRQUFTLHFCQUFzQixTQUFTQyxHQUVoREEsRUFBRUMsaUJBRUYsSUFBSUMsRUFBT2YsRUFBR2dCLEVBQUVDLE1BRVhGLEVBQUtHLEtBQUssYUFFWGxCLEVBQUdtQixTQUFTSixFQUFNZixFQUFHb0IsTUFBTUMsUUFBUU4sRUFBS08sS0FBSyxzQkFHakRQLEVB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QUdtQixTQUFTK0csT0FBUyxTQUFTekgsRUFBT1ksR0FFakMsR0FBS1osRUFBTCxDQUVBLElBQUlILEVBQVEsR0FjWixPQVpBRyxFQUFNeUQsUUFBUSxTQUFTSixHQUVuQnhELEVBQU04QixLQUFLcEMsRUFBR2dCLEVBQUVtSCxPQUFPLENBQ25COUYsT0FBUyxHQUNUQyxNQUFTLEdBQ1RDLEtBQVMsT0FDVHhCLE1BQVMsR0FDTyxpQkFBVixFQUFxQixDQUFDc0IsT0FBVXlCLEdBQVFBLE1BR2xEOUQsRUFBR21CLFNBQVNuQixFQUFHZ0IsRUFBRW1ILE9BQU8sR0FBSTlHLEVBQVMsQ0FBQ2YsTUFBUUEsT0FLL0NOLEVBQUdtQiIsImZpbGUiOiJjb21wb25lbnRzL2xpZ2h0Ym94LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIFVJa2l0IDIuMjcuMiB8IGh0dHA6Ly93d3cuZ2V0dWlraXQuY29tIHwgKGMpIDIwMTQgWU9PdGhlbWUgfCBNSVQgTGljZW5zZSAqL1xuKGZ1bmN0aW9uKGFkZG9uKSB7XG5cbiAgICB2YXIgY29tcG9uZW50O1xuXG4gICAgaWYgKHdpbmRvdy5VSWtpdDIpIHtcbiAgICAgICAgY29tcG9uZW50ID0gYWRkb24oVUlraXQyKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHsgLy8gQU1EXG4gICAgICAgIGRlZmluZSgndWlraXQtbGlnaHRib3gnLCBbJ3Vpa2l0J10sIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gY29tcG9uZW50IHx8IGFkZG9uKFVJa2l0Mik7XG4gICAgICAgIH0pO1xuICAgIH1cblxufSkoZnVuY3Rpb24oVUkpe1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgbW9kYWwsIGNhY2hlID0ge307XG5cbiAgICBVSS5jb21wb25lbnQoJ2xpZ2h0Ym94Jywge1xuXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBhbGxvd2Z1bGxzY3JlZW4gOiB0cnVlLFxuICAgICAgICAgICAgZHVyYXRpb24gICAgICAgIDogNDAwLFxuICAgICAgICAgICAgZ3JvdXAgICAgICAgICAgIDogZmFsc2UsXG4gICAgICAgICAgICBrZXlib2FyZCAgICAgICAgOiB0cnVlXG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5kZXggOiAwLFxuICAgICAgICBpdGVtcyA6IGZhbHNlLFxuXG4gICAgICAgIGJvb3Q6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICBVSS4kaHRtbC5vbignY2xpY2snLCAnW2RhdGEtdWstbGlnaHRib3hdJywgZnVuY3Rpb24oZSl7XG5cbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IFVJLiQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWxpbmsuZGF0YSgnbGlnaHRib3gnKSkge1xuXG4gICAgICAgICAgICAgICAgICAgIFVJLmxpZ2h0Ym94KGxpbmssIFVJLlV0aWxzLm9wdGlvbnMobGluay5hdHRyKCdkYXRhLXVrLWxpZ2h0Ym94JykpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsaW5rLmRhdGEoJ2xpZ2h0Ym94Jykuc2hvdyhsaW5rKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBrZXlib2FyZCBuYXZpZ2F0aW9uXG4gICAgICAgICAgICBVSS4kZG9jLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgICAgICAgIGlmIChtb2RhbCAmJiBtb2RhbC5pcygnOnZpc2libGUnKSAmJiBtb2RhbC5saWdodGJveC5vcHRpb25zLmtleWJvYXJkKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaChlLmtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwubGlnaHRib3gucHJldmlvdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwubGlnaHRib3gubmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIHZhciBzaWJsaW5ncyA9IFtdO1xuXG4gICAgICAgICAgICB0aGlzLmluZGV4ICAgID0gMDtcbiAgICAgICAgICAgIHRoaXMuc2libGluZ3MgPSBbXTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudCAmJiB0aGlzLmVsZW1lbnQubGVuZ3RoKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZG9tU2libGluZ3MgID0gdGhpcy5vcHRpb25zLmdyb3VwID8gVUkuJCgnW2RhdGEtdWstbGlnaHRib3gqPVwiJyt0aGlzLm9wdGlvbnMuZ3JvdXArJ1wiXScpIDogdGhpcy5lbGVtZW50O1xuXG4gICAgICAgICAgICAgICAgZG9tU2libGluZ3MuZWFjaChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gVUkuJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICBzaWJsaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZSA6IGVsZS5hdHRyKCdocmVmJyksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZSAgOiBlbGUuYXR0cignZGF0YS10aXRsZScpIHx8IGVsZS5hdHRyKCd0aXRsZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgIDogZWxlLmF0dHIoXCJkYXRhLWxpZ2h0Ym94LXR5cGVcIikgfHwgJ2F1dG8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGluayAgIDogZWxlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleCAgICA9IGRvbVNpYmxpbmdzLmluZGV4KHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zaWJsaW5ncyA9IHNpYmxpbmdzO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5ncm91cCAmJiB0aGlzLm9wdGlvbnMuZ3JvdXAubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaWJsaW5ncyA9IHRoaXMub3B0aW9ucy5ncm91cDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdsaWdodGJveC1pbml0JywgW3RoaXNdKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzaG93OiBmdW5jdGlvbihpbmRleCkge1xuXG4gICAgICAgICAgICB0aGlzLm1vZGFsID0gZ2V0TW9kYWwodGhpcyk7XG5cbiAgICAgICAgICAgIC8vIHN0b3AgcHJldmlvdXMgYW5pbWF0aW9uXG4gICAgICAgICAgICB0aGlzLm1vZGFsLmRpYWxvZy5zdG9wKCk7XG4gICAgICAgICAgICB0aGlzLm1vZGFsLmNvbnRlbnQuc3RvcCgpO1xuXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzLCBwcm9taXNlID0gVUkuJC5EZWZlcnJlZCgpLCBkYXRhLCBpdGVtO1xuXG4gICAgICAgICAgICBpbmRleCA9IGluZGV4IHx8IDA7XG5cbiAgICAgICAgICAgIC8vIGluZGV4IGlzIGEgalF1ZXJ5IG9iamVjdCBvciBET00gZWxlbWVudFxuICAgICAgICAgICAgaWYgKHR5cGVvZihpbmRleCkgPT0gJ29iamVjdCcpIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2libGluZ3MuZm9yRWFjaChmdW5jdGlvbihzLCBpZHgpe1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleFswXSA9PT0gcy5saW5rWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGlkeDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBmaXggaW5kZXggaWYgbmVlZGVkXG4gICAgICAgICAgICBpZiAoIGluZGV4IDwgMCApIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuc2libGluZ3MubGVuZ3RoIC0gaW5kZXg7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnNpYmxpbmdzW2luZGV4XSkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaXRlbSAgID0gdGhpcy5zaWJsaW5nc1tpbmRleF07XG5cbiAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgbGlnaHRib3ggOiAkdGhpcyxcbiAgICAgICAgICAgICAgICBzb3VyY2UgICA6IGl0ZW0uc291cmNlLFxuICAgICAgICAgICAgICAgIHR5cGUgICAgIDogaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgIGluZGV4ICAgIDogaW5kZXgsXG4gICAgICAgICAgICAgICAgcHJvbWlzZSAgOiBwcm9taXNlLFxuICAgICAgICAgICAgICAgIHRpdGxlICAgIDogaXRlbS50aXRsZSxcbiAgICAgICAgICAgICAgICBpdGVtICAgICA6IGl0ZW0sXG4gICAgICAgICAgICAgICAgbWV0YSAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggICA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCAgOiBudWxsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuXG4gICAgICAgICAgICB0aGlzLm1vZGFsLmNvbnRlbnQuZW1wdHkoKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLm1vZGFsLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RhbC5jb250ZW50LmNzcyh7d2lkdGg6JycsIGhlaWdodDonJ30pLmVtcHR5KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RhbC5tb2RhbC5zaG93KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMubW9kYWwubG9hZGVyLnJlbW92ZUNsYXNzKCd1ay1oaWRkZW4nKTtcblxuICAgICAgICAgICAgcHJvbWlzZS5wcm9taXNlKCkuZG9uZShmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICR0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICAgICR0aGlzLmZpdFNpemUoZGF0YSk7XG5cbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIGRhdGEubWV0YS5jb250ZW50ID0gJzxkaXYgY2xhc3M9XCJ1ay1wb3NpdGlvbi1jb3ZlciB1ay1mbGV4IHVrLWZsZXgtbWlkZGxlIHVrLWZsZXgtY2VudGVyXCI+PHN0cm9uZz5Mb2FkaW5nIHJlc291cmNlIGZhaWxlZCE8L3N0cm9uZz48L2Rpdj4nO1xuICAgICAgICAgICAgICAgIGRhdGEubWV0YS53aWR0aCAgID0gNDAwO1xuICAgICAgICAgICAgICAgIGRhdGEubWV0YS5oZWlnaHQgID0gMzAwO1xuXG4gICAgICAgICAgICAgICAgJHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgJHRoaXMuZml0U2l6ZShkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkdGhpcy50cmlnZ2VyKCdzaG93aXRlbS51ay5saWdodGJveCcsIFtkYXRhXSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZml0U2l6ZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIHZhciAkdGhpcyAgICA9IHRoaXMsXG4gICAgICAgICAgICAgICAgZGF0YSAgICAgPSB0aGlzLmRhdGEsXG4gICAgICAgICAgICAgICAgcGFkICAgICAgPSB0aGlzLm1vZGFsLmRpYWxvZy5vdXRlcldpZHRoKCkgLSB0aGlzLm1vZGFsLmRpYWxvZy53aWR0aCgpLFxuICAgICAgICAgICAgICAgIGRwYWRUb3AgID0gcGFyc2VJbnQodGhpcy5tb2RhbC5kaWFsb2cuY3NzKCdtYXJnaW4tdG9wJyksIDEwKSxcbiAgICAgICAgICAgICAgICBkcGFkQm90ICA9IHBhcnNlSW50KHRoaXMubW9kYWwuZGlhbG9nLmNzcygnbWFyZ2luLWJvdHRvbScpLCAxMCksXG4gICAgICAgICAgICAgICAgZHBhZCAgICAgPSBkcGFkVG9wICsgZHBhZEJvdCxcbiAgICAgICAgICAgICAgICBjb250ZW50ICA9IGRhdGEubWV0YS5jb250ZW50LFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uID0gJHRoaXMub3B0aW9ucy5kdXJhdGlvbjtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2libGluZ3MubGVuZ3RoID4gMSkge1xuXG4gICAgICAgICAgICAgICAgY29udGVudCA9IFtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJ1ay1zbGlkZW5hdiB1ay1zbGlkZW5hdi1jb250cmFzdCB1ay1zbGlkZW5hdi1wcmV2aW91cyB1ay1oaWRkZW4tdG91Y2hcIiBkYXRhLWxpZ2h0Ym94LXByZXZpb3VzPjwvYT4nLFxuICAgICAgICAgICAgICAgICAgICAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cInVrLXNsaWRlbmF2IHVrLXNsaWRlbmF2LWNvbnRyYXN0IHVrLXNsaWRlbmF2LW5leHQgdWstaGlkZGVuLXRvdWNoXCIgZGF0YS1saWdodGJveC1uZXh0PjwvYT4nXG4gICAgICAgICAgICAgICAgXS5qb2luKCcnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHdpZHRoXG4gICAgICAgICAgICB2YXIgdG1wID0gVUkuJCgnPGRpdj4mbmJzcDs8L2Rpdj4nKS5jc3Moe1xuICAgICAgICAgICAgICAgIG9wYWNpdHkgICA6IDAsXG4gICAgICAgICAgICAgICAgcG9zaXRpb24gIDogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICB0b3AgICAgICAgOiAwLFxuICAgICAgICAgICAgICAgIGxlZnQgICAgICA6IDAsXG4gICAgICAgICAgICAgICAgd2lkdGggICAgIDogJzEwMCUnLFxuICAgICAgICAgICAgICAgIG1heFdpZHRoICA6ICR0aGlzLm1vZGFsLmRpYWxvZy5jc3MoJ21heC13aWR0aCcpLFxuICAgICAgICAgICAgICAgIHBhZGRpbmcgICA6ICR0aGlzLm1vZGFsLmRpYWxvZy5jc3MoJ3BhZGRpbmcnKSxcbiAgICAgICAgICAgICAgICBtYXJnaW4gICAgOiAkdGhpcy5tb2RhbC5kaWFsb2cuY3NzKCdtYXJnaW4nKVxuICAgICAgICAgICAgfSksIG1heHdpZHRoLCBtYXhoZWlnaHQsIHcgPSBkYXRhLm1ldGEud2lkdGgsIGggPSBkYXRhLm1ldGEuaGVpZ2h0O1xuXG4gICAgICAgICAgICB0bXAuYXBwZW5kVG8oJ2JvZHknKS53aWR0aCgpO1xuXG4gICAgICAgICAgICBtYXh3aWR0aCAgPSB0bXAud2lkdGgoKTtcbiAgICAgICAgICAgIG1heGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCAtIGRwYWQ7XG5cbiAgICAgICAgICAgIHRtcC5yZW1vdmUoKTtcblxuICAgICAgICAgICAgdGhpcy5tb2RhbC5kaWFsb2cuZmluZCgnLnVrLW1vZGFsLWNhcHRpb24nKS5yZW1vdmUoKTtcblxuICAgICAgICAgICAgaWYgKGRhdGEudGl0bGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGFsLmRpYWxvZy5hcHBlbmQoJzxkaXYgY2xhc3M9XCJ1ay1tb2RhbC1jYXB0aW9uXCI+JytkYXRhLnRpdGxlKyc8L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICBtYXhoZWlnaHQgLT0gdGhpcy5tb2RhbC5kaWFsb2cuZmluZCgnLnVrLW1vZGFsLWNhcHRpb24nKS5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobWF4d2lkdGggPCBkYXRhLm1ldGEud2lkdGgpIHtcblxuICAgICAgICAgICAgICAgIGggPSBNYXRoLmZsb29yKCBoICogKG1heHdpZHRoIC8gdykgKTtcbiAgICAgICAgICAgICAgICB3ID0gbWF4d2lkdGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtYXhoZWlnaHQgPCBoKSB7XG5cbiAgICAgICAgICAgICAgICBoID0gTWF0aC5mbG9vcihtYXhoZWlnaHQpO1xuICAgICAgICAgICAgICAgIHcgPSBNYXRoLmNlaWwoZGF0YS5tZXRhLndpZHRoICogKG1heGhlaWdodC9kYXRhLm1ldGEuaGVpZ2h0KSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMubW9kYWwuY29udGVudC5jc3MoJ29wYWNpdHknLCAwKS53aWR0aCh3KS5odG1sKGNvbnRlbnQpO1xuXG4gICAgICAgICAgICBpZiAoZGF0YS50eXBlID09ICdpZnJhbWUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RhbC5jb250ZW50LmZpbmQoJ2lmcmFtZTpmaXJzdCcpLmhlaWdodChoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGRoICAgPSBoICsgcGFkLFxuICAgICAgICAgICAgICAgIHQgICAgPSBNYXRoLmZsb29yKHdpbmRvdy5pbm5lckhlaWdodC8yIC0gZGgvMikgLSBkcGFkO1xuXG4gICAgICAgICAgICBpZiAodCA8IDApIHsgdCA9IDA7IH1cblxuICAgICAgICAgICAgdGhpcy5tb2RhbC5jbG9zZXIuYWRkQ2xhc3MoJ3VrLWhpZGRlbicpO1xuXG4gICAgICAgICAgICBpZiAoJHRoaXMubW9kYWwuZGF0YSgnbXdpZHRoJykgPT0gdyAmJiAgJHRoaXMubW9kYWwuZGF0YSgnbWhlaWdodCcpID09IGgpIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMubW9kYWwuZGlhbG9nLmFuaW1hdGUoe3dpZHRoOiB3ICsgcGFkLCBoZWlnaHQ6IGggKyBwYWQsIHRvcDogdCB9LCBkdXJhdGlvbiwgJ3N3aW5nJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHRoaXMubW9kYWwubG9hZGVyLmFkZENsYXNzKCd1ay1oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5tb2RhbC5jb250ZW50LmNzcyh7d2lkdGg6Jyd9KS5hbmltYXRlKHtvcGFjaXR5OiAxfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLm1vZGFsLmNsb3Nlci5yZW1vdmVDbGFzcygndWstaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAkdGhpcy5tb2RhbC5kYXRhKHttd2lkdGg6IHcsIG1oZWlnaHQ6IGh9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zaG93KHRoaXMuc2libGluZ3NbKHRoaXMuaW5kZXgrMSldID8gKHRoaXMuaW5kZXgrMSkgOiAwKTtcbiAgICAgICAgfSxcblxuICAgICAgICBwcmV2aW91czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnNob3codGhpcy5zaWJsaW5nc1sodGhpcy5pbmRleC0xKV0gPyAodGhpcy5pbmRleC0xKSA6IHRoaXMuc2libGluZ3MubGVuZ3RoLTEpO1xuICAgICAgICB9XG4gICAgfSk7XG5cblxuICAgIC8vIFBsdWdpbnNcblxuICAgIFVJLnBsdWdpbignbGlnaHRib3gnLCAnaW1hZ2UnLCB7XG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24obGlnaHRib3gpIHtcblxuICAgICAgICAgICAgbGlnaHRib3gub24oJ3Nob3dpdGVtLnVrLmxpZ2h0Ym94JywgZnVuY3Rpb24oZSwgZGF0YSl7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS50eXBlID09ICdpbWFnZScgfHwgZGF0YS5zb3VyY2UgJiYgZGF0YS5zb3VyY2UubWF0Y2goL1xcLihqcGd8anBlZ3xwbmd8Z2lmfHN2ZykkL2kpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc29sdmUgPSBmdW5jdGlvbihzb3VyY2UsIHdpZHRoLCBoZWlnaHQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tZXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgOiAnPGltZyBjbGFzcz1cInVrLXJlc3BvbnNpdmUtd2lkdGhcIiB3aWR0aD1cIicrd2lkdGgrJ1wiIGhlaWdodD1cIicraGVpZ2h0KydcIiBzcmMgPVwiJytzb3VyY2UrJ1wiPicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggICA6IHdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCAgOiBoZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudHlwZSA9ICdpbWFnZSc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYWNoZVtkYXRhLnNvdXJjZV0pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wcm9taXNlLnJlamVjdCgnTG9hZGluZyBpbWFnZSBmYWlsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlW2RhdGEuc291cmNlXSA9IHt3aWR0aDogaW1nLndpZHRoLCBoZWlnaHQ6IGltZy5oZWlnaHR9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YS5zb3VyY2UsIGNhY2hlW2RhdGEuc291cmNlXS53aWR0aCwgY2FjaGVbZGF0YS5zb3VyY2VdLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gZGF0YS5zb3VyY2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YS5zb3VyY2UsIGNhY2hlW2RhdGEuc291cmNlXS53aWR0aCwgY2FjaGVbZGF0YS5zb3VyY2VdLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgVUkucGx1Z2luKCdsaWdodGJveCcsICd5b3V0dWJlJywge1xuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKGxpZ2h0Ym94KSB7XG5cbiAgICAgICAgICAgIHZhciB5b3V0dWJlUmVnRXhwID0gLyhcXC9cXC8uKj95b3V0dWJlXFwuW2Etel0rKVxcL3dhdGNoXFw/dj0oW14mXSspJj8oLiopLyxcbiAgICAgICAgICAgICAgICB5b3V0dWJlUmVnRXhwU2hvcnQgPSAveW91dHVcXC5iZVxcLyguKikvO1xuXG5cbiAgICAgICAgICAgIGxpZ2h0Ym94Lm9uKCdzaG93aXRlbS51ay5saWdodGJveCcsIGZ1bmN0aW9uKGUsIGRhdGEpe1xuXG4gICAgICAgICAgICAgICAgdmFyIGlkLCBtYXRjaGVzLCByZXNvbHZlID0gZnVuY3Rpb24oaWQsIHdpZHRoLCBoZWlnaHQpIHtcblxuICAgICAgICAgICAgICAgICAgICBkYXRhLm1ldGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnPGlmcmFtZSBzcmM9XCIvL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8nK2lkKydcIiB3aWR0aD1cIicrd2lkdGgrJ1wiIGhlaWdodD1cIicraGVpZ2h0KydcIiBzdHlsZT1cIm1heC13aWR0aDoxMDAlO1wiJysobW9kYWwubGlnaHRib3gub3B0aW9ucy5hbGxvd2Z1bGxzY3JlZW4/JyBhbGxvd2Z1bGxzY3JlZW4nOicnKSsnPjwvaWZyYW1lPicsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEudHlwZSA9ICdpZnJhbWUnO1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzID0gZGF0YS5zb3VyY2UubWF0Y2goeW91dHViZVJlZ0V4cCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBtYXRjaGVzWzJdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzID0gZGF0YS5zb3VyY2UubWF0Y2goeW91dHViZVJlZ0V4cFNob3J0KSkge1xuICAgICAgICAgICAgICAgICAgICBpZCA9IG1hdGNoZXNbMV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGlkKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIWNhY2hlW2lkXSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCksIGxvd3JlcyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVbaWRdID0ge3dpZHRoOjY0MCwgaGVpZ2h0OjMyMH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShpZCwgY2FjaGVbaWRdLndpZHRoLCBjYWNoZVtpZF0uaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8veW91dHViZSBkZWZhdWx0IDQwNCB0aHVtYiwgZmFsbCBiYWNrIHRvIGxvd3Jlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWcud2lkdGggPT0gMTIwICYmIGltZy5oZWlnaHQgPT0gOTApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsb3dyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd3JlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gJy8vaW1nLnlvdXR1YmUuY29tL3ZpLycgKyBpZCArICcvMC5qcGcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVbaWRdID0ge3dpZHRoOiA2NDAsIGhlaWdodDogMzIwfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaWQsIGNhY2hlW2lkXS53aWR0aCwgY2FjaGVbaWRdLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZVtpZF0gPSB7d2lkdGg6IGltZy53aWR0aCwgaGVpZ2h0OiBpbWcuaGVpZ2h0fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShpZCwgaW1nLndpZHRoLCBpbWcuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gJy8vaW1nLnlvdXR1YmUuY29tL3ZpLycraWQrJy9tYXhyZXNkZWZhdWx0LmpwZyc7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaWQsIGNhY2hlW2lkXS53aWR0aCwgY2FjaGVbaWRdLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cblxuICAgIFVJLnBsdWdpbignbGlnaHRib3gnLCAndmltZW8nLCB7XG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24obGlnaHRib3gpIHtcblxuICAgICAgICAgICAgdmFyIHJlZ2V4ID0gLyhcXC9cXC8uKj8pdmltZW9cXC5bYS16XStcXC8oWzAtOV0rKS4qPy8sIG1hdGNoZXM7XG5cblxuICAgICAgICAgICAgbGlnaHRib3gub24oJ3Nob3dpdGVtLnVrLmxpZ2h0Ym94JywgZnVuY3Rpb24oZSwgZGF0YSl7XG5cbiAgICAgICAgICAgICAgICB2YXIgaWQsIHJlc29sdmUgPSBmdW5jdGlvbihpZCwgd2lkdGgsIGhlaWdodCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEubWV0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICc8aWZyYW1lIHNyYz1cIi8vcGxheWVyLnZpbWVvLmNvbS92aWRlby8nK2lkKydcIiB3aWR0aD1cIicrd2lkdGgrJ1wiIGhlaWdodD1cIicraGVpZ2h0KydcIiBzdHlsZT1cIndpZHRoOjEwMCU7Ym94LXNpemluZzpib3JkZXItYm94O1wiJysobW9kYWwubGlnaHRib3gub3B0aW9ucy5hbGxvd2Z1bGxzY3JlZW4/JyBhbGxvd2Z1bGxzY3JlZW4nOicnKSsnPjwvaWZyYW1lPicsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEudHlwZSA9ICdpZnJhbWUnO1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzID0gZGF0YS5zb3VyY2UubWF0Y2gocmVnZXgpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWQgPSBtYXRjaGVzWzJdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCFjYWNoZVtpZF0pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgVUkuJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlICAgICA6ICdHRVQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCAgICAgIDogJy8vdmltZW8uY29tL2FwaS9vZW1iZWQuanNvbj91cmw9JyArIGVuY29kZVVSSShkYXRhLnNvdXJjZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbnAgICAgOiAnY2FsbGJhY2snLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlIDogJ2pzb25wJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzICA6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVbaWRdID0ge3dpZHRoOmRhdGEud2lkdGgsIGhlaWdodDpkYXRhLmhlaWdodH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaWQsIGNhY2hlW2lkXS53aWR0aCwgY2FjaGVbaWRdLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaWQsIGNhY2hlW2lkXS53aWR0aCwgY2FjaGVbaWRdLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBVSS5wbHVnaW4oJ2xpZ2h0Ym94JywgJ3ZpZGVvJywge1xuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKGxpZ2h0Ym94KSB7XG5cbiAgICAgICAgICAgIGxpZ2h0Ym94Lm9uKCdzaG93aXRlbS51ay5saWdodGJveCcsIGZ1bmN0aW9uKGUsIGRhdGEpe1xuXG5cbiAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZSA9IGZ1bmN0aW9uKHNvdXJjZSwgd2lkdGgsIGhlaWdodCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEubWV0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICc8dmlkZW8gY2xhc3M9XCJ1ay1yZXNwb25zaXZlLXdpZHRoXCIgc3JjPVwiJytzb3VyY2UrJ1wiIHdpZHRoPVwiJyt3aWR0aCsnXCIgaGVpZ2h0PVwiJytoZWlnaHQrJ1wiIGNvbnRyb2xzPjwvdmlkZW8+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgZGF0YS50eXBlID0gJ3ZpZGVvJztcblxuICAgICAgICAgICAgICAgICAgICBkYXRhLnByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS50eXBlID09ICd2aWRlbycgfHwgZGF0YS5zb3VyY2UubWF0Y2goL1xcLihtcDR8d2VibXxvZ3YpJC9pKSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FjaGVbZGF0YS5zb3VyY2VdKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWQgPSBVSS4kKCc8dmlkZW8gc3R5bGU9XCJwb3NpdGlvbjpmaXhlZDt2aXNpYmlsaXR5OmhpZGRlbjt0b3A6LTEwMDAwcHg7XCI+PC92aWRlbz4nKS5hdHRyKCdzcmMnLCBkYXRhLnNvdXJjZSkuYXBwZW5kVG8oJ2JvZHknKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkbGUgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2aWRbMF0udmlkZW9XaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGlkbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZVtkYXRhLnNvdXJjZV0gPSB7d2lkdGg6IHZpZFswXS52aWRlb1dpZHRoLCBoZWlnaHQ6IHZpZFswXS52aWRlb0hlaWdodH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YS5zb3VyY2UsIGNhY2hlW2RhdGEuc291cmNlXS53aWR0aCwgY2FjaGVbZGF0YS5zb3VyY2VdLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhLnNvdXJjZSwgY2FjaGVbZGF0YS5zb3VyY2VdLndpZHRoLCBjYWNoZVtkYXRhLnNvdXJjZV0uaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cblxuICAgIFVJLnBsdWdpbignbGlnaHRib3gnLCAnaWZyYW1lJywge1xuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uIChsaWdodGJveCkge1xuXG4gICAgICAgICAgICBsaWdodGJveC5vbignc2hvd2l0ZW0udWsubGlnaHRib3gnLCBmdW5jdGlvbiAoZSwgZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHJlc29sdmUgPSBmdW5jdGlvbiAoc291cmNlLCB3aWR0aCwgaGVpZ2h0KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5tZXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJzxpZnJhbWUgY2xhc3M9XCJ1ay1yZXNwb25zaXZlLXdpZHRoXCIgc3JjPVwiJyArIHNvdXJjZSArICdcIiB3aWR0aD1cIicgKyB3aWR0aCArICdcIiBoZWlnaHQ9XCInICsgaGVpZ2h0ICsgJ1wiJysobW9kYWwubGlnaHRib3gub3B0aW9ucy5hbGxvd2Z1bGxzY3JlZW4/JyBhbGxvd2Z1bGxzY3JlZW4nOicnKSsnPjwvaWZyYW1lPicsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEudHlwZSA9ICdpZnJhbWUnO1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdpZnJhbWUnIHx8IGRhdGEuc291cmNlLm1hdGNoKC9cXC4oaHRtbHxwaHApJC8pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YS5zb3VyY2UsIChsaWdodGJveC5vcHRpb25zLndpZHRoIHx8IDgwMCksIChsaWdodGJveC5vcHRpb25zLmhlaWdodCB8fCA2MDApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBnZXRNb2RhbChsaWdodGJveCkge1xuXG4gICAgICAgIGlmIChtb2RhbCkge1xuICAgICAgICAgICAgbW9kYWwubGlnaHRib3ggPSBsaWdodGJveDtcbiAgICAgICAgICAgIHJldHVybiBtb2RhbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGluaXQgbGlnaHRib3ggY29udGFpbmVyXG4gICAgICAgIG1vZGFsID0gVUkuJChbXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cInVrLW1vZGFsXCI+JyxcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInVrLW1vZGFsLWRpYWxvZyB1ay1tb2RhbC1kaWFsb2ctbGlnaHRib3ggdWstc2xpZGVuYXYtcG9zaXRpb25cIiBzdHlsZT1cIm1hcmdpbi1sZWZ0OmF1dG87bWFyZ2luLXJpZ2h0OmF1dG87d2lkdGg6MjAwcHg7aGVpZ2h0OjIwMHB4O3RvcDonK01hdGguYWJzKHdpbmRvdy5pbm5lckhlaWdodC8yIC0gMjAwKSsncHg7XCI+JyxcbiAgICAgICAgICAgICAgICAgICAgJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJ1ay1tb2RhbC1jbG9zZSB1ay1jbG9zZSB1ay1jbG9zZS1hbHRcIj48L2E+JyxcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ1ay1saWdodGJveC1jb250ZW50XCI+PC9kaXY+JyxcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ1ay1tb2RhbC1zcGlubmVyIHVrLWhpZGRlblwiPjwvZGl2PicsXG4gICAgICAgICAgICAgICAgJzwvZGl2PicsXG4gICAgICAgICAgICAnPC9kaXY+J1xuICAgICAgICBdLmpvaW4oJycpKS5hcHBlbmRUbygnYm9keScpO1xuXG4gICAgICAgIG1vZGFsLmRpYWxvZyAgPSBtb2RhbC5maW5kKCcudWstbW9kYWwtZGlhbG9nOmZpcnN0Jyk7XG4gICAgICAgIG1vZGFsLmNvbnRlbnQgPSBtb2RhbC5maW5kKCcudWstbGlnaHRib3gtY29udGVudDpmaXJzdCcpO1xuICAgICAgICBtb2RhbC5sb2FkZXIgID0gbW9kYWwuZmluZCgnLnVrLW1vZGFsLXNwaW5uZXI6Zmlyc3QnKTtcbiAgICAgICAgbW9kYWwuY2xvc2VyICA9IG1vZGFsLmZpbmQoJy51ay1jbG9zZS51ay1jbG9zZS1hbHQnKTtcbiAgICAgICAgbW9kYWwubW9kYWwgICA9IFVJLm1vZGFsKG1vZGFsLCB7bW9kYWw6ZmFsc2V9KTtcblxuICAgICAgICAvLyBuZXh0IC8gcHJldmlvdXNcbiAgICAgICAgbW9kYWwub24oJ3N3aXBlUmlnaHQgc3dpcGVMZWZ0JywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgbW9kYWwubGlnaHRib3hbZS50eXBlPT0nc3dpcGVMZWZ0JyA/ICduZXh0JzoncHJldmlvdXMnXSgpO1xuICAgICAgICB9KS5vbignY2xpY2snLCAnW2RhdGEtbGlnaHRib3gtcHJldmlvdXNdLCBbZGF0YS1saWdodGJveC1uZXh0XScsIGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbW9kYWwubGlnaHRib3hbVUkuJCh0aGlzKS5pcygnW2RhdGEtbGlnaHRib3gtbmV4dF0nKSA/ICduZXh0JzoncHJldmlvdXMnXSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBkZXN0cm95IGNvbnRlbnQgb24gbW9kYWwgaGlkZVxuICAgICAgICBtb2RhbC5vbignaGlkZS51ay5tb2RhbCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIG1vZGFsLmNvbnRlbnQuaHRtbCgnJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciByZXNpemVDYWNoZSA9IHt3OiB3aW5kb3cuaW5uZXJXaWR0aCwgaDp3aW5kb3cuaW5uZXJIZWlnaHR9O1xuXG4gICAgICAgIFVJLiR3aW4ub24oJ2xvYWQgcmVzaXplIG9yaWVudGF0aW9uY2hhbmdlJywgVUkuVXRpbHMuZGVib3VuY2UoZnVuY3Rpb24oZSl7XG5cbiAgICAgICAgICAgIGlmIChyZXNpemVDYWNoZS53ICE9PSB3aW5kb3cuaW5uZXJXaWR0aCAmJiBtb2RhbC5pcygnOnZpc2libGUnKSAmJiAhVUkuVXRpbHMuaXNGdWxsc2NyZWVuKCkpIHtcbiAgICAgICAgICAgICAgICBtb2RhbC5saWdodGJveC5maXRTaXplKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc2l6ZUNhY2hlID0ge3c6IHdpbmRvdy5pbm5lcldpZHRoLCBoOndpbmRvdy5pbm5lckhlaWdodH07XG5cbiAgICAgICAgfSwgMTAwKSk7XG5cbiAgICAgICAgbW9kYWwubGlnaHRib3ggPSBsaWdodGJveDtcblxuICAgICAgICByZXR1cm4gbW9kYWw7XG4gICAgfVxuXG4gICAgVUkubGlnaHRib3guY3JlYXRlID0gZnVuY3Rpb24oaXRlbXMsIG9wdGlvbnMpIHtcblxuICAgICAgICBpZiAoIWl0ZW1zKSByZXR1cm47XG5cbiAgICAgICAgdmFyIGdyb3VwID0gW10sIG87XG5cbiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG5cbiAgICAgICAgICAgIGdyb3VwLnB1c2goVUkuJC5leHRlbmQoe1xuICAgICAgICAgICAgICAgIHNvdXJjZSA6ICcnLFxuICAgICAgICAgICAgICAgIHRpdGxlICA6ICcnLFxuICAgICAgICAgICAgICAgIHR5cGUgICA6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICBsaW5rICAgOiBmYWxzZVxuICAgICAgICAgICAgfSwgKHR5cGVvZihpdGVtKSA9PSAnc3RyaW5nJyA/IHsnc291cmNlJzogaXRlbX0gOiBpdGVtKSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBvID0gVUkubGlnaHRib3goVUkuJC5leHRlbmQoe30sIG9wdGlvbnMsIHsnZ3JvdXAnOmdyb3VwfSkpO1xuXG4gICAgICAgIHJldHVybiBvO1xuICAgIH07XG5cbiAgICByZXR1cm4gVUkubGlnaHRib3g7XG59KTsiXX0=
