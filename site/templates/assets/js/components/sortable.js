!function(t){var e;window.UIkit2&&(e=t(UIkit2)),"function"==typeof define&&define.amd&&define("uikit-sortable",["uikit"],function(){return e||t(UIkit2)})}(function(l){"use strict";var i,d,h,u,p,c,f,g,m,v="ontouchstart"in window||"MSGesture"in window||window.DocumentTouch&&document instanceof DocumentTouch,b=v?"MSGesture"in window?"pointerdown":"touchstart":"mousedown",C=v?"MSGesture"in window?"pointermove":"touchmove":"mousemove",$=v?"MSGesture"in window?"pointerup":"touchend":"mouseup";return l.component("sortable",{defaults:{animation:150,threshold:10,childClass:"uk-sortable-item",placeholderClass:"uk-sortable-placeholder",overClass:"uk-sortable-over",draggingClass:"uk-sortable-dragged",dragMovingClass:"uk-sortable-moving",baseClass:"uk-sortable",noDragClass:"uk-sortable-nodrag",emptyClass:"uk-sortable-empty",dragCustomClass:"",handleClass:!1,group:!1,stop:function(){},start:function(){},change:function(){}},boot:function(){l.ready(function(t){l.$("[data-uk-sortable]",t).each(function(){var t=l.$(this);t.data("sortable")||l.sortable(t,l.Utils.options(t.attr("data-uk-sortable")))})}),l.$html.on(C,function(t){if(p){var e=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0]:t;(Math.abs(e.pageX-p.pos.x)>p.threshold||Math.abs(e.pageY-p.pos.y)>p.threshold)&&p.apply(e)}if(i){u||(u=!0,i.show(),i.$current.addClass(i.$sortable.options.placeholderClass),i.$sortable.element.children().addClass(i.$sortable.options.childClass),l.$html.addClass(i.$sortable.options.dragMovingClass));var o=i.data("mouse-offset"),n=t.originalEvent.touches&&t.originalEvent.touches[0]||t.originalEvent,s=parseInt(n.pageX,10)+o.left,a=parseInt(n.pageY,10)+o.top;if(i.css({left:s,top:a}),a+i.height()/3>document.body.offsetHeight)return;a<l.$win.scrollTop()?l.$win.scrollTop(l.$win.scrollTop()-Math.ceil(i.height()/3)):a+i.height()/3>window.innerHeight+l.$win.scrollTop()&&l.$win.scrollTop(l.$win.scrollTop()+Math.ceil(i.height()/3))}}),l.$html.on($,function(t){if(p=!1,d&&i){var e=function(t){t=l.$(t);do{if(t.data("sortable"))return t;t=l.$(t).parent()}while(t.length);return t}(d),o=i.$sortable,n={type:t.type};e[0]&&o.dragDrop(n,o.element),o.dragEnd(n,o.element)}else d=i=null})},init:function(){var a=this,r=this.element[0];c=[],this.checkEmptyList(),this.element.data("sortable-group",this.options.group?this.options.group:l.Utils.uid("sortable-group"));var t=s(function(t){if(!t.data||!t.data.sortable){var e=l.$(t.target),o=e.is("a[href]")?e:e.parents("a[href]");if(!e.is(":input")){if(a.options.handleClass)if(!(e.hasClass(a.options.handleClass)?e:e.closest("."+a.options.handleClass,a.element)).length)return;return t.preventDefault(),o.length&&o.one("click",function(t){t.preventDefault()}).one($,function(){f||(o.trigger("click"),v&&o.attr("href").trim()&&(location.href=o.attr("href")))}),t.data=t.data||{},t.data.sortable=r,a.dragStart(t,this)}}}),e=s(l.Utils.debounce(function(t){return a.dragEnter(t,this)})),o=s(function(t){var e=a.dragenterData(this);a.dragenterData(this,e-1),a.dragenterData(this)||(l.$(this).removeClass(a.options.overClass),a.dragenterData(this,!1))}),n=s(function(t){return!d||d===this||h===this||(a.element.children().removeClass(a.options.overClass),h=this,a.moveElementNextTo(d,this),function(t){t.stopPropagation&&t.stopPropagation();t.preventDefault&&t.preventDefault();t.returnValue=!1}(t))});function s(s){return function(t){var e,o,n;(m=t)&&(o=(e=t.touches&&t.touches[0]||t).target||t.target,v&&document.elementFromPoint&&(o=document.elementFromPoint(e.pageX-document.body.scrollLeft,e.pageY-document.body.scrollTop)),g=l.$(o)),l.$(o).hasClass("."+a.options.childClass)?s.apply(o,[t]):o!==r&&(n=function(t,e){var o=e;if(o==t)return null;for(;o;){if(o.parentNode===t)return o;if(!(o=o.parentNode)||!o.ownerDocument||11===o.nodeType)break}return null}(r,o))&&s.apply(n,[t])}}this.addDragHandlers=function(){v&&m.touches&&m.touches.length?r.addEventListener(C,n,!1):(r.addEventListener("mouseover",e,!1),r.addEventListener("mouseout",o,!1))},this.removeDragHandlers=function(){v&&m.touches&&m.touches.length?r.removeEventListener(C,n,!1):(r.removeEventListener("mouseover",e,!1),r.removeEventListener("mouseout",o,!1))},window.addEventListener(C,function(t){d&&a.dragMove(t,a)},!1),r.addEventListener(b,t,!1)},dragStart:function(t,e){u=f=!1;var o=this,n=l.$(t.target);if((v||2!=t.button)&&!n.is("."+o.options.noDragClass)&&!n.closest("."+o.options.noDragClass).length&&!n.is(":input")){d=e,i&&i.remove();var s=l.$(d),a=s.offset(),r=t.touches&&t.touches[0]||t;p={pos:{x:r.pageX,y:r.pageY},threshold:o.options.handleClass?1:o.options.threshold,apply:function(t){(i=l.$('<div class="'+[o.options.draggingClass,o.options.dragCustomClass].join(" ")+'"></div>').css({display:"none",top:a.top,left:a.left,width:s.width(),height:s.height(),padding:s.css("padding")}).data({"mouse-offset":{left:a.left-parseInt(r.pageX,10),top:a.top-parseInt(r.pageY,10)},origin:o.element,index:s.index()}).append(s.html()).appendTo("body")).$current=s,i.$sortable=o,s.data({"start-list":s.parent(),"start-index":s.index(),"sortable-group":o.options.group}),o.addDragHandlers(),o.options.start(this,d),o.trigger("start.uk.sortable",[o,d,i]),p=!(f=!0)}}}},dragMove:function(t,e){var o,n=(g=l.$(document.elementFromPoint(t.pageX-(document.body.scrollLeft||document.scrollLeft||0),t.pageY-(document.body.scrollTop||document.documentElement.scrollTop||0)))).closest("."+this.options.baseClass),s=n.data("sortable-group"),a=l.$(d),r=a.parent(),i=a.data("sortable-group");n[0]!==r[0]&&void 0!==i&&s===i&&(n.data("sortable").addDragHandlers(),c.push(n),n.children().addClass(this.options.childClass),0<n.children().length?(o=g.closest("."+this.options.childClass)).length?o.before(a):n.append(a):g.append(a),l.$doc.trigger("mouseover")),this.checkEmptyList(),this.checkEmptyList(r)},dragEnter:function(t,e){if(!d||d===e)return!0;var o=this.dragenterData(e);if(this.dragenterData(e,o+1),0===o){var n=l.$(e).parent(),s=l.$(d).data("start-list");if(n[0]!==s[0]){var a=n.data("sortable-group"),r=l.$(d).data("sortable-group");if((a||r)&&a!=r)return!1}l.$(e).addClass(this.options.overClass),this.moveElementNextTo(d,e)}return!1},dragEnd:function(t,e){var o=this;d&&(this.options.stop(e),this.trigger("stop.uk.sortable",[this])),h=d=null,c.push(this.element),c.forEach(function(t,e){l.$(t).children().each(function(){1===this.nodeType&&(l.$(this).removeClass(o.options.overClass).removeClass(o.options.placeholderClass).removeClass(o.options.childClass),o.dragenterData(this,!1))})}),c=[],l.$html.removeClass(this.options.dragMovingClass),this.removeDragHandlers(),i&&(i.remove(),i=null)},dragDrop:function(t,e){"drop"===t.type&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()),this.triggerChangeEvents()},triggerChangeEvents:function(){if(d){var t=l.$(d),e=i.data("origin"),o=t.closest("."+this.options.baseClass),n=[],s=l.$(d);e[0]===o[0]&&i.data("index")!=t.index()?n.push({sortable:this,mode:"moved"}):e[0]!=o[0]&&n.push({sortable:l.$(o).data("sortable"),mode:"added"},{sortable:l.$(e).data("sortable"),mode:"removed"}),n.forEach(function(t,e){t.sortable&&t.sortable.element.trigger("change.uk.sortable",[t.sortable,s,t.mode])})}},dragenterData:function(t,e){if(t=l.$(t),1==arguments.length)return parseInt(t.data("child-dragenter"),10)||0;e?t.data("child-dragenter",Math.max(0,e)):t.removeData("child-dragenter")},moveElementNextTo:function(t,e){!0;var o=this,n=l.$(t).parent().css("min-height",""),s=function(t,e){var o=t.parentNode;if(e.parentNode!=o)return!1;var n=t.previousSibling;for(;n&&9!==n.nodeType;){if(n===e)return!0;n=n.previousSibling}return!1}(t,e)?e:e.nextSibling,a=n.children(),r=a.length;if(!o.options.animation)return e.parentNode.insertBefore(t,s),void l.Utils.checkDisplay(o.element.parent());n.css("min-height",n.height()),a.stop().each(function(){var t=l.$(this),e=t.position();e.width=t.width(),t.data("offset-before",e)}),e.parentNode.insertBefore(t,s),l.Utils.checkDisplay(o.element.parent()),(a=n.children().each(function(){var t=l.$(this);t.data("offset-after",t.position())}).each(function(){var t=l.$(this),e=t.data("offset-before");t.css({position:"absolute",top:e.top,left:e.left,minWidth:e.width})})).each(function(){var t=l.$(this),e=(t.data("offset-before"),t.data("offset-after"));t.css("pointer-events","none").width(),setTimeout(function(){t.animate({top:e.top,left:e.left},o.options.animation,function(){t.css({position:"",top:"",left:"",minWidth:"","pointer-events":""}).removeClass(o.options.overClass).removeData("child-dragenter"),--r||(n.css("min-height",""),l.Utils.checkDisplay(o.element.parent()))})},0)})},serialize:function(){var a,r,i=[];return this.element.children().each(function(t,e){a={};for(var o,n,s=0;s<e.attributes.length;s++)0===(r=e.attributes[s]).name.indexOf("data-")&&(o=r.name.substr(5),n=l.Utils.str2json(r.value),a[o]=n||"false"==r.value||"0"==r.value?n:r.value);i.push(a)}),i},checkEmptyList:function(t){t=t?l.$(t):this.element,this.options.emptyClass&&t[t.children().length?"removeClass":"addClass"](this.options.emptyClass)}}),l.sortable});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvc29ydGFibGUuanMiXSwibmFtZXMiOlsiYWRkb24iLCJjb21wb25lbnQiLCJ3aW5kb3ciLCJVSWtpdDIiLCJkZWZpbmUiLCJhbWQiLCJVSSIsImRyYWdnaW5nUGxhY2Vob2xkZXIiLCJjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQiLCJjdXJyZW50bHlEcmFnZ2luZ1RhcmdldCIsIm1vdmluZyIsImRlbGF5SWRsZSIsInRvdWNoZWRsaXN0cyIsIm1vdmVkIiwib3ZlckVsZW1lbnQiLCJzdGFydEV2ZW50Iiwic3VwcG9ydHNUb3VjaCIsIkRvY3VtZW50VG91Y2giLCJkb2N1bWVudCIsIlBPSU5URVJfRE9XTiIsIlBPSU5URVJfTU9WRSIsIlBPSU5URVJfVVAiLCJkZWZhdWx0cyIsImFuaW1hdGlvbiIsInRocmVzaG9sZCIsImNoaWxkQ2xhc3MiLCJwbGFjZWhvbGRlckNsYXNzIiwib3ZlckNsYXNzIiwiZHJhZ2dpbmdDbGFzcyIsImRyYWdNb3ZpbmdDbGFzcyIsImJhc2VDbGFzcyIsIm5vRHJhZ0NsYXNzIiwiZW1wdHlDbGFzcyIsImRyYWdDdXN0b21DbGFzcyIsImhhbmRsZUNsYXNzIiwiZ3JvdXAiLCJzdG9wIiwic3RhcnQiLCJjaGFuZ2UiLCJib290IiwicmVhZHkiLCJjb250ZXh0IiwiJCIsImVhY2giLCJlbGUiLCJ0aGlzIiwiZGF0YSIsInNvcnRhYmxlIiwiVXRpbHMiLCJvcHRpb25zIiwiYXR0ciIsIiRodG1sIiwib24iLCJlIiwic3JjIiwib3JpZ2luYWxFdmVudCIsInRhcmdldFRvdWNoZXMiLCJNYXRoIiwiYWJzIiwicGFnZVgiLCJwb3MiLCJ4IiwicGFnZVkiLCJ5IiwiYXBwbHkiLCJzaG93IiwiJGN1cnJlbnQiLCJhZGRDbGFzcyIsIiRzb3J0YWJsZSIsImVsZW1lbnQiLCJjaGlsZHJlbiIsIm9mZnNldCIsImV2IiwidG91Y2hlcyIsImxlZnQiLCJwYXJzZUludCIsInRvcCIsImNzcyIsImhlaWdodCIsImJvZHkiLCJvZmZzZXRIZWlnaHQiLCIkd2luIiwic2Nyb2xsVG9wIiwiY2VpbCIsImlubmVySGVpZ2h0IiwicGFyZW50IiwibGVuZ3RoIiwiY2xvc2VzdFNvcnRhYmxlIiwidHlwZSIsImRyYWdEcm9wIiwiZHJhZ0VuZCIsImluaXQiLCIkdGhpcyIsImNoZWNrRW1wdHlMaXN0IiwidWlkIiwiaGFuZGxlRHJhZ1N0YXJ0IiwiZGVsZWdhdGUiLCIkdGFyZ2V0IiwidGFyZ2V0IiwiJGxpbmsiLCJpcyIsInBhcmVudHMiLCJoYXNDbGFzcyIsImNsb3Nlc3QiLCJwcmV2ZW50RGVmYXVsdCIsIm9uZSIsInRyaWdnZXIiLCJ0cmltIiwibG9jYXRpb24iLCJocmVmIiwiZHJhZ1N0YXJ0IiwiaGFuZGxlRHJhZ0VudGVyIiwiZGVib3VuY2UiLCJkcmFnRW50ZXIiLCJoYW5kbGVEcmFnTGVhdmUiLCJwcmV2aW91c0NvdW50ZXIiLCJkcmFnZW50ZXJEYXRhIiwicmVtb3ZlQ2xhc3MiLCJoYW5kbGVUb3VjaE1vdmUiLCJtb3ZlRWxlbWVudE5leHRUbyIsInN0b3BQcm9wYWdhdGlvbiIsInJldHVyblZhbHVlIiwicHJldmVudCIsImZuIiwidG91Y2giLCJlbGVtZW50RnJvbVBvaW50Iiwic2Nyb2xsTGVmdCIsImNoaWxkIiwiY3VyIiwicGFyZW50Tm9kZSIsIm93bmVyRG9jdW1lbnQiLCJub2RlVHlwZSIsIm1vdmVVcFRvQ2hpbGROb2RlIiwiYWRkRHJhZ0hhbmRsZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZURyYWdIYW5kbGVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkcmFnTW92ZSIsImVsZW0iLCJidXR0b24iLCJyZW1vdmUiLCJldnQiLCJqb2luIiwiZGlzcGxheSIsIndpZHRoIiwicGFkZGluZyIsIm1vdXNlLW9mZnNldCIsIm9yaWdpbiIsImluZGV4IiwiYXBwZW5kIiwiaHRtbCIsImFwcGVuZFRvIiwic3RhcnQtbGlzdCIsInN0YXJ0LWluZGV4Iiwic29ydGFibGUtZ3JvdXAiLCJvdmVyQ2hpbGQiLCJvdmVyUm9vdCIsImRvY3VtZW50RWxlbWVudCIsImdyb3VwT3ZlciIsImN1cnJlbnRSb290IiwiZ3JvdXBDdXJyZW50IiwidW5kZWZpbmVkIiwicHVzaCIsImJlZm9yZSIsIiRkb2MiLCJjdXJyZW50bGlzdCIsInN0YXJ0bGlzdCIsImZvckVhY2giLCJlbCIsImkiLCJ0cmlnZ2VyQ2hhbmdlRXZlbnRzIiwib2xkUm9vdCIsIm5ld1Jvb3QiLCJ0cmlnZ2VycyIsIm1vZGUiLCJ2YWwiLCJhcmd1bWVudHMiLCJtYXgiLCJyZW1vdmVEYXRhIiwiZWxlbWVudFRvTW92ZU5leHRUbyIsImxpc3QiLCJuZXh0IiwiZWwxIiwiZWwyIiwicHJldmlvdXNTaWJsaW5nIiwiaXNCZWxvdyIsIm5leHRTaWJsaW5nIiwiY291bnQiLCJpbnNlcnRCZWZvcmUiLCJjaGVja0Rpc3BsYXkiLCJwb3NpdGlvbiIsIm1pbldpZHRoIiwic2V0VGltZW91dCIsImFuaW1hdGUiLCJwb2ludGVyLWV2ZW50cyIsInNlcmlhbGl6ZSIsIml0ZW0iLCJhdHRyaWJ1dGUiLCJqIiwiYXR0cmlidXRlcyIsIm5hbWUiLCJpbmRleE9mIiwic3Vic3RyIiwic3RyMmpzb24iLCJ2YWx1ZSJdLCJtYXBwaW5ncyI6IkNBSUEsU0FBVUEsR0FFTixJQUFJQyxFQUVBQyxPQUFPQyxTQUNQRixFQUFZRCxFQUFNRyxTQUdELG1CQUFWQyxRQUF3QkEsT0FBT0MsS0FDdENELE9BQU8saUJBQWtCLENBQUMsU0FBVSxXQUNoQyxPQUFPSCxHQUFhRCxFQUFNRyxVQVZ0QyxDQWNHLFNBQVNHLEdBRVIsYUFFQSxJQUNJQyxFQUFxQkMsRUFBMEJDLEVBQW1DQyxFQUFxQkMsRUFBV0MsRUFBY0MsRUFBT0MsRUFBYUMsRUFEcEpDLEVBQXVCLGlCQUFrQmQsUUFBVSxjQUFlQSxRQUFZQSxPQUFPZSxlQUFpQkMsb0JBQW9CRCxjQUcxSEUsRUFBZUgsRUFBaUIsY0FBZWQsT0FBUyxjQUFjLGFBQWdCLFlBQ3RGa0IsRUFBZUosRUFBaUIsY0FBZWQsT0FBUyxjQUFjLFlBQWUsWUFDckZtQixF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QUUwSSxHQUFRdkksS0FBS3dCLFFBRTdCeEIsS0FBS0ksUUFBUWpCLFlBQ2JvSixFQUFNQSxFQUFLOUcsV0FBV2dCLE9BQW9CLGNBQVgsWUFBMEJ6QyxLQUFLSSxRQUFRakIsZUFzRDNFMUIsRUFBR3lDIiwiZmlsZSI6ImNvbXBvbmVudHMvc29ydGFibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgVUlraXQgMi4yNy4yIHwgaHR0cDovL3d3dy5nZXR1aWtpdC5jb20gfCAoYykgMjAxNCBZT090aGVtZSB8IE1JVCBMaWNlbnNlICovXG4vKlxuICAqIEJhc2VkIG9uIG5hdGl2ZXNvcnRhYmxlIC0gQ29weXJpZ2h0IChjKSBCcmlhbiBHcmluc3RlYWQgLSBodHRwczovL2dpdGh1Yi5jb20vYmdyaW5zL25hdGl2ZXNvcnRhYmxlXG4gICovXG4oZnVuY3Rpb24oYWRkb24pIHtcblxuICAgIHZhciBjb21wb25lbnQ7XG5cbiAgICBpZiAod2luZG93LlVJa2l0Mikge1xuICAgICAgICBjb21wb25lbnQgPSBhZGRvbihVSWtpdDIpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoJ3Vpa2l0LXNvcnRhYmxlJywgWyd1aWtpdCddLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudCB8fCBhZGRvbihVSWtpdDIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbn0pKGZ1bmN0aW9uKFVJKXtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIHN1cHBvcnRzVG91Y2ggICAgICAgPSAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93IHx8ICdNU0dlc3R1cmUnIGluIHdpbmRvdykgfHwgKHdpbmRvdy5Eb2N1bWVudFRvdWNoICYmIGRvY3VtZW50IGluc3RhbmNlb2YgRG9jdW1lbnRUb3VjaCksXG4gICAgICAgIGRyYWdnaW5nUGxhY2Vob2xkZXIsIGN1cnJlbnRseURyYWdnaW5nRWxlbWVudCwgY3VycmVudGx5RHJhZ2dpbmdUYXJnZXQsIGRyYWdnaW5nLCBtb3ZpbmcsIGNsaWNrZWRsaW5rLCBkZWxheUlkbGUsIHRvdWNoZWRsaXN0cywgbW92ZWQsIG92ZXJFbGVtZW50LCBzdGFydEV2ZW50O1xuXG4gICAgdmFyIFBPSU5URVJfRE9XTiA9IHN1cHBvcnRzVG91Y2ggPyAoJ01TR2VzdHVyZScgaW4gd2luZG93ID8gJ3BvaW50ZXJkb3duJzondG91Y2hzdGFydCcpIDogJ21vdXNlZG93bicsXG4gICAgICAgIFBPSU5URVJfTU9WRSA9IHN1cHBvcnRzVG91Y2ggPyAoJ01TR2VzdHVyZScgaW4gd2luZG93ID8gJ3BvaW50ZXJtb3ZlJzondG91Y2htb3ZlJykgOiAnbW91c2Vtb3ZlJyxcbiAgICAgICAgUE9JTlRFUl9VUCAgID0gc3VwcG9ydHNUb3VjaCA/ICgnTVNHZXN0dXJlJyBpbiB3aW5kb3cgPyAncG9pbnRlcnVwJzondG91Y2hlbmQnKSA6ICdtb3VzZXVwJztcblxuICAgIGZ1bmN0aW9uIGNsb3Nlc3RTb3J0YWJsZShlbGUpIHtcblxuICAgICAgICBlbGUgPSBVSS4kKGVsZSk7XG5cbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgaWYgKGVsZS5kYXRhKCdzb3J0YWJsZScpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsZSA9IFVJLiQoZWxlKS5wYXJlbnQoKTtcbiAgICAgICAgfSB3aGlsZShlbGUubGVuZ3RoKTtcblxuICAgICAgICByZXR1cm4gZWxlO1xuICAgIH1cblxuICAgIFVJLmNvbXBvbmVudCgnc29ydGFibGUnLCB7XG5cbiAgICAgICAgZGVmYXVsdHM6IHtcblxuICAgICAgICAgICAgYW5pbWF0aW9uICAgICAgICA6IDE1MCxcbiAgICAgICAgICAgIHRocmVzaG9sZCAgICAgICAgOiAxMCxcblxuICAgICAgICAgICAgY2hpbGRDbGFzcyAgICAgICA6ICd1ay1zb3J0YWJsZS1pdGVtJyxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyQ2xhc3MgOiAndWstc29ydGFibGUtcGxhY2Vob2xkZXInLFxuICAgICAgICAgICAgb3ZlckNsYXNzICAgICAgICA6ICd1ay1zb3J0YWJsZS1vdmVyJyxcbiAgICAgICAgICAgIGRyYWdnaW5nQ2xhc3MgICAgOiAndWstc29ydGFibGUtZHJhZ2dlZCcsXG4gICAgICAgICAgICBkcmFnTW92aW5nQ2xhc3MgIDogJ3VrLXNvcnRhYmxlLW1vdmluZycsXG4gICAgICAgICAgICBiYXNlQ2xhc3MgICAgICAgIDogJ3VrLXNvcnRhYmxlJyxcbiAgICAgICAgICAgIG5vRHJhZ0NsYXNzICAgICAgOiAndWstc29ydGFibGUtbm9kcmFnJyxcbiAgICAgICAgICAgIGVtcHR5Q2xhc3MgICAgICAgOiAndWstc29ydGFibGUtZW1wdHknLFxuICAgICAgICAgICAgZHJhZ0N1c3RvbUNsYXNzICA6ICcnLFxuICAgICAgICAgICAgaGFuZGxlQ2xhc3MgICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgZ3JvdXAgICAgICAgICAgICA6IGZhbHNlLFxuXG4gICAgICAgICAgICBzdG9wICAgICAgICAgICAgIDogZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgICAgIHN0YXJ0ICAgICAgICAgICAgOiBmdW5jdGlvbigpIHt9LFxuICAgICAgICAgICAgY2hhbmdlICAgICAgICAgICA6IGZ1bmN0aW9uKCkge31cbiAgICAgICAgfSxcblxuICAgICAgICBib290OiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLy8gYXV0byBpbml0XG4gICAgICAgICAgICBVSS5yZWFkeShmdW5jdGlvbihjb250ZXh0KSB7XG5cbiAgICAgICAgICAgICAgICBVSS4kKCdbZGF0YS11ay1zb3J0YWJsZV0nLCBjb250ZXh0KS5lYWNoKGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IFVJLiQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIWVsZS5kYXRhKCdzb3J0YWJsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBVSS5zb3J0YWJsZShlbGUsIFVJLlV0aWxzLm9wdGlvbnMoZWxlLmF0dHIoJ2RhdGEtdWstc29ydGFibGUnKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgVUkuJGh0bWwub24oUE9JTlRFUl9NT1ZFLCBmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGVsYXlJZGxlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNyYyA9IGUub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzID8gZS5vcmlnaW5hbEV2ZW50LnRhcmdldFRvdWNoZXNbMF0gOiBlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhzcmMucGFnZVggLSBkZWxheUlkbGUucG9zLngpID4gZGVsYXlJZGxlLnRocmVzaG9sZCB8fCBNYXRoLmFicyhzcmMucGFnZVkgLSBkZWxheUlkbGUucG9zLnkpID4gZGVsYXlJZGxlLnRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXlJZGxlLmFwcGx5KHNyYyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZHJhZ2dpbmdQbGFjZWhvbGRlcikge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghbW92aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdQbGFjZWhvbGRlci5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nUGxhY2Vob2xkZXIuJGN1cnJlbnQuYWRkQ2xhc3MoZHJhZ2dpbmdQbGFjZWhvbGRlci4kc29ydGFibGUub3B0aW9ucy5wbGFjZWhvbGRlckNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nUGxhY2Vob2xkZXIuJHNvcnRhYmxlLmVsZW1lbnQuY2hpbGRyZW4oKS5hZGRDbGFzcyhkcmFnZ2luZ1BsYWNlaG9sZGVyLiRzb3J0YWJsZS5vcHRpb25zLmNoaWxkQ2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBVSS4kaHRtbC5hZGRDbGFzcyhkcmFnZ2luZ1BsYWNlaG9sZGVyLiRzb3J0YWJsZS5vcHRpb25zLmRyYWdNb3ZpbmdDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gZHJhZ2dpbmdQbGFjZWhvbGRlci5kYXRhKCdtb3VzZS1vZmZzZXQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ICAgICA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzICYmIGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdIHx8IGUub3JpZ2luYWxFdmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgICA9IHBhcnNlSW50KGV2LnBhZ2VYLCAxMCkgKyBvZmZzZXQubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCAgICA9IHBhcnNlSW50KGV2LnBhZ2VZLCAxMCkgKyBvZmZzZXQudG9wO1xuXG4gICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nUGxhY2Vob2xkZXIuY3NzKHtsZWZ0OiBsZWZ0LCB0b3A6IHRvcCB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBhZGp1c3QgZG9jdW1lbnQgc2Nyb2xsaW5nXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvcCArIChkcmFnZ2luZ1BsYWNlaG9sZGVyLmhlaWdodCgpLzMpID4gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3AgPCBVSS4kd2luLnNjcm9sbFRvcCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBVSS4kd2luLnNjcm9sbFRvcChVSS4kd2luLnNjcm9sbFRvcCgpIC0gTWF0aC5jZWlsKGRyYWdnaW5nUGxhY2Vob2xkZXIuaGVpZ2h0KCkvMykpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCAodG9wICsgKGRyYWdnaW5nUGxhY2Vob2xkZXIuaGVpZ2h0KCkvMykpID4gKHdpbmRvdy5pbm5lckhlaWdodCArIFVJLiR3aW4uc2Nyb2xsVG9wKCkpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgVUkuJHdpbi5zY3JvbGxUb3AoVUkuJHdpbi5zY3JvbGxUb3AoKSArIE1hdGguY2VpbChkcmFnZ2luZ1BsYWNlaG9sZGVyLmhlaWdodCgpLzMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBVSS4kaHRtbC5vbihQT0lOVEVSX1VQLCBmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgICAgICAgICBkZWxheUlkbGUgPSBjbGlja2VkbGluayA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gZHJhZ2dpbmc/XG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQgfHwgIWRyYWdnaW5nUGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29tcGxldGVseSByZXNldCBkcmFnZ2luZyBhdHRlbXB0LiB3aWxsIGNhdXNlIHdlaXJkIGRlbGF5IGJlaGF2aW9yIGVsc2V3aXNlXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseURyYWdnaW5nRWxlbWVudCA9IGRyYWdnaW5nUGxhY2Vob2xkZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gaW5zaWRlIG9yIG91dHNpZGUgb2Ygc29ydGFibGU/XG4gICAgICAgICAgICAgICAgdmFyIHNvcnRhYmxlICA9IGNsb3Nlc3RTb3J0YWJsZShjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQpLFxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQgPSBkcmFnZ2luZ1BsYWNlaG9sZGVyLiRzb3J0YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgZXYgICAgICAgID0geyB0eXBlOiBlLnR5cGUgfTtcblxuICAgICAgICAgICAgICAgIGlmIChzb3J0YWJsZVswXSkge1xuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuZHJhZ0Ryb3AoZXYsIGNvbXBvbmVudC5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29tcG9uZW50LmRyYWdFbmQoZXYsIGNvbXBvbmVudC5lbGVtZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICB2YXIgJHRoaXMgICA9IHRoaXMsXG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMuZWxlbWVudFswXTtcblxuICAgICAgICAgICAgdG91Y2hlZGxpc3RzID0gW107XG5cbiAgICAgICAgICAgIHRoaXMuY2hlY2tFbXB0eUxpc3QoKTtcblxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmRhdGEoJ3NvcnRhYmxlLWdyb3VwJywgdGhpcy5vcHRpb25zLmdyb3VwID8gdGhpcy5vcHRpb25zLmdyb3VwIDogVUkuVXRpbHMudWlkKCdzb3J0YWJsZS1ncm91cCcpKTtcblxuICAgICAgICAgICAgdmFyIGhhbmRsZURyYWdTdGFydCA9IGRlbGVnYXRlKGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgICAgICAgIGlmIChlLmRhdGEgJiYgZS5kYXRhLnNvcnRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgJHRhcmdldCA9IFVJLiQoZS50YXJnZXQpLFxuICAgICAgICAgICAgICAgICAgICAkbGluayAgID0gJHRhcmdldC5pcygnYVtocmVmXScpID8gJHRhcmdldDokdGFyZ2V0LnBhcmVudHMoJ2FbaHJlZl0nKTtcblxuICAgICAgICAgICAgICAgIGlmICgkdGFyZ2V0LmlzKCc6aW5wdXQnKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLm9wdGlvbnMuaGFuZGxlQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZSA9ICR0YXJnZXQuaGFzQ2xhc3MoJHRoaXMub3B0aW9ucy5oYW5kbGVDbGFzcykgPyAkdGFyZ2V0IDogJHRhcmdldC5jbG9zZXN0KCcuJyskdGhpcy5vcHRpb25zLmhhbmRsZUNsYXNzLCAkdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFoYW5kbGUubGVuZ3RoKSByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRsaW5rLmxlbmd0aCkge1xuXG4gICAgICAgICAgICAgICAgICAgICRsaW5rLm9uZSgnY2xpY2snLCBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkub25lKFBPSU5URVJfVVAsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbW92ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGluay50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdXBwb3J0c1RvdWNoICYmICRsaW5rLmF0dHIoJ2hyZWYnKS50cmltKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9ICRsaW5rLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGUuZGF0YSA9IGUuZGF0YSB8fCB7fTtcblxuICAgICAgICAgICAgICAgIGUuZGF0YS5zb3J0YWJsZSA9IGVsZW1lbnQ7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJHRoaXMuZHJhZ1N0YXJ0KGUsIHRoaXMpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBoYW5kbGVEcmFnRW50ZXIgPSBkZWxlZ2F0ZShVSS5VdGlscy5kZWJvdW5jZShmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICR0aGlzLmRyYWdFbnRlcihlLCB0aGlzKTtcbiAgICAgICAgICAgIH0pLCA0MCk7XG5cbiAgICAgICAgICAgIHZhciBoYW5kbGVEcmFnTGVhdmUgPSBkZWxlZ2F0ZShmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IGRyYWdlbnRlciBvbiBhIGNoaWxkIGZyb20gYWxsb3dpbmcgYSBkcmFnbGVhdmUgb24gdGhlIGNvbnRhaW5lclxuICAgICAgICAgICAgICAgIHZhciBwcmV2aW91c0NvdW50ZXIgPSAkdGhpcy5kcmFnZW50ZXJEYXRhKHRoaXMpO1xuICAgICAgICAgICAgICAgICR0aGlzLmRyYWdlbnRlckRhdGEodGhpcywgcHJldmlvdXNDb3VudGVyIC0gMSk7XG5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgZml4IGZvciBjaGlsZCBlbGVtZW50cyBmaXJpbmcgZHJhZ2VudGVyIGJlZm9yZSB0aGUgcGFyZW50IGZpcmVzIGRyYWdsZWF2ZVxuICAgICAgICAgICAgICAgIGlmICghJHRoaXMuZHJhZ2VudGVyRGF0YSh0aGlzKSkge1xuICAgICAgICAgICAgICAgICAgICBVSS4kKHRoaXMpLnJlbW92ZUNsYXNzKCR0aGlzLm9wdGlvbnMub3ZlckNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZHJhZ2VudGVyRGF0YSh0aGlzLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBoYW5kbGVUb3VjaE1vdmUgPSBkZWxlZ2F0ZShmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRseURyYWdnaW5nRWxlbWVudCB8fFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQgPT09IHRoaXMgfHxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5RHJhZ2dpbmdUYXJnZXQgPT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCR0aGlzLm9wdGlvbnMub3ZlckNsYXNzKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlEcmFnZ2luZ1RhcmdldCA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAkdGhpcy5tb3ZlRWxlbWVudE5leHRUbyhjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQsIHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZXZlbnQoZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gQmluZC91bmJpbmQgc3RhbmRhcmQgbW91c2UvdG91Y2ggZXZlbnRzIGFzIGEgcG9seWZpbGwuXG4gICAgICAgICAgICBmdW5jdGlvbiBhZGREcmFnSGFuZGxlcnMoKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3VwcG9ydHNUb3VjaCAmJiBzdGFydEV2ZW50LnRvdWNoZXMgJiYgc3RhcnRFdmVudC50b3VjaGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoUE9JTlRFUl9NT1ZFLCBoYW5kbGVUb3VjaE1vdmUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGhhbmRsZURyYWdFbnRlciwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgaGFuZGxlRHJhZ0xlYXZlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNlbGVjdHN0YXJ0XCIsIHByZXZlbnQsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlRHJhZ0hhbmRsZXJzKCkge1xuICAgICAgICAgICAgICAgIGlmIChzdXBwb3J0c1RvdWNoICYmIHN0YXJ0RXZlbnQudG91Y2hlcyAmJiBzdGFydEV2ZW50LnRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihQT0lOVEVSX01PVkUsIGhhbmRsZVRvdWNoTW92ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgaGFuZGxlRHJhZ0VudGVyLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBoYW5kbGVEcmFnTGVhdmUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2VsZWN0c3RhcnRcIiwgcHJldmVudCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmFkZERyYWdIYW5kbGVycyAgICA9IGFkZERyYWdIYW5kbGVycztcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRHJhZ0hhbmRsZXJzID0gcmVtb3ZlRHJhZ0hhbmRsZXJzO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVEcmFnTW92ZShlKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRseURyYWdnaW5nRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHRoaXMuZHJhZ01vdmUoZSwgJHRoaXMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWxlZ2F0ZShmbikge1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdG91Y2gsIHRhcmdldCwgY29udGV4dDtcblxuICAgICAgICAgICAgICAgICAgICBzdGFydEV2ZW50ID0gZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG91Y2ggID0gZS50b3VjaGVzICYmIGUudG91Y2hlc1swXSB8fCBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdG91Y2gudGFyZ2V0IHx8IGUudGFyZ2V0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXggZXZlbnQudGFyZ2V0IGZvciBhIHRvdWNoIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VwcG9ydHNUb3VjaCAmJiBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh0b3VjaC5wYWdlWCAtIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCwgdG91Y2gucGFnZVkgLSBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJFbGVtZW50ID0gVUkuJCh0YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKFVJLiQodGFyZ2V0KS5oYXNDbGFzcygnLicrJHRoaXMub3B0aW9ucy5jaGlsZENsYXNzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm4uYXBwbHkodGFyZ2V0LCBbZV0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldCAhPT0gZWxlbWVudCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBhIGNoaWxkIGlzIGluaXRpYXRpbmcgdGhlIGV2ZW50IG9yIGVuZGluZyBpdCwgdGhlbiB1c2UgdGhlIGNvbnRhaW5lciBhcyBjb250ZXh0IGZvciB0aGUgY2FsbGJhY2suXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gbW92ZVVwVG9DaGlsZE5vZGUoZWxlbWVudCwgdGFyZ2V0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbi5hcHBseShjb250ZXh0LCBbZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoUE9JTlRFUl9NT1ZFLCBoYW5kbGVEcmFnTW92ZSwgZmFsc2UpO1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFBPSU5URVJfRE9XTiwgaGFuZGxlRHJhZ1N0YXJ0LCBmYWxzZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZHJhZ1N0YXJ0OiBmdW5jdGlvbihlLCBlbGVtKSB7XG5cbiAgICAgICAgICAgIG1vdmVkICAgID0gZmFsc2U7XG4gICAgICAgICAgICBtb3ZpbmcgICA9IGZhbHNlO1xuICAgICAgICAgICAgZHJhZ2dpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgdmFyICR0aGlzICAgID0gdGhpcyxcbiAgICAgICAgICAgICAgICB0YXJnZXQgICA9IFVJLiQoZS50YXJnZXQpO1xuXG4gICAgICAgICAgICBpZiAoIXN1cHBvcnRzVG91Y2ggJiYgZS5idXR0b249PTIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0YXJnZXQuaXMoJy4nKyR0aGlzLm9wdGlvbnMubm9EcmFnQ2xhc3MpIHx8IHRhcmdldC5jbG9zZXN0KCcuJyskdGhpcy5vcHRpb25zLm5vRHJhZ0NsYXNzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHByZXZlbnQgZHJhZ2dpbmcgaWYgdGFnZXQgaXMgYSBmb3JtIGZpZWxkXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmlzKCc6aW5wdXQnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3VycmVudGx5RHJhZ2dpbmdFbGVtZW50ID0gZWxlbTtcblxuICAgICAgICAgICAgLy8gaW5pdCBkcmFnIHBsYWNlaG9sZGVyXG4gICAgICAgICAgICBpZiAoZHJhZ2dpbmdQbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgICAgIGRyYWdnaW5nUGxhY2Vob2xkZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciAkY3VycmVudCA9IFVJLiQoY3VycmVudGx5RHJhZ2dpbmdFbGVtZW50KSwgb2Zmc2V0ID0gJGN1cnJlbnQub2Zmc2V0KCksIGV2ID0gZS50b3VjaGVzICYmIGUudG91Y2hlc1swXSB8fCBlO1xuXG4gICAgICAgICAgICBkZWxheUlkbGUgPSB7XG5cbiAgICAgICAgICAgICAgICBwb3MgICAgICAgOiB7IHg6ZXYucGFnZVgsIHk6ZXYucGFnZVkgfSxcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQgOiAkdGhpcy5vcHRpb25zLmhhbmRsZUNsYXNzID8gMSA6ICR0aGlzLm9wdGlvbnMudGhyZXNob2xkLFxuICAgICAgICAgICAgICAgIGFwcGx5ICAgICA6IGZ1bmN0aW9uKGV2dCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nUGxhY2Vob2xkZXIgPSBVSS4kKCc8ZGl2IGNsYXNzPVwiJysoWyR0aGlzLm9wdGlvbnMuZHJhZ2dpbmdDbGFzcywgJHRoaXMub3B0aW9ucy5kcmFnQ3VzdG9tQ2xhc3NdLmpvaW4oJyAnKSkrJ1wiPjwvZGl2PicpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5IDogJ25vbmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wICAgICA6IG9mZnNldC50b3AsXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ICAgIDogb2Zmc2V0LmxlZnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCAgIDogJGN1cnJlbnQud2lkdGgoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCAgOiAkY3VycmVudC5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmcgOiAkY3VycmVudC5jc3MoJ3BhZGRpbmcnKVxuICAgICAgICAgICAgICAgICAgICB9KS5kYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdtb3VzZS1vZmZzZXQnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA6IG9mZnNldC5sZWZ0IC0gcGFyc2VJbnQoZXYucGFnZVgsIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AgIDogb2Zmc2V0LnRvcCAgLSBwYXJzZUludChldi5wYWdlWSwgMTApXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luIDogJHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ICA6ICRjdXJyZW50LmluZGV4KClcbiAgICAgICAgICAgICAgICAgICAgfSkuYXBwZW5kKCRjdXJyZW50Lmh0bWwoKSkuYXBwZW5kVG8oJ2JvZHknKTtcblxuICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZ1BsYWNlaG9sZGVyLiRjdXJyZW50ICA9ICRjdXJyZW50O1xuICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZ1BsYWNlaG9sZGVyLiRzb3J0YWJsZSA9ICR0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgICRjdXJyZW50LmRhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXJ0LWxpc3QnOiAkY3VycmVudC5wYXJlbnQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdGFydC1pbmRleCc6ICRjdXJyZW50LmluZGV4KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAnc29ydGFibGUtZ3JvdXAnOiAkdGhpcy5vcHRpb25zLmdyb3VwXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmFkZERyYWdIYW5kbGVycygpO1xuXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLm9wdGlvbnMuc3RhcnQodGhpcywgY3VycmVudGx5RHJhZ2dpbmdFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMudHJpZ2dlcignc3RhcnQudWsuc29ydGFibGUnLCBbJHRoaXMsIGN1cnJlbnRseURyYWdnaW5nRWxlbWVudCwgZHJhZ2dpbmdQbGFjZWhvbGRlcl0pO1xuXG4gICAgICAgICAgICAgICAgICAgIG1vdmVkICAgICA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGRlbGF5SWRsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG5cbiAgICAgICAgZHJhZ01vdmU6IGZ1bmN0aW9uKGUsIGVsZW0pIHtcblxuICAgICAgICAgICAgb3ZlckVsZW1lbnQgPSBVSS4kKGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoZS5wYWdlWCAtIChkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuc2Nyb2xsTGVmdCB8fCAwKSwgZS5wYWdlWSAtIChkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IDApKSk7XG5cbiAgICAgICAgICAgIHZhciBvdmVyUm9vdCAgICAgPSBvdmVyRWxlbWVudC5jbG9zZXN0KCcuJyt0aGlzLm9wdGlvbnMuYmFzZUNsYXNzKSxcbiAgICAgICAgICAgICAgICBncm91cE92ZXIgICAgPSBvdmVyUm9vdC5kYXRhKCdzb3J0YWJsZS1ncm91cCcpLFxuICAgICAgICAgICAgICAgICRjdXJyZW50ICAgICA9IFVJLiQoY3VycmVudGx5RHJhZ2dpbmdFbGVtZW50KSxcbiAgICAgICAgICAgICAgICBjdXJyZW50Um9vdCAgPSAkY3VycmVudC5wYXJlbnQoKSxcbiAgICAgICAgICAgICAgICBncm91cEN1cnJlbnQgPSAkY3VycmVudC5kYXRhKCdzb3J0YWJsZS1ncm91cCcpLFxuICAgICAgICAgICAgICAgIG92ZXJDaGlsZDtcblxuICAgICAgICAgICAgaWYgKG92ZXJSb290WzBdICE9PSBjdXJyZW50Um9vdFswXSAmJiBncm91cEN1cnJlbnQgIT09IHVuZGVmaW5lZCAmJiBncm91cE92ZXIgPT09IGdyb3VwQ3VycmVudCkge1xuXG4gICAgICAgICAgICAgICAgb3ZlclJvb3QuZGF0YSgnc29ydGFibGUnKS5hZGREcmFnSGFuZGxlcnMoKTtcblxuICAgICAgICAgICAgICAgIHRvdWNoZWRsaXN0cy5wdXNoKG92ZXJSb290KTtcbiAgICAgICAgICAgICAgICBvdmVyUm9vdC5jaGlsZHJlbigpLmFkZENsYXNzKHRoaXMub3B0aW9ucy5jaGlsZENsYXNzKTtcblxuICAgICAgICAgICAgICAgIC8vIHN3YXAgcm9vdFxuICAgICAgICAgICAgICAgIGlmIChvdmVyUm9vdC5jaGlsZHJlbigpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlckNoaWxkID0gb3ZlckVsZW1lbnQuY2xvc2VzdCgnLicrdGhpcy5vcHRpb25zLmNoaWxkQ2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdmVyQ2hpbGQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyQ2hpbGQuYmVmb3JlKCRjdXJyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJSb290LmFwcGVuZCgkY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIGVtcHR5IGxpc3RcbiAgICAgICAgICAgICAgICAgICAgb3ZlckVsZW1lbnQuYXBwZW5kKCRjdXJyZW50KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBVSS4kZG9jLnRyaWdnZXIoJ21vdXNlb3ZlcicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNoZWNrRW1wdHlMaXN0KCk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrRW1wdHlMaXN0KGN1cnJlbnRSb290KTtcbiAgICAgICAgfSxcblxuICAgICAgICBkcmFnRW50ZXI6IGZ1bmN0aW9uKGUsIGVsZW0pIHtcblxuICAgICAgICAgICAgaWYgKCFjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQgfHwgY3VycmVudGx5RHJhZ2dpbmdFbGVtZW50ID09PSBlbGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwcmV2aW91c0NvdW50ZXIgPSB0aGlzLmRyYWdlbnRlckRhdGEoZWxlbSk7XG5cbiAgICAgICAgICAgIHRoaXMuZHJhZ2VudGVyRGF0YShlbGVtLCBwcmV2aW91c0NvdW50ZXIgKyAxKTtcblxuICAgICAgICAgICAgLy8gUHJldmVudCBkcmFnZW50ZXIgb24gYSBjaGlsZCBmcm9tIGFsbG93aW5nIGEgZHJhZ2xlYXZlIG9uIHRoZSBjb250YWluZXJcbiAgICAgICAgICAgIGlmIChwcmV2aW91c0NvdW50ZXIgPT09IDApIHtcblxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50bGlzdCA9IFVJLiQoZWxlbSkucGFyZW50KCksXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0bGlzdCAgID0gVUkuJChjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQpLmRhdGEoJ3N0YXJ0LWxpc3QnKTtcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50bGlzdFswXSAhPT0gc3RhcnRsaXN0WzBdKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwT3ZlciAgICA9IGN1cnJlbnRsaXN0LmRhdGEoJ3NvcnRhYmxlLWdyb3VwJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cEN1cnJlbnQgPSBVSS4kKGN1cnJlbnRseURyYWdnaW5nRWxlbWVudCkuZGF0YSgnc29ydGFibGUtZ3JvdXAnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoKGdyb3VwT3ZlciB8fCAgZ3JvdXBDdXJyZW50KSAmJiAoZ3JvdXBPdmVyICE9IGdyb3VwQ3VycmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIFVJLiQoZWxlbSkuYWRkQ2xhc3ModGhpcy5vcHRpb25zLm92ZXJDbGFzcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlRWxlbWVudE5leHRUbyhjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQsIGVsZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZHJhZ0VuZDogZnVuY3Rpb24oZSwgZWxlbSkge1xuXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyBhdm9pZCB0cmlnZ2VyaW5nIGV2ZW50IHR3aWNlXG4gICAgICAgICAgICBpZiAoY3VycmVudGx5RHJhZ2dpbmdFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogdHJpZ2dlciBvbiByaWdodCBlbGVtZW50P1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zdG9wKGVsZW0pO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignc3RvcC51ay5zb3J0YWJsZScsIFt0aGlzXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN1cnJlbnRseURyYWdnaW5nRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICBjdXJyZW50bHlEcmFnZ2luZ1RhcmdldCAgPSBudWxsO1xuXG4gICAgICAgICAgICB0b3VjaGVkbGlzdHMucHVzaCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdG91Y2hlZGxpc3RzLmZvckVhY2goZnVuY3Rpb24oZWwsIGkpIHtcbiAgICAgICAgICAgICAgICBVSS4kKGVsKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBVSS4kKHRoaXMpLnJlbW92ZUNsYXNzKCR0aGlzLm9wdGlvbnMub3ZlckNsYXNzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygkdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyQ2xhc3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCR0aGlzLm9wdGlvbnMuY2hpbGRDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5kcmFnZW50ZXJEYXRhKHRoaXMsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRvdWNoZWRsaXN0cyA9IFtdO1xuXG4gICAgICAgICAgICBVSS4kaHRtbC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuZHJhZ01vdmluZ0NsYXNzKTtcblxuICAgICAgICAgICAgdGhpcy5yZW1vdmVEcmFnSGFuZGxlcnMoKTtcblxuICAgICAgICAgICAgaWYgKGRyYWdnaW5nUGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgICAgICBkcmFnZ2luZ1BsYWNlaG9sZGVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIGRyYWdnaW5nUGxhY2Vob2xkZXIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGRyYWdEcm9wOiBmdW5jdGlvbihlLCBlbGVtKSB7XG5cbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdkcm9wJykge1xuXG4gICAgICAgICAgICAgICAgaWYgKGUuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyQ2hhbmdlRXZlbnRzKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdHJpZ2dlckNoYW5nZUV2ZW50czogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIC8vIHRyaWdnZXIgZXZlbnRzIG9uY2VcbiAgICAgICAgICAgIGlmICghY3VycmVudGx5RHJhZ2dpbmdFbGVtZW50KSByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciAkY3VycmVudCA9IFVJLiQoY3VycmVudGx5RHJhZ2dpbmdFbGVtZW50KSxcbiAgICAgICAgICAgICAgICBvbGRSb290ICA9IGRyYWdnaW5nUGxhY2Vob2xkZXIuZGF0YSgnb3JpZ2luJyksXG4gICAgICAgICAgICAgICAgbmV3Um9vdCAgPSAkY3VycmVudC5jbG9zZXN0KCcuJyt0aGlzLm9wdGlvbnMuYmFzZUNsYXNzKSxcbiAgICAgICAgICAgICAgICB0cmlnZ2VycyA9IFtdLFxuICAgICAgICAgICAgICAgIGVsICAgICAgID0gVUkuJChjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQpO1xuXG4gICAgICAgICAgICAvLyBldmVudHMgZGVwZW5kaW5nIG9uIG1vdmUgaW5zaWRlIGxpc3RzIG9yIGFjcm9zcyBsaXN0c1xuICAgICAgICAgICAgaWYgKG9sZFJvb3RbMF0gPT09IG5ld1Jvb3RbMF0gJiYgZHJhZ2dpbmdQbGFjZWhvbGRlci5kYXRhKCdpbmRleCcpICE9ICRjdXJyZW50LmluZGV4KCkgKSB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlcnMucHVzaCh7c29ydGFibGU6IHRoaXMsIG1vZGU6ICdtb3ZlZCd9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob2xkUm9vdFswXSAhPSBuZXdSb290WzBdKSB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlcnMucHVzaCh7c29ydGFibGU6IFVJLiQobmV3Um9vdCkuZGF0YSgnc29ydGFibGUnKSwgbW9kZTogJ2FkZGVkJ30sIHtzb3J0YWJsZTogVUkuJChvbGRSb290KS5kYXRhKCdzb3J0YWJsZScpLCBtb2RlOiAncmVtb3ZlZCd9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJpZ2dlcnMuZm9yRWFjaChmdW5jdGlvbiAodHJpZ2dlciwgaSkge1xuICAgICAgICAgICAgICAgIGlmICh0cmlnZ2VyLnNvcnRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXIuc29ydGFibGUuZWxlbWVudC50cmlnZ2VyKCdjaGFuZ2UudWsuc29ydGFibGUnLCBbdHJpZ2dlci5zb3J0YWJsZSwgZWwsIHRyaWdnZXIubW9kZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGRyYWdlbnRlckRhdGE6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbCkge1xuXG4gICAgICAgICAgICBlbGVtZW50ID0gVUkuJChlbGVtZW50KTtcblxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChlbGVtZW50LmRhdGEoJ2NoaWxkLWRyYWdlbnRlcicpLCAxMCkgfHwgMDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXZhbCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRGF0YSgnY2hpbGQtZHJhZ2VudGVyJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YSgnY2hpbGQtZHJhZ2VudGVyJywgTWF0aC5tYXgoMCwgdmFsKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgbW92ZUVsZW1lbnROZXh0VG86IGZ1bmN0aW9uKGVsZW1lbnQsIGVsZW1lbnRUb01vdmVOZXh0VG8pIHtcblxuICAgICAgICAgICAgZHJhZ2dpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgJHRoaXMgICAgPSB0aGlzLFxuICAgICAgICAgICAgICAgIGxpc3QgICAgID0gVUkuJChlbGVtZW50KS5wYXJlbnQoKS5jc3MoJ21pbi1oZWlnaHQnLCAnJyksXG4gICAgICAgICAgICAgICAgbmV4dCAgICAgPSBpc0JlbG93KGVsZW1lbnQsIGVsZW1lbnRUb01vdmVOZXh0VG8pID8gZWxlbWVudFRvTW92ZU5leHRUbyA6IGVsZW1lbnRUb01vdmVOZXh0VG8ubmV4dFNpYmxpbmcsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW4gPSBsaXN0LmNoaWxkcmVuKCksXG4gICAgICAgICAgICAgICAgY291bnQgICAgPSBjaGlsZHJlbi5sZW5ndGg7XG5cbiAgICAgICAgICAgIGlmICghJHRoaXMub3B0aW9ucy5hbmltYXRpb24pIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50VG9Nb3ZlTmV4dFRvLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIG5leHQpO1xuICAgICAgICAgICAgICAgIFVJLlV0aWxzLmNoZWNrRGlzcGxheSgkdGhpcy5lbGVtZW50LnBhcmVudCgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxpc3QuY3NzKCdtaW4taGVpZ2h0JywgbGlzdC5oZWlnaHQoKSk7XG5cbiAgICAgICAgICAgIGNoaWxkcmVuLnN0b3AoKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9IFVJLiQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IGVsZS5wb3NpdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldC53aWR0aCA9IGVsZS53aWR0aCgpO1xuXG4gICAgICAgICAgICAgICAgZWxlLmRhdGEoJ29mZnNldC1iZWZvcmUnLCBvZmZzZXQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGVsZW1lbnRUb01vdmVOZXh0VG8ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWxlbWVudCwgbmV4dCk7XG5cbiAgICAgICAgICAgIFVJLlV0aWxzLmNoZWNrRGlzcGxheSgkdGhpcy5lbGVtZW50LnBhcmVudCgpKTtcblxuICAgICAgICAgICAgY2hpbGRyZW4gPSBsaXN0LmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlICAgID0gVUkuJCh0aGlzKTtcbiAgICAgICAgICAgICAgICBlbGUuZGF0YSgnb2Zmc2V0LWFmdGVyJywgZWxlLnBvc2l0aW9uKCkpO1xuICAgICAgICAgICAgfSkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlICAgID0gVUkuJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlID0gZWxlLmRhdGEoJ29mZnNldC1iZWZvcmUnKTtcbiAgICAgICAgICAgICAgICBlbGUuY3NzKHtwb3NpdGlvbjonYWJzb2x1dGUnLCB0b3A6YmVmb3JlLnRvcCwgbGVmdDpiZWZvcmUubGVmdCwgbWluV2lkdGg6YmVmb3JlLndpZHRoIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNoaWxkcmVuLmVhY2goZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIHZhciBlbGUgICAgPSBVSS4kKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBiZWZvcmUgPSBlbGUuZGF0YSgnb2Zmc2V0LWJlZm9yZScpLFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBlbGUuZGF0YSgnb2Zmc2V0LWFmdGVyJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgZWxlLmNzcygncG9pbnRlci1ldmVudHMnLCAnbm9uZScpLndpZHRoKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlLmFuaW1hdGUoeyd0b3AnOm9mZnNldC50b3AsICdsZWZ0JzpvZmZzZXQubGVmdH0sICR0aGlzLm9wdGlvbnMuYW5pbWF0aW9uLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUuY3NzKHtwb3NpdGlvbjonJyx0b3A6JycsIGxlZnQ6JycsIG1pbldpZHRoOiAnJywgJ3BvaW50ZXItZXZlbnRzJzonJ30pLnJlbW92ZUNsYXNzKCR0aGlzLm9wdGlvbnMub3ZlckNsYXNzKS5yZW1vdmVEYXRhKCdjaGlsZC1kcmFnZW50ZXInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5jc3MoJ21pbi1oZWlnaHQnLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVJLlV0aWxzLmNoZWNrRGlzcGxheSgkdGhpcy5lbGVtZW50LnBhcmVudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXJpYWxpemU6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICB2YXIgZGF0YSA9IFtdLCBpdGVtLCBhdHRyaWJ1dGU7XG5cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oaiwgY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBpdGVtID0ge307XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGF0dHIsIHZhbDsgaSA8IGNoaWxkLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlID0gY2hpbGQuYXR0cmlidXRlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5uYW1lLmluZGV4T2YoJ2RhdGEtJykgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHIgICAgICAgPSBhdHRyaWJ1dGUubmFtZS5zdWJzdHIoNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgICAgICAgID0gIFVJLlV0aWxzLnN0cjJqc29uKGF0dHJpYnV0ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtW2F0dHJdID0gKHZhbCB8fCBhdHRyaWJ1dGUudmFsdWU9PSdmYWxzZScgfHwgYXR0cmlidXRlLnZhbHVlPT0nMCcpID8gdmFsOmF0dHJpYnV0ZS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkYXRhLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2hlY2tFbXB0eUxpc3Q6IGZ1bmN0aW9uKGxpc3QpIHtcblxuICAgICAgICAgICAgbGlzdCAgPSBsaXN0ID8gVUkuJChsaXN0KSA6IHRoaXMuZWxlbWVudDtcblxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5lbXB0eUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgbGlzdFshbGlzdC5jaGlsZHJlbigpLmxlbmd0aCA/ICdhZGRDbGFzcyc6J3JlbW92ZUNsYXNzJ10odGhpcy5vcHRpb25zLmVtcHR5Q2xhc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBoZWxwZXJzXG5cbiAgICBmdW5jdGlvbiBpc0JlbG93KGVsMSwgZWwyKSB7XG5cbiAgICAgICAgdmFyIHBhcmVudCA9IGVsMS5wYXJlbnROb2RlO1xuXG4gICAgICAgIGlmIChlbDIucGFyZW50Tm9kZSAhPSBwYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjdXIgPSBlbDEucHJldmlvdXNTaWJsaW5nO1xuXG4gICAgICAgIHdoaWxlIChjdXIgJiYgY3VyLm5vZGVUeXBlICE9PSA5KSB7XG4gICAgICAgICAgICBpZiAoY3VyID09PSBlbDIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1ciA9IGN1ci5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW92ZVVwVG9DaGlsZE5vZGUocGFyZW50LCBjaGlsZCkge1xuICAgICAgICB2YXIgY3VyID0gY2hpbGQ7XG4gICAgICAgIGlmIChjdXIgPT0gcGFyZW50KSB7IHJldHVybiBudWxsOyB9XG5cbiAgICAgICAgd2hpbGUgKGN1cikge1xuICAgICAgICAgICAgaWYgKGN1ci5wYXJlbnROb2RlID09PSBwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjdXIgPSBjdXIucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIGlmICggIWN1ciB8fCAhY3VyLm93bmVyRG9jdW1lbnQgfHwgY3VyLm5vZGVUeXBlID09PSAxMSApIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcmV2ZW50KGUpIHtcbiAgICAgICAgaWYgKGUuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBVSS5zb3J0YWJsZTtcbn0pOyJdfQ==
