$(document).ready(function(){$(".js-input").on("focus focusout",function(e){e.preventDefault(),$(e.target).parent().toggleClass("is_focused"),"focusout"==e.type&&$(e.target).val($.trim($(e.target).val()))}),$(".js-input").on("change keyup",function(e){e.preventDefault(),""===$.trim($(e.target).val())||$(e.target).hasClass("is_filled")?$(e.target).parent().removeClass("is_filled"):$(e.target).parent().addClass("is_filled"),$(this).parent().removeClass("error")}),$(".js-phone").on("focusout",function(e){e.preventDefault();var t=$(this).val().replace(/[^0-9]/gi,"");7==t.substr(0,1)&&(t="+7"+t.substr(1,t.length-1)),$(this).val(t)});var e=$("#svg1"),t=$("#svg2"),a=$(".header__content"),n=0,i=3;t.find("polygon").click(function(){a.eq(i).toggleClass("active"),i=$(this).index()-1,a.eq(i).toggleClass("active")}).mouseover(function(){n=$(this).index()-1,e.find("polygon").eq(n).toggleClass("active")}).mouseleave(function(){n=$(this).index()-1,e.find("polygon").eq(n).toggleClass("active")});var s=$("#svg_on_mappage");s.find("polygon").mouseover(function(){n=$(this).index()-1,s.find("polygon").eq(n).toggleClass("active")}).mouseleave(function(){n=$(this).index()-1,s.find("polygon").eq(n).toggleClass("active")}).click(function(){n=$(this).index()-1,window.location.replace(s.find("polygon").eq(n).attr("data-link"))}),$("#submit_form").click(function(e){e.preventDefault();var t=$("#callback_source").attr("data-source"),a=$("#name"),n=$("#phone"),i=$("#company"),s=$("#mail"),o=new RegExp(/\d{11}/),x=new RegExp(/.+/),r=new RegExp(/^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,})(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@)(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22))(?:\.(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\]))$/),l=!1;if(x.test(a.val())||(a.parent().addClass("error"),l=!0),o.test(n.val())||(n.parent().addClass("error"),l=!0),r.test(s.val())||(s.parent().addClass("error"),l=!0),l)return!1;var c={name:a.val(),phone:n.val(),company:i.val(),email:s.val()};null!=t&&(c.from=t),a.val(""),n.val(""),i.val(""),s.val(""),$.ajax({url:"/ajax-handler/",type:"POST",data:{data:c},success:function(e){UIkit.offcanvas.hide([force=!1]),UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено":"Ошибка отправки сообщения",status:e,timeout:3e3,pos:"bottom-center"})},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}),$(".proposal_request").click(function(){$("#callback_source").attr("data-source",$(this).attr("data-source"))}),$("#submit_form2").click(function(e){e.preventDefault();var t=$("#name9"),a=$("#text9"),n=$("#mail9"),i=new RegExp(/.+/),s=new RegExp(/^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,})(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@)(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22))(?:\.(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-[a-z0-9]+)*\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-[a-z0-9]+)*)|(?:\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\]))$/),o=!1;if(i.test(t.val())||(t.parent().addClass("error"),o=!0),i.test(a.val())||(a.parent().addClass("error"),o=!0),s.test(n.val())||(n.parent().addClass("error"),o=!0),o)return!1;var x={name:t.val(),email:n.val(),quest:a.val()};t.val(""),a.val(""),n.val(""),$.ajax({url:"/ajax-handler/",type:"POST",data:{data:x},success:function(e){UIkit.offcanvas.hide([force=!1]),UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено":"Ошибка отправки сообщения",status:e,timeout:3e3,pos:"bottom-center"})},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})}),$(".inputfile_button").click(function(){$(this).closest(".feedback_form_inputfile_block").find(".inputfile_input").trigger("click")}),$(".inputfile_input").change(function(){var e=$(this).val(),t=e;new RegExp("[^*](.txt|.jpg|.png|.zip|.rar|.doc|.docx|.xls|.xlsx|.pdf)","i").test(e)?5242880<this.files[0].size?(t='<span class="red">Размер файла превышает 5 Мб</span>',$(this).val("")):(val_mas=e.split("\\"),t=val_mas[val_mas.length-1]):(t='<span class="red">Неверное расширение файла</span>',$(this).val(""));$(this).closest(".feedback_form_inputfile_block").find(".inputfile_caption").html(t).attr("title",e)}),$(".feedback_radio_input").change(function(){var e=$(this).val();$(".feedback_container").not("#feedback_"+e).slideUp(300),$("#feedback_"+e).slideDown(300)}),$(".canSpeak").mouseenter(function(){"true"==sessionStorage.getItem("isInvalid")&&function e(t){speechSynthesis.speaking?(speechSynthesis.cancel(),null!==o&&clearTimeout(o),o=setTimeout(function(){e(t)},250)):speechSynthesis.speak(t)}(new SpeechSynthesisUtterance($(this)[0].innerText))});var o=null;var x=$(".menu__phone-container__icon");function r(){var e=$("#grid-group");960<=window.innerWidth?e.height(window.innerHeight-170):e.height("initial")}$(".invalid").click(function(){"true"==sessionStorage.getItem("isInvalid")?($(this).css("fill","black"),x.css("box-shadow","none"),sessionStorage.setItem("isInvalid",!1)):($(this).css("fill","#e9ac45"),$(this).find(".menu__phone-container__icon")&&x.css("box-shadow","white 0px 0px 5px 2px"),sessionStorage.setItem("isInvalid",!0))}),"true"==sessionStorage.getItem("isInvalid")&&($(".invalid").css("fill","#e9ac45"),x.css("box-shadow","white 0px 0px 5px 2px")),r(),$(window).resize(function(){r()}),$(".feedback_form_field-arrow").click(function(){var e=$(this).closest(".feedback_form_field").find("select");if(document.createEvent){var t=document.createEvent("MouseEvents");t.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e[0].dispatchEvent(t)}else e.fireEvent&&e[0].fireEvent("onmousedown")}),$(".to_validate").inputmask(),$(".to_validate").on("change keyup",function(e){$(this).parent().removeClass("form__element error")}),$(".ecotek_button3").click(function(e){e.preventDefault();var t=$(this).parent().parent().parent(),a=!1;t.find(".to_validate").each(function(e,t){$(t).inputmask("isComplete")||".*"==$(t).data("inputmask-regex")||(a=!0,$(t).parent().addClass("form__element error"))});var i={full:!0};if(i.id=(new Date).getTime(),a){var n;t.find(".feedback_form_item").each(function(e,t){try{var a=$(t).find(".feedback_form_caption")[0].childNodes[0].data,n=$(t).find(".ecotek_inputtext")[0];i[a.trim()]=$(n).val()}catch(e){}});var s=new FileReader;s.onload=function(e){n=e.target.result,i.attach=n,$.ajax({url:"/ajax-handler/",type:"POST",data:{data:i},success:function(e){UIkit.notify({message:"success"==e?"Ваше сообщение успешно отправлено, номер обращения: "+i.id+"\nНомер обращения так же продублирован на вашу почту":"Ошибка отправки сообщения",status:e,timeout:6e3,pos:"bottom-center"})},error:function(e){UIkit.notify({message:"Ошибка отправки сообщения",status:"warning",timeout:3e3,pos:"bottom-center"})}})};var o=t.find("#dopfile");s.readAsBinaryString(o[0].files[0])}else;})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBsYXRlLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5Iiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJwYXJlbnQiLCJ0b2dnbGVDbGFzcyIsInR5cGUiLCJ2YWwiLCJ0cmltIiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwidGhpcyIsInJlcGxhY2UiLCJzdWJzdHIiLCJsZW5ndGgiLCJzdmcxIiwic3ZnMiIsImNvbnRlbnRzIiwiaSIsImoiLCJmaW5kIiwiY2xpY2siLCJlcSIsImluZGV4IiwibW91c2VvdmVyIiwibW91c2VsZWF2ZSIsInN2Z19vbl9wYWdlIiwid2luZG93IiwibG9jYXRpb24iLCJhdHRyIiwiZnJvbSIsIm5hbWUiLCJwaG9uZSIsImNvbXBhbnkiLCJlbWFpbCIsInJlZ2V4X3Bob25lIiwiUmVnRXhwIiwicmVnZXhfbmFtZSIsInJlZ2V4X2VtYWlsIiwiaGFzRXJyIiwidGVzdCIsImRhdGEiLCJ1bmRlZmluZWQiLCJhamF4IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsIlVJa2l0Iiwib2ZmY2FudmFzIiwiaGlkZSIsImZvcmNlIiwibm90aWZ5IiwibWVzc2FnZSIsInN0YXR1cyIsInRpbWVvdXQiLCJwb3MiLCJlcnJvciIsInF1ZXN0IiwiY2xvc2VzdCIsInRyaWdnZXIiLCJjaGFuZ2UiLCJodG1sIiwiZmlsZXMiLCJzaXplIiwidmFsX21hcyIsInNwbGl0IiwiYmxvY2tpZCIsIm5vdCIsInNsaWRlVXAiLCJzbGlkZURvd24iLCJtb3VzZWVudGVyIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwic2F5IiwidGV4dCIsInNwZWVjaFN5bnRoZXNpcyIsInNwZWFraW5nIiwiY2FuY2VsIiwic2F5VGltZW91dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzcGVhayIsIlNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSIsImlubmVyVGV4dCIsImljb25faW52YWxpZCIsImNoYW5nZUhlaWdodE1haW5CbG9jayIsImdyb3VwIiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiY3NzIiwic2V0SXRlbSIsInJlc2l6ZSIsImVsZW1lbnQiLCJjcmVhdGVFdmVudCIsImluaXRNb3VzZUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImZpcmVFdmVudCIsImlucHV0bWFzayIsImN1cnJlbnRfZm9ybSIsImVhY2giLCJudW0iLCJlbCIsInJlc3VsdHMiLCJmdWxsIiwiRGF0ZSIsImdldFRpbWUiLCJwaWMiLCJ0aXRsZSIsImNoaWxkTm9kZXMiLCJjb250ZW50X25vZGUiLCJleCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJmaWxlIiwicmVhZEFzQmluYXJ5U3RyaW5nIl0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRUMsVUFBVUMsTUFBTSxXQUNoQkYsRUFBRSxhQUFhRyxHQUFHLGlCQUFrQixTQUFTQyxHQUN2Q0EsRUFBRUMsaUJBQ0ZMLEVBQUVJLEVBQUVFLFFBQVFDLFNBQVNDLFlBQVksY0FDcEIsWUFBVkosRUFBRUssTUFDRFQsRUFBRUksRUFBRUUsUUFBUUksSUFBSVYsRUFBRVcsS0FBS1gsRUFBRUksRUFBRUUsUUFBUUksVUFHM0NWLEVBQUUsYUFBYUcsR0FBRyxlQUFnQixTQUFTQyxHQUN2Q0EsRUFBRUMsaUJBQytCLEtBQTlCTCxFQUFFVyxLQUFLWCxFQUFFSSxFQUFFRSxRQUFRSSxRQUFrQlYsRUFBRUksRUFBRUUsUUFBUU0sU0FBUyxhQUd6RFosRUFBRUksRUFBRUUsUUFBUUMsU0FBU00sWUFBWSxhQUZqQ2IsRUFBRUksRUFBRUUsUUFBUUMsU0FBU08sU0FBUyxhQUlsQ2QsRUFBRWUsTUFBTVIsU0FBU00sWUFBWSxXQUVqQ2IsRUFBRSxhQUFhRyxHQUFHLFdBQVksU0FBU0MsR0FDbkNBLEVBQUVDLGlCQUNGLElBQUlLLEVBQU1WLEVBQUVlLE1BQU1MLE1BQU1NLFFBQVEsV0FBVyxJQUNwQixHQUFwQk4sRUFBSU8sT0FBTyxFQUFHLEtBQ2JQLEVB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QUFVLENBQ2RDLE1BQWtCLEdBRWxCLEdBREFELEVBQVksSUFBSSxJQUFJRSxNQUFPQyxVQUN2Qm5FLEVBQUosQ0FXSSxJQUFJb0UsRUFWSlIsRUFBYS9FLEtBQUssdUJBQXVCZ0YsS0FBSyxTQUFVQyxFQUFLQyxHQUN6RCxJQUNJLElBQUlNLEVBQVFoSCxFQUFFMEcsR0FBSWxGLEtBQUssMEJBQTBCLEdBQUd5RixXQUFXLEdBQUdwRSxLQUM5RHFFLEVBQWVsSCxFQUFFMEcsR0FBSWxGLEtBQUsscUJBQXFCLEdBQ25EbUYsRUFBUUssRUFBTXJHLFFBQVVYLEVBQUVrSCxHQUFjeEcsTUFDMUMsTUFBT3lHLE9BTWIsSUFBSUMsRUFBUyxJQUFJQyxXQUNqQkQsRUFBT0UsT0FBUyxTQUFTbEgsR0FFckIyRyxFQUFPM0csRUFBRUUsT0FBYSxPQUN0QnFHLEVBQWdCLE9BQUlJLEVBQ3BCL0csRUFBRStDLEtBQUssQ0FDSEMsSUFBSyxpQkFDTHZDLEtBQU0sT0FDTm9DLEtBQU0sQ0FBQ0EsS0FBTThELEdBQ2IxRCxRQUFTLFNBQVVDLEdBQ2ZDLE1BQU1JLE9BQU8sQ0FDVEMsUUFBb0IsV0FBVk4sRUFBdUIsdURBQXlEeUQsRUFBWSxHQUFJLHVEQUEwRCw0QkFDcEtsRCxPQUFRUCxFQUNSUSxRQUFTLElBQ1RDLElBQUssbUJBTWJDLE1BQU8sU0FBVVYsR0FDYkMsTUFBTUksT0FBTyxDQUNUQyxRQUFTLDRCQUNUQyxPQUFRLFVBQ1JDLFFBQVMsSUFDVEMsSUFBSyxzQkFLckIsSUFBSTRELEVBQU9oQixFQUFhL0UsS0FBSyxZQUM3QjRGLEVBQU9JLG1CQUFtQkQsRUFBSyxHQUFHckQsTUFBTSIsImZpbGUiOiJ0ZW1wbGF0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAkKCcuanMtaW5wdXQnKS5vbignZm9jdXMgZm9jdXNvdXQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ2lzX2ZvY3VzZWQnKTtcbiAgICAgICAgaWYoZS50eXBlID09ICdmb2N1c291dCcpIHtcbiAgICAgICAgICAgICQoZS50YXJnZXQpLnZhbCgkLnRyaW0oJChlLnRhcmdldCkudmFsKCkpKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoJy5qcy1pbnB1dCcpLm9uKCdjaGFuZ2Uga2V5dXAnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYoJC50cmltKCQoZS50YXJnZXQpLnZhbCgpKSAhPT0gJycgJiYgISQoZS50YXJnZXQpLmhhc0NsYXNzKCdpc19maWxsZWQnKSkge1xuICAgICAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCkuYWRkQ2xhc3MoJ2lzX2ZpbGxlZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChlLnRhcmdldCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2lzX2ZpbGxlZCcpO1xuICAgICAgICB9XG4gICAgICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJlcnJvclwiKTtcbiAgICB9KTtcbiAgICAkKCcuanMtcGhvbmUnKS5vbignZm9jdXNvdXQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIHZhbCA9ICQodGhpcykudmFsKCkucmVwbGFjZSgvW14wLTldL2dpLCcnKTtcbiAgICAgICAgaWYodmFsLnN1YnN0cigwLCAxKSA9PSA3KSB7XG4gICAgICAgICAgICB2YWwgPSAnKzcnICsgdmFsLnN1YnN0cigxLCB2YWwubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgJCh0aGlzKS52YWwodmFsKTtcbiAgICB9KTtcblxuICAgIHZhciBzdmcxID0gJCgnI3N2ZzEnKTtcbiAgICB2YXIgc3ZnMiA9ICQoJyNzdmcyJyk7XG4gICAgdmFyIGNvbnRlbnRzID0gJCgnLmhlYWRlcl9fY29udGVudCcpO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgaiA9IDM7XG4gICAgc3ZnMi5maW5kKCdwb2x5Z29uJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICBjb250ZW50cy5lcShqKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICBqID0gJCh0aGlzKS5pbmRleCgpLTE7XG4gICAgICBjb250ZW50cy5lcShqKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgfSlcbiAgICAubW91c2VvdmVyKGZ1bmN0aW9uKCkge1xuICAgICAgaSA9ICQodGhpcykuaW5kZXgoKS0xO1xuICAgICAgc3ZnMS5maW5kKCdwb2x5Z29uJykuZXEoaSkudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pXG4gICAgLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7XG4gICAgICBpID0gJCh0aGlzKS5pbmRleCgpLTE7XG4gICAgICBzdmcxLmZpbmQoJ3BvbHlnb24nKS5lcShpKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICB2YXIgc3ZnX29uX3BhZ2UgPSAkKFwiI3N2Z19vbl9tYXBwYWdlXCIpO1xuICAgIHN2Z19vbl9wYWdlLmZpbmQoJ3BvbHlnb24nKVxuICAgICAgICAubW91c2VvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaSA9ICQodGhpcykuaW5kZXgoKS0xO1xuICAgICAgICBzdmdfb25fcGFnZS5maW5kKCdwb2x5Z29uJykuZXEoaSkudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9KVxuICAgICAgICAubW91c2VsZWF2ZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGkgPSAkKHRoaXMpLmluZGV4KCktMTtcbiAgICAgICAgICAgIHN2Z19vbl9wYWdlLmZpbmQoJ3BvbHlnb24nKS5lcShpKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpID0gJCh0aGlzKS5pbmRleCgpLTE7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShzdmdfb25fcGFnZS5maW5kKCdwb2x5Z29uJykuZXEoaSkuYXR0cihcImRhdGEtbGlua1wiKSk7XG4gICAgICAgIH0pO1xuXG4gICAgJChcIiNzdWJtaXRfZm9ybVwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGZyb20gPSAkKFwiI2NhbGxiYWNrX3NvdXJjZVwiKS5hdHRyKFwiZGF0YS1zb3VyY2VcIik7XG4gICAgICAgIHZhciBuYW1lID0gJChcIiNuYW1lXCIpO1xuICAgICAgICB2YXIgcGhvbmUgPSAkKFwiI3Bob25lXCIpO1xuICAgICAgICB2YXIgY29tcGFueSA9ICQoXCIjY29tcGFueVwiKTtcbiAgICAgICAgdmFyIGVtYWlsID0gJChcIiNtYWlsXCIpO1xuXG4gICAgICAgIHZhciByZWdleF9waG9uZSA9IG5ldyBSZWdFeHAoL1xcZHsxMX0vKTtcbiAgICAgICAgdmFyIHJlZ2V4X25hbWUgPSBuZXcgUmVnRXhwKC8uKy8pO1xuICAgICAgICB2YXIgcmVnZXhfZW1haWwgPSBuZXcgUmVnRXhwKC9eKD8hKD86KD86XFx4MjI/XFx4NUNbXFx4MDAtXFx4N0VdXFx4MjI/KXwoPzpcXHgyMj9bXlxceDVDXFx4MjJdXFx4MjI/KSl7MjU1LH0pKD8hKD86KD86XFx4MjI/XFx4NUNbXFx4MDAtXFx4N0VdXFx4MjI/KXwoPzpcXHgyMj9bXlxceDVDXFx4MjJdXFx4MjI/KSl7NjUsfUApKD86KD86W1xceDIxXFx4MjMtXFx4MjdcXHgyQVxceDJCXFx4MkRcXHgyRi1cXHgzOVxceDNEXFx4M0ZcXHg1RS1cXHg3RV0rKXwoPzpcXHgyMig/OltcXHgwMS1cXHgwOFxceDBCXFx4MENcXHgwRS1cXHgxRlxceDIxXFx4MjMtXFx4NUJcXHg1RC1cXHg3Rl18KD86XFx4NUNbXFx4MDAtXFx4N0ZdKSkqXFx4MjIpKSg/OlxcLig/Oig/OltcXHgyMVxceDIzLVxceDI3XFx4MkFcXHgyQlxceDJEXFx4MkYtXFx4MzlcXHgzRFxceDNGXFx4NUUtXFx4N0VdKyl8KD86XFx4MjIoPzpbXFx4MDEtXFx4MDhcXHgwQlxceDBDXFx4MEUtXFx4MUZcXHgyMVxceDIzLVxceDVCXFx4NUQtXFx4N0ZdfCg/OlxceDVDW1xceDAwLVxceDdGXSkpKlxceDIyKSkpKkAoPzooPzooPyEuKlteLl17NjQsfSkoPzooPzooPzp4bi0tKT9bYS16MC05XSsoPzotW2EtejAtOV0rKSpcXC4pezEsMTI2fSl7MSx9KD86KD86W2Etel1bYS16MC05XSopfCg/Oig/OnhuLS0pW2EtejAtOV0rKSkoPzotW2EtejAtOV0rKSopfCg/OlxcWyg/Oig/OklQdjY6KD86KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXs3fSl8KD86KD8hKD86LipbYS1mMC05XVs6XFxdXSl7Nyx9KSg/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCw1fSk/OjooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezAsNX0pPykpKXwoPzooPzpJUHY2Oig/Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7NX06KXwoPzooPyEoPzouKlthLWYwLTldOil7NSx9KSg/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCwzfSk/OjooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezAsM306KT8pKSk/KD86KD86MjVbMC01XSl8KD86MlswLTRdWzAtOV0pfCg/OjFbMC05XXsyfSl8KD86WzEtOV0/WzAtOV0pKSg/OlxcLig/Oig/OjI1WzAtNV0pfCg/OjJbMC00XVswLTldKXwoPzoxWzAtOV17Mn0pfCg/OlsxLTldP1swLTldKSkpezN9KSlcXF0pKSQvKTtcblxuICAgICAgICB2YXIgaGFzRXJyID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFyZWdleF9uYW1lLnRlc3QobmFtZS52YWwoKSkpIHtcbiAgICAgICAgICAgIG5hbWUucGFyZW50KCkuYWRkQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZWdleF9waG9uZS50ZXN0KHBob25lLnZhbCgpKSkge1xuICAgICAgICAgICAgcGhvbmUucGFyZW50KCkuYWRkQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZWdleF9lbWFpbC50ZXN0KGVtYWlsLnZhbCgpKSkge1xuICAgICAgICAgICAgZW1haWwucGFyZW50KCkuYWRkQ2xhc3MoXCJlcnJvclwiKTtcbiAgICAgICAgICAgIGhhc0VyciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0Vycikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLnZhbCgpLFxuICAgICAgICAgICAgcGhvbmU6IHBob25lLnZhbCgpLFxuICAgICAgICAgICAgY29tcGFueTogY29tcGFueS52YWwoKSxcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbC52YWwoKVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChmcm9tICE9IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICBkYXRhLmZyb20gPSBmcm9tO1xuICAgICAgICB9XG5cbiAgICAgICAgbmFtZS52YWwoXCJcIik7XG4gICAgICAgIHBob25lLnZhbChcIlwiKTtcbiAgICAgICAgY29tcGFueS52YWwoXCJcIik7XG4gICAgICAgIGVtYWlsLnZhbChcIlwiKTtcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiBcIi9hamF4LWhhbmRsZXIvXCIsXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7ZGF0YTogZGF0YX0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgVUlraXQub2ZmY2FudmFzLmhpZGUoW2ZvcmNlID0gZmFsc2VdKTtcbiAgICAgICAgICAgICAgICBVSWtpdC5ub3RpZnkoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAocmVzdWx0ID09IFwic3VjY2Vzc1wiKSA/ICfQktCw0YjQtSDRgdC+0L7QsdGJ0LXQvdC40LUg0YPRgdC/0LXRiNC90L4g0L7RgtC/0YDQsNCy0LvQtdC90L4nIDogJ9Ce0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjycsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAzMDAwLFxuICAgICAgICAgICAgICAgICAgICBwb3M6ICdib3R0b20tY2VudGVyJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgVUlraXQubm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ9Ce0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjycsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAzMDAwLFxuICAgICAgICAgICAgICAgICAgICBwb3M6ICdib3R0b20tY2VudGVyJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICAkKFwiLnByb3Bvc2FsX3JlcXVlc3RcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI2NhbGxiYWNrX3NvdXJjZVwiKS5hdHRyKFwiZGF0YS1zb3VyY2VcIiwgJCh0aGlzKS5hdHRyKFwiZGF0YS1zb3VyY2VcIikpO1xuICAgIH0pO1xuXG4gICAgJChcIiNzdWJtaXRfZm9ybTJcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBuYW1lID0gJChcIiNuYW1lOVwiKTtcbiAgICAgICAgdmFyIHF1ZXN0ID0gJChcIiN0ZXh0OVwiKTtcbiAgICAgICAgdmFyIGVtYWlsID0gJChcIiNtYWlsOVwiKTtcblxuICAgICAgICB2YXIgcmVnZXhfbmFtZSA9IG5ldyBSZWdFeHAoLy4rLyk7XG4gICAgICAgIHZhciByZWdleF9lbWFpbCA9IG5ldyBSZWdFeHAoL14oPyEoPzooPzpcXHgyMj9cXHg1Q1tcXHgwMC1cXHg3RV1cXHgyMj8pfCg/OlxceDIyP1teXFx4NUNcXHgyMl1cXHgyMj8pKXsyNTUsfSkoPyEoPzooPzpcXHgyMj9cXHg1Q1tcXHgwMC1cXHg3RV1cXHgyMj8pfCg/OlxceDIyP1teXFx4NUNcXHgyMl1cXHgyMj8pKXs2NSx9QCkoPzooPzpbXFx4MjFcXHgyMy1cXHgyN1xceDJBXFx4MkJcXHgyRFxceDJGLVxceDM5XFx4M0RcXHgzRlxceDVFLVxceDdFXSspfCg/OlxceDIyKD86W1xceDAxLVxceDA4XFx4MEJcXHgwQ1xceDBFLVxceDFGXFx4MjFcXHgyMy1cXHg1QlxceDVELVxceDdGXXwoPzpcXHg1Q1tcXHgwMC1cXHg3Rl0pKSpcXHgyMikpKD86XFwuKD86KD86W1xceDIxXFx4MjMtXFx4MjdcXHgyQVxceDJCXFx4MkRcXHgyRi1cXHgzOVxceDNEXFx4M0ZcXHg1RS1cXHg3RV0rKXwoPzpcXHgyMig/OltcXHgwMS1cXHgwOFxceDBCXFx4MENcXHgwRS1cXHgxRlxceDIxXFx4MjMtXFx4NUJcXHg1RC1cXHg3Rl18KD86XFx4NUNbXFx4MDAtXFx4N0ZdKSkqXFx4MjIpKSkqQCg/Oig/Oig/IS4qW14uXXs2NCx9KSg/Oig/Oig/OnhuLS0pP1thLXowLTldKyg/Oi1bYS16MC05XSspKlxcLil7MSwxMjZ9KXsxLH0oPzooPzpbYS16XVthLXowLTldKil8KD86KD86eG4tLSlbYS16MC05XSspKSg/Oi1bYS16MC05XSspKil8KD86XFxbKD86KD86SVB2NjooPzooPzpbYS1mMC05XXsxLDR9KD86OlthLWYwLTldezEsNH0pezd9KXwoPzooPyEoPzouKlthLWYwLTldWzpcXF1dKXs3LH0pKD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDV9KT86Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCw1fSk/KSkpfCg/Oig/OklQdjY6KD86KD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXs1fTopfCg/Oig/ISg/Oi4qW2EtZjAtOV06KXs1LH0pKD86W2EtZjAtOV17MSw0fSg/OjpbYS1mMC05XXsxLDR9KXswLDN9KT86Oig/OlthLWYwLTldezEsNH0oPzo6W2EtZjAtOV17MSw0fSl7MCwzfTopPykpKT8oPzooPzoyNVswLTVdKXwoPzoyWzAtNF1bMC05XSl8KD86MVswLTldezJ9KXwoPzpbMS05XT9bMC05XSkpKD86XFwuKD86KD86MjVbMC01XSl8KD86MlswLTRdWzAtOV0pfCg/OjFbMC05XXsyfSl8KD86WzEtOV0/WzAtOV0pKSl7M30pKVxcXSkpJC8pO1xuXG4gICAgICAgIHZhciBoYXNFcnIgPSBmYWxzZTtcblxuICAgICAgICBpZiAoIXJlZ2V4X25hbWUudGVzdChuYW1lLnZhbCgpKSkge1xuICAgICAgICAgICAgbmFtZS5wYXJlbnQoKS5hZGRDbGFzcyhcImVycm9yXCIpO1xuICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlZ2V4X25hbWUudGVzdChxdWVzdC52YWwoKSkpIHtcbiAgICAgICAgICAgIHF1ZXN0LnBhcmVudCgpLmFkZENsYXNzKFwiZXJyb3JcIik7XG4gICAgICAgICAgICBoYXNFcnIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVnZXhfZW1haWwudGVzdChlbWFpbC52YWwoKSkpIHtcbiAgICAgICAgICAgIGVtYWlsLnBhcmVudCgpLmFkZENsYXNzKFwiZXJyb3JcIik7XG4gICAgICAgICAgICBoYXNFcnIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNFcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZS52YWwoKSxcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbC52YWwoKSxcbiAgICAgICAgICAgIHF1ZXN0OiBxdWVzdC52YWwoKVxuICAgICAgICB9O1xuXG5cbiAgICAgICAgbmFtZS52YWwoXCJcIik7XG4gICAgICAgIHF1ZXN0LnZhbChcIlwiKTtcbiAgICAgICAgZW1haWwudmFsKFwiXCIpO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFwiL2FqYXgtaGFuZGxlci9cIixcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHtkYXRhOiBkYXRhfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBVSWtpdC5vZmZjYW52YXMuaGlkZShbZm9yY2UgPSBmYWxzZV0pO1xuICAgICAgICAgICAgICAgIFVJa2l0Lm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IChyZXN1bHQgPT0gXCJzdWNjZXNzXCIpID8gJ9CS0LDRiNC1INGB0L7QvtCx0YnQtdC90LjQtSDRg9GB0L/QtdGI0L3QviDQvtGC0L/RgNCw0LLQu9C10L3QvicgOiAn0J7RiNC40LHQutCwINC+0YLQv9GA0LDQstC60Lgg0YHQvtC+0LHRidC10L3QuNGPJyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBvczogJ2JvdHRvbS1jZW50ZXInXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBVSWtpdC5ub3RpZnkoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn0J7RiNC40LHQutCwINC+0YLQv9GA0LDQstC60Lgg0YHQvtC+0LHRidC10L3QuNGPJyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnd2FybmluZycsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAsXG4gICAgICAgICAgICAgICAgICAgIHBvczogJ2JvdHRvbS1jZW50ZXInXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuXG5cbiAgICAkKFwiLmlucHV0ZmlsZV9idXR0b25cIikuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGJ1dHRvbiA9ICQodGhpcykuY2xvc2VzdChcIi5mZWVkYmFja19mb3JtX2lucHV0ZmlsZV9ibG9ja1wiKS5maW5kKFwiLmlucHV0ZmlsZV9pbnB1dFwiKTtcbiAgICAgICAgYnV0dG9uLnRyaWdnZXIoXCJjbGlja1wiKTtcbiAgICB9KTtcblxuICAgICQoXCIuaW5wdXRmaWxlX2lucHV0XCIpLmNoYW5nZShmdW5jdGlvbigpe1xuICAgICAgICB2YXIgdmFsID0gJCh0aGlzKS52YWwoKTtcblxuICAgICAgICB2YXIgaHRtbCA9IHZhbDtcbiAgICAgICAgdmFyIHJlZz0gbmV3IFJlZ0V4cChcIlteKl0oXFwudHh0fFxcLmpwZ3xcXC5wbmd8XFwuemlwfFxcLnJhcnxcXC5kb2N8XFwuZG9jeHxcXC54bHN8XFwueGxzeHxcXC5wZGYpXCIsICdpJyk7XG4gICAgICAgIGlmICghcmVnLnRlc3QodmFsKSkge1xuICAgICAgICAgICAgaHRtbCA9IFwiPHNwYW4gY2xhc3M9XFxcInJlZFxcXCI+0J3QtdCy0LXRgNC90L7QtSDRgNCw0YHRiNC40YDQtdC90LjQtSDRhNCw0LnQu9CwPC9zcGFuPlwiO1xuICAgICAgICAgICAgJCh0aGlzKS52YWwoXCJcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZmlsZXNbMF0uc2l6ZTtcbiAgICAgICAgICAgIGlmIChzaXplID4gNSAqIDEwMjQgKiAxMDI0KXtcbiAgICAgICAgICAgICAgICBodG1sID0gXCI8c3BhbiBjbGFzcz1cXFwicmVkXFxcIj7QoNCw0LfQvNC10YAg0YTQsNC50LvQsCDQv9GA0LXQstGL0YjQsNC10YIgNSDQnNCxPC9zcGFuPlwiO1xuICAgICAgICAgICAgICAgICQodGhpcykudmFsKFwiXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWxfbWFzID0gdmFsLnNwbGl0KFwiXFxcXFwiKTtcbiAgICAgICAgICAgICAgICBodG1sID0gdmFsX21hc1t2YWxfbWFzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoXCIuZmVlZGJhY2tfZm9ybV9pbnB1dGZpbGVfYmxvY2tcIikuZmluZChcIi5pbnB1dGZpbGVfY2FwdGlvblwiKS5odG1sKGh0bWwpLmF0dHIoXCJ0aXRsZVwiLCB2YWwpO1xuICAgIH0pO1xuXG4gICAgJChcIi5mZWVkYmFja19yYWRpb19pbnB1dFwiKS5jaGFuZ2UoZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGJsb2NraWQgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAkKFwiLmZlZWRiYWNrX2NvbnRhaW5lclwiKS5ub3QoXCIjZmVlZGJhY2tfXCIgKyBibG9ja2lkKS5zbGlkZVVwKDMwMCk7XG4gICAgICAgICQoXCIjZmVlZGJhY2tfXCIgKyBibG9ja2lkKS5zbGlkZURvd24oMzAwKTtcbiAgICB9KTtcbiAgICAkKFwiLmNhblNwZWFrXCIpLm1vdXNlZW50ZXIoZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2lzSW52YWxpZCcpID09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgICB2YXIgbXNnID0gbmV3IFNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSgkKHRoaXMpWzBdLmlubmVyVGV4dCk7XG4gICAgICAgICAgICBzYXkobXNnKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIHNheVRpbWVvdXQgPSBudWxsO1xuXG4gICAgZnVuY3Rpb24gc2F5KHRleHQpIHtcbiAgICAgICAgaWYgKHNwZWVjaFN5bnRoZXNpcy5zcGVha2luZykge1xuICAgICAgICAgICAgLy8gU3BlZWNoU3luIGlzIGN1cnJlbnRseSBzcGVha2luZywgY2FuY2VsIHRoZSBjdXJyZW50IHV0dGVyYW5jZShzKVxuICAgICAgICAgICAgc3BlZWNoU3ludGhlc2lzLmNhbmNlbCgpO1xuXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgZG9uJ3QgY3JlYXRlIG1vcmUgdGhhbiBvbmUgdGltZW91dC4uLlxuICAgICAgICAgICAgaWYgKHNheVRpbWVvdXQgIT09IG51bGwpXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNheVRpbWVvdXQpO1xuXG4gICAgICAgICAgICBzYXlUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHNheSh0ZXh0KTsgfSwgMjUwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEdvb2QgdG8gZ29cbiAgICAgICAgICAgIHNwZWVjaFN5bnRoZXNpcy5zcGVhayh0ZXh0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBpY29uX2ludmFsaWQgPSAkKCcubWVudV9fcGhvbmUtY29udGFpbmVyX19pY29uJyk7XG5cbiAgICAkKFwiLmludmFsaWRcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnaXNJbnZhbGlkJykgPT0gXCJ0cnVlXCIpe1xuICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJmaWxsXCIsXCJibGFja1wiKTtcbiAgICAgICAgICAgIGljb25faW52YWxpZC5jc3MoXCJib3gtc2hhZG93XCIsIFwibm9uZVwiKTtcbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2lzSW52YWxpZCcsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQodGhpcykuY3NzKFwiZmlsbFwiLCBcIiNlOWFjNDVcIik7XG5cbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmZpbmQoJy5tZW51X19waG9uZS1jb250YWluZXJfX2ljb24nKSkge1xuICAgICAgICAgICAgICAgIGljb25faW52YWxpZC5jc3MoXCJib3gtc2hhZG93XCIsIFwid2hpdGUgMHB4IDBweCA1cHggMnB4XCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdpc0ludmFsaWQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdpc0ludmFsaWQnKSA9PSBcInRydWVcIil7XG4gICAgICAgICQoXCIuaW52YWxpZFwiKS5jc3MoXCJmaWxsXCIsXCIjZTlhYzQ1XCIpO1xuICAgICAgICBpY29uX2ludmFsaWQuY3NzKFwiYm94LXNoYWRvd1wiLCBcIndoaXRlIDBweCAwcHggNXB4IDJweFwiKTtcbiAgICB9XG5cbiAgICBjaGFuZ2VIZWlnaHRNYWluQmxvY2soKTtcblxuICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGFuZ2VIZWlnaHRNYWluQmxvY2soKVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gY2hhbmdlSGVpZ2h0TWFpbkJsb2NrKCkge1xuICAgICAgICB2YXIgZ3JvdXAgPSAkKCcjZ3JpZC1ncm91cCcpO1xuXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSA5NjApXG4gICAgICAgICAgICBncm91cC5oZWlnaHQod2luZG93LmlubmVySGVpZ2h0IC0gMTcwKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZ3JvdXAuaGVpZ2h0KCdpbml0aWFsJylcbiAgICB9XG5cbiAgICAvLyDQvtGC0LrRgNGL0YLQuNC1INC00LXRhNC+0LvRgtC90L7Qs9C+INGB0LXQu9C10LrRgtCwINC/0YDQuCDQvdCw0LbQsNGC0LjQuCDQvdCwINGB0YLRgNC10LvQvtGH0LrRg1xuICAgICQoJy5mZWVkYmFja19mb3JtX2ZpZWxkLWFycm93JykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWxlbWVudCA9ICQodGhpcykuY2xvc2VzdCgnLmZlZWRiYWNrX2Zvcm1fZmllbGQnKS5maW5kKCdzZWxlY3QnKTtcblxuICAgICAgICBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtcbiAgICAgICAgICAgIGUuaW5pdE1vdXNlRXZlbnQoXCJtb3VzZWRvd25cIiwgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAwLCAwLCAwLCAwLCAwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMCwgbnVsbCk7XG4gICAgICAgICAgICBlbGVtZW50WzBdLmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5maXJlRXZlbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnRbMF0uZmlyZUV2ZW50KFwib25tb3VzZWRvd25cIik7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgJChcIi50b192YWxpZGF0ZVwiKS5pbnB1dG1hc2soKTtcbiAgICAkKFwiLnRvX3ZhbGlkYXRlXCIpLm9uKCdjaGFuZ2Uga2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiZm9ybV9fZWxlbWVudCBlcnJvclwiKTtcbiAgICB9KTtcblxuXG5cblxuICAgICQoXCIuZWNvdGVrX2J1dHRvbjNcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBjdXJyZW50X2Zvcm0gPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnBhcmVudCgpO1xuICAgICAgICB2YXIgaGFzRXJyID0gZmFsc2U7XG4gICAgICAgIGN1cnJlbnRfZm9ybS5maW5kKFwiLnRvX3ZhbGlkYXRlXCIpLmVhY2goZnVuY3Rpb24gKG51bSwgZWwpIHtcbiAgICAgICAgICAgIGlmICghJChlbCkuaW5wdXRtYXNrKFwiaXNDb21wbGV0ZVwiKSAmJiAoJChlbCkuZGF0YShcImlucHV0bWFzay1yZWdleFwiKSAhPSBcIi4qXCIpKSB7XG4gICAgICAgICAgICAgICAgaGFzRXJyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkKGVsKS5wYXJlbnQoKS5hZGRDbGFzcyhcImZvcm1fX2VsZW1lbnQgZXJyb3JcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgcmVzdWx0cyA9IHt9O1xuICAgICAgICByZXN1bHRzW1wiZnVsbFwiXSA9IHRydWU7XG4gICAgICAgIHJlc3VsdHNbXCJpZFwiXSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICBpZiAoaGFzRXJyKSB7XG4gICAgICAgICAgICBjdXJyZW50X2Zvcm0uZmluZChcIi5mZWVkYmFja19mb3JtX2l0ZW1cIikuZWFjaChmdW5jdGlvbiAobnVtLCBlbCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9ICQoZWwpLmZpbmQoXCIuZmVlZGJhY2tfZm9ybV9jYXB0aW9uXCIpWzBdLmNoaWxkTm9kZXNbMF0uZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRfbm9kZSA9ICQoZWwpLmZpbmQoXCIuZWNvdGVrX2lucHV0dGV4dFwiKVswXTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1t0aXRsZS50cmltKCldID0gJChjb250ZW50X25vZGUpLnZhbCgpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHBpYztcbiAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGljID0gKGUudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmVzdWx0c1tcImF0dGFjaFwiXSA9IHBpYztcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL2FqYXgtaGFuZGxlci9cIixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7ZGF0YTogcmVzdWx0c30sXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFVJa2l0Lm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogKHJlc3VsdCA9PSBcInN1Y2Nlc3NcIikgPyAn0JLQsNGI0LUg0YHQvtC+0LHRidC10L3QuNC1INGD0YHQv9C10YjQvdC+INC+0YLQv9GA0LDQstC70LXQvdC+LCDQvdC+0LzQtdGAINC+0LHRgNCw0YnQtdC90LjRjzogJyArIHJlc3VsdHNbXCJpZFwiXSArIFwiXFxu0J3QvtC80LXRgCDQvtCx0YDQsNGJ0LXQvdC40Y8g0YLQsNC6INC20LUg0L/RgNC+0LTRg9Cx0LvQuNGA0L7QstCw0L0g0L3QsCDQstCw0YjRgyDQv9C+0YfRgtGDXCIgIDogJ9Ce0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogNjAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3M6ICdib3R0b20tY2VudGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJChcIi5lY290ZWtfaW5wdXR0ZXh0XCIpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFVJa2l0Lm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ9Ce0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INGB0L7QvtCx0YnQtdC90LjRjycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnd2FybmluZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3M6ICdib3R0b20tY2VudGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZmlsZSA9IGN1cnJlbnRfZm9ybS5maW5kKFwiI2RvcGZpbGVcIik7XG4gICAgICAgICAgICByZWFkZXIucmVhZEFzQmluYXJ5U3RyaW5nKGZpbGVbMF0uZmlsZXNbMF0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6IFwiL2FqYXgtaGFuZGxlci9cIixcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgZGF0YToge2RhdGE6IHJlc3VsdHN9LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgVUlraXQubm90aWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IChyZXN1bHQgPT0gXCJzdWNjZXNzXCIpID8gJ9CS0LDRiNC1INGB0L7QvtCx0YnQtdC90LjQtSDRg9GB0L/QtdGI0L3QviDQvtGC0L/RgNCw0LLQu9C10L3Qviwg0L3QvtC80LXRgCDQvtCx0YDQsNGJ0LXQvdC40Y86ICcgKyByZXN1bHRzW1wiaWRcIl0gKyBcIlxcbtCd0L7QvNC10YAg0L7QsdGA0LDRidC10L3QuNGPINGC0LDQuiDQttC1INC/0YDQvtC00YPQsdC70LjRgNC+0LLQsNC9INC90LAg0LLQsNGI0YMg0L/QvtGH0YLRg1wiICA6ICfQntGI0LjQsdC60LAg0L7RgtC/0YDQsNCy0LrQuCDRgdC+0L7QsdGJ0LXQvdC40Y8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiA2MDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zOiAnYm90dG9tLWNlbnRlcidcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICQoXCIuZWNvdGVrX2lucHV0dGV4dFwiKS52YWwoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIFVJa2l0Lm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn0J7RiNC40LHQutCwINC+0YLQv9GA0LDQstC60Lgg0YHQvtC+0LHRidC10L3QuNGPJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMzAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvczogJ2JvdHRvbS1jZW50ZXInXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSlcbn0pOyJdfQ==
