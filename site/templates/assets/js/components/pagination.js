!function(t){var e;window.UIkit2&&(e=t(UIkit2)),"function"==typeof define&&define.amd&&define("uikit-pagination",["uikit"],function(){return e||t(UIkit2)})}(function(a){"use strict";return a.component("pagination",{defaults:{items:1,itemsOnPage:1,pages:0,displayedPages:7,edges:1,currentPage:0,lblPrev:!1,lblNext:!1,onSelectPage:function(){}},boot:function(){a.ready(function(t){a.$("[data-uk-pagination]",t).each(function(){var t=a.$(this);t.data("pagination")||a.pagination(t,a.Utils.options(t.attr("data-uk-pagination")))})})},init:function(){var e=this;this.pages=this.options.pages?this.options.pages:Math.ceil(this.options.items/this.options.itemsOnPage)?Math.ceil(this.options.items/this.options.itemsOnPage):1,this.currentPage=this.options.currentPage,this.halfDisplayed=this.options.displayedPages/2,this.on("click","a[data-page]",function(t){t.preventDefault(),e.selectPage(a.$(this).data("page"))}),this._render()},_getInterval:function(){return{start:Math.ceil(this.currentPage>this.halfDisplayed?Math.max(Math.min(this.currentPage-this.halfDisplayed,this.pages-this.options.displayedPages),0):0),end:Math.ceil(this.currentPage>this.halfDisplayed?Math.min(this.currentPage+this.halfDisplayed,this.pages):Math.min(this.options.displayedPages,this.pages))}},render:function(t){this.pages=t||this.pages,this._render()},selectPage:function(t,e){this.currentPage=t,this.render(e),this.options.onSelectPage.apply(this,[t]),this.trigger("select.uk.pagination",[t,this])},_render:function(){var t,e=this.options,i=this._getInterval();if(this.element.empty(),e.lblPrev&&this._append(this.currentPage-1,{text:e.lblPrev}),0<i.start&&0<e.edges){var s=Math.min(e.edges,i.start);for(t=0;t<s;t++)this._append(t);e.edges<i.start&&i.start-e.edges!=1?this.element.append("<li><span>...</span></li>"):i.start-e.edges==1&&this._append(e.edges)}for(t=i.start;t<i.end;t++)this._append(t);if(i.end<this.pages&&0<e.edges)for(this.pages-e.edges>i.end&&this.pages-e.edges-i.end!=1?this.element.append("<li><span>...</span></li>"):this.pages-e.edges-i.end==1&&this._append(i.end++),t=Math.max(this.pages-e.edges,i.end);t<this.pages;t++)this._append(t);e.lblNext&&this._append(this.currentPage+1,{text:e.lblNext})},_append:function(t,e){var i,s;t=t<0?0:t<this.pages?t:this.pages-1,s=a.$.extend({text:t+1},e),i=t==this.currentPage?'<li class="uk-active"><span>'+s.text+"</span></li>":'<li><a href="#page-'+(t+1)+'" data-page="'+t+'">'+s.text+"</a></li>",this.element.append(i)}}),a.pagination});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvcGFnaW5hdGlvbi5qcyJdLCJuYW1lcyI6WyJhZGRvbiIsImNvbXBvbmVudCIsIndpbmRvdyIsIlVJa2l0MiIsImRlZmluZSIsImFtZCIsIlVJIiwiZGVmYXVsdHMiLCJpdGVtcyIsIml0ZW1zT25QYWdlIiwicGFnZXMiLCJkaXNwbGF5ZWRQYWdlcyIsImVkZ2VzIiwiY3VycmVudFBhZ2UiLCJsYmxQcmV2IiwibGJsTmV4dCIsIm9uU2VsZWN0UGFnZSIsImJvb3QiLCJyZWFkeSIsImNvbnRleHQiLCIkIiwiZWFjaCIsImVsZSIsInRoaXMiLCJkYXRhIiwicGFnaW5hdGlvbiIsIlV0aWxzIiwib3B0aW9ucyIsImF0dHIiLCJpbml0IiwiJHRoaXMiLCJNYXRoIiwiY2VpbCIsImhhbGZEaXNwbGF5ZWQiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInNlbGVjdFBhZ2UiLCJfcmVuZGVyIiwiX2dldEludGVydmFsIiwic3RhcnQiLCJtYXgiLCJtaW4iLCJlbmQiLCJyZW5kZXIiLCJwYWdlSW5kZXgiLCJhcHBseSIsInRyaWdnZXIiLCJpIiwibyIsImludGVydmFsIiwiZWxlbWVudCIsImVtcHR5IiwiX2FwcGVuZCIsInRleHQiLCJhcHBlbmQiLCJvcHRzIiwiaXRlbSIsImV4dGVuZCJdLCJtYXBwaW5ncyI6IkNBSUEsU0FBVUEsR0FFTixJQUFJQyxFQUVBQyxPQUFPQyxTQUNQRixFQUFZRCxFQUFNRyxTQUdELG1CQUFWQyxRQUF3QkEsT0FBT0MsS0FDdENELE9BQU8sbUJBQW9CLENBQUMsU0FBVSxXQUNsQyxPQUFPSCxHQUFhRCxFQUFNRyxVQVZ0QyxDQWNHLFNBQVNHLEdBRVIsYUE2SEEsT0EzSEFBLEVBQUdMLFVBQVUsYUFBYyxDQUV2Qk0sU0FBVSxDQUNOQyxNQUFpQixFQUNqQkMsWUFBaUIsRUFDakJDLE1BQWlCLEVBQ2pCQyxlQUFpQixFQUNqQkMsTUFBaUIsRUFDakJDLFlBQWlCLEVBQ2pCQyxTQUFpQixFQUNqQkMsU0FBaUIsRUFDakJDLGFBQWlCLGNBR3JCQyxLQUFNLFdBR0ZYLEVBQUdZLE1BQU0sU0FBU0MsR0FFZGIsRUFBR2MsRUFBRSx1QkFBd0JELEdBQVNFLEtBQUssV0FDdkMsSUFBSUMsRUFBTWhCLEVBQUdjLEVBQUVHLE1BRVZELEVBQUlFLEtBQUssZUFDVmxCLEVBQUdtQixXQUFXSCxFQUFLaEIsRUFBR29CLE1BQU1DLFFBQVFMLEVBQUlNLEtBQUssNkJBTTdEQyxLQUFNLFdBRUYsSUFBSUMsRUFBUVAsS0FFWkEsS0FBS2IsTUFBZ0JhLEtBQUtJLFFBQVFqQixNQUFTYSxLQUFLSSxRQUFRakIsTUFBUXFCLEtBQUtDLEtBQUtULEtBQUtJLFFBQVFuQixNQUFRZSxLQUFLSSxRQUFRbEIsYUFBZXNCLEtBQUtDLEtBQUtULEtBQUtJLFFBQVFuQixNQUFRZSxLQUFLSSxRQUFRbEIsYUFBZSxFQUN0TGMsS0FBS1YsWUFBZ0JVLEtBQUtJLFFBQVFkLFlBQ2xDVSxLQUFLVSxjQUFnQlYsS0FBS0ksUUFBUWhCLGVBQWlCLEVBRW5EWSxLQUFLVyxHQUFHLFFBQVMsZUFBZ0IsU0FBU0MsR0FDdENBLEVBQUVDLGlCQUNGTixFQUFNTyxXQUFXL0IsRUFBR2MsRUFBRUcsTUFBTUMsS0FBSyxXQUdyQ0QsS0FBS2UsV0FHVEMsYUFBYyxXQUVWLE1BQU8sQ0FDSEMsTUFBT1QsS0FBS0MsS0FBS1QsS0FBS1YsWUFBY1UsS0FBS1UsY0FBZ0JGLEtBQUtVLElBQUlWLEtBQUtXLElBQUluQixLQUFLVixZQUFjVSxLQUFLVSxjQUFnQlYsS0FBS2IsTUFBUWEsS0FBS0ksUUFBUWhCLGdCQUFrQixHQUFLLEdBQ3BLZ0MsSUFBT1osS0FBS0MsS0FBS1QsS0FBS1YsWUFBY1UsS0FBS1UsY0FBZ0JGLEtBQUtXLElBQUluQixLQUFLVixZQUFjVSxLQUFLVSxjQUFlVixLQUFLYixPQUFTcUIsS0FBS1csSUFBSW5CLEtBQUtJLFFBQVFoQixlQUFnQlksS0FBS2IsVUFJMUtrQyxPQUFRLFNBQVNsQyxHQUNiYSxLQUFLYixNQUFRQSxHQUFnQmEsS0FBS2IsTUFDbENhLEtBQUtlLFdBR1RELFdBQVksU0FBU1EsRUFBV25DLEdBQzVCYSxLQUFLVixZQUFjZ0MsRUFDbkJ0QixLQUFLcUIsT0FBT2xDLEdBRVphLEtBQUtJLFFBQVFYLGFBQWE4QixNQUFNdkIsS0FBTSxDQUFDc0IsSUFDdkN0QixLQUFLd0IsUUFBUSx1QkFBd0IsQ0FBQ0YsRUFBV3RCLFFBR3JEZSxRQUFTLFdBRUwsSUFBc0RVLEVBQWxEQyxFQUFJMUIsS0FBS0ksUUFBU3VCLEVBQVczQixLQUFLZ0IsZUFRdEMsR0FOQWhCLEtBQUs0QixRQUFRQyxRQUdUSCxFQUFFbkMsU0FBU1MsS0FBSzhCLFFBQVE5QixLQUFLVixZQUFjLEVBQUcsQ0FBQ3lDLEtBQU1MLEVBQUVuQyxVQUd0QyxFQUFqQm9DLEVBQVNWLE9BQXVCLEVBQVZTLEVBQUVyQyxNQUFXLENBRW5DLElBQUkrQixFQUFNWixLQUFLVyxJQUFJTyxFQUFFckMsTUFBT3NDLEVBQVNWLE9BRXJDLElBQUtRLEVBQUksRUFBR0EsRUFBSUwsRUFBS0ssSUFBS3pCLEtBQUs4QixRQUFRTCxHQUVuQ0MsRUFBRXJDLE1BQVFzQyxFQUFTVixPQUFVVSxFQUFTVixNQUFRUyxFQUFFckMsT0FBUyxFQUN6RFcsS0FBSzRCLFFBQVFJLE9BQU8sNkJBQ2JMLEVBQVNWLE1BQVFTLEVBQUVyQyxPQUFTLEdBQ25DVyxLQUFLOEIsUUFBUUosRUFBRXJDLE9BS3ZCLElBQUtvQyxFQUFJRSxFQUFTVixNQUFPUSxFQUFJRSxFQUFTUCxJQUFLSyxJQUFLekIsS0FBSzhCLFFBQVFMLEdBRzdELEdBQUlFLEVBQVNQLElBQU1wQixLQUFLYixPQUFtQixFQUFWdUMsRUFBRXJDLE1BVS9CLElBUklXLEtBQUtiLE1BQVF1QyxFQUFFckMsTUFBUXNDLEVBQVNQLEtBQVFwQixLQUFLYixNQUFRdUMsRUFBRXJDLE1BQVFzQyxFQUFTUCxLQUFPLEVBQy9FcEIsS0FBSzRCLFFBQVFJLE9BQU8sNkJBQ2JoQyxLQUFLYixNQUFRdUMsRUFBRXJDLE1BQVFzQyxFQUFTUCxLQUFPLEdBQzlDcEIsS0FBSzhCLFFBQVFILEVBQVNQLE9BS3JCSyxFQUZPakIsS0FBS1UsSUFBSWxCLEtBQUtiLE1BQVF1QyxFQUFFckMsTUFBT3NDLEVBQVNQLEtBRXBDSyxFQUFJekIsS0FBS2IsTUFBT3NDLElBQUt6QixLQUFLOEIsUUFBUUwsR0FJbERDLEVBQUVsQyxTQUFTUSxLQUFLOEIsUUFBUTlCLEtBQUtWLFlBQWMsRUFBRyxDQUFDeUMsS0FBTUwsRUFBRWxDLFdBRy9Ec0MsUUFBUyxTQUFTUixFQUFXVyxHQUV6QixJQUFJQyxFQUFNOUIsRUFFVmtCLEVBQVlBLEVBQVksRUFBSSxFQUFLQSxFQUFZdEIsS0FBS2IsTUFBUW1DLEVBQVl0QixLQUFLYixNQUFRLEVBQ25GaUIsRUFBWXJCLEVBQUdjLEVBQUVzQyxPQUFPLENBQUVKLEtBQU1ULEVBQVksR0FBS1csR0FFakRDLEVBQVFaLEdBQWF0QixLQUFLVixZQUFlLCtCQUFrQ2MsRUFBWSxLQUFJLGVBQWlCLHVCQUF1QmtCLEVBQVUsR0FBRyxnQkFBZ0JBLEVBQVUsS0FBS2xCLEVBQVEyQixLQUFLLFlBRTVML0IsS0FBSzRCLFFBQVFJLE9BQU9FLE1BSXJCbkQsRUFBR21CIiwiZmlsZSI6ImNvbXBvbmVudHMvcGFnaW5hdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBVSWtpdCAyLjI3LjIgfCBodHRwOi8vd3d3LmdldHVpa2l0LmNvbSB8IChjKSAyMDE0IFlPT3RoZW1lIHwgTUlUIExpY2Vuc2UgKi9cclxuLypcclxuICogQmFzZWQgb24gc2ltcGxlUGFnaW5hdGlvbiAtIENvcHlyaWdodCAoYykgMjAxMiBGbGF2aXVzIE1hdGlzIC0gaHR0cDovL2ZsYXZpdXNtYXRpcy5naXRodWIuY29tL3NpbXBsZVBhZ2luYXRpb24uanMvIChNSVQpXHJcbiAqL1xyXG4oZnVuY3Rpb24oYWRkb24pIHtcclxuXHJcbiAgICB2YXIgY29tcG9uZW50O1xyXG5cclxuICAgIGlmICh3aW5kb3cuVUlraXQyKSB7XHJcbiAgICAgICAgY29tcG9uZW50ID0gYWRkb24oVUlraXQyKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICBkZWZpbmUoJ3Vpa2l0LXBhZ2luYXRpb24nLCBbJ3Vpa2l0J10sIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQgfHwgYWRkb24oVUlraXQyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn0pKGZ1bmN0aW9uKFVJKXtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBVSS5jb21wb25lbnQoJ3BhZ2luYXRpb24nLCB7XHJcblxyXG4gICAgICAgIGRlZmF1bHRzOiB7XHJcbiAgICAgICAgICAgIGl0ZW1zICAgICAgICAgIDogMSxcclxuICAgICAgICAgICAgaXRlbXNPblBhZ2UgICAgOiAxLFxyXG4gICAgICAgICAgICBwYWdlcyAgICAgICAgICA6IDAsXHJcbiAgICAgICAgICAgIGRpc3BsYXllZFBhZ2VzIDogNyxcclxuICAgICAgICAgICAgZWRnZXMgICAgICAgICAgOiAxLFxyXG4gICAgICAgICAgICBjdXJyZW50UGFnZSAgICA6IDAsXHJcbiAgICAgICAgICAgIGxibFByZXYgICAgICAgIDogZmFsc2UsXHJcbiAgICAgICAgICAgIGxibE5leHQgICAgICAgIDogZmFsc2UsXHJcbiAgICAgICAgICAgIG9uU2VsZWN0UGFnZSAgIDogZnVuY3Rpb24oKSB7fVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGJvb3Q6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gaW5pdCBjb2RlXHJcbiAgICAgICAgICAgIFVJLnJlYWR5KGZ1bmN0aW9uKGNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBVSS4kKCdbZGF0YS11ay1wYWdpbmF0aW9uXScsIGNvbnRleHQpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gVUkuJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGUuZGF0YSgncGFnaW5hdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFVJLnBhZ2luYXRpb24oZWxlLCBVSS5VdGlscy5vcHRpb25zKGVsZS5hdHRyKCdkYXRhLXVrLXBhZ2luYXRpb24nKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBhZ2VzICAgICAgICAgPSB0aGlzLm9wdGlvbnMucGFnZXMgPyAgdGhpcy5vcHRpb25zLnBhZ2VzIDogTWF0aC5jZWlsKHRoaXMub3B0aW9ucy5pdGVtcyAvIHRoaXMub3B0aW9ucy5pdGVtc09uUGFnZSkgPyBNYXRoLmNlaWwodGhpcy5vcHRpb25zLml0ZW1zIC8gdGhpcy5vcHRpb25zLml0ZW1zT25QYWdlKSA6IDE7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgICA9IHRoaXMub3B0aW9ucy5jdXJyZW50UGFnZTtcclxuICAgICAgICAgICAgdGhpcy5oYWxmRGlzcGxheWVkID0gdGhpcy5vcHRpb25zLmRpc3BsYXllZFBhZ2VzIC8gMjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub24oJ2NsaWNrJywgJ2FbZGF0YS1wYWdlXScsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuc2VsZWN0UGFnZShVSS4kKHRoaXMpLmRhdGEoJ3BhZ2UnKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyKCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgX2dldEludGVydmFsOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdGFydDogTWF0aC5jZWlsKHRoaXMuY3VycmVudFBhZ2UgPiB0aGlzLmhhbGZEaXNwbGF5ZWQgPyBNYXRoLm1heChNYXRoLm1pbih0aGlzLmN1cnJlbnRQYWdlIC0gdGhpcy5oYWxmRGlzcGxheWVkLCAodGhpcy5wYWdlcyAtIHRoaXMub3B0aW9ucy5kaXNwbGF5ZWRQYWdlcykpLCAwKSA6IDApLFxyXG4gICAgICAgICAgICAgICAgZW5kICA6IE1hdGguY2VpbCh0aGlzLmN1cnJlbnRQYWdlID4gdGhpcy5oYWxmRGlzcGxheWVkID8gTWF0aC5taW4odGhpcy5jdXJyZW50UGFnZSArIHRoaXMuaGFsZkRpc3BsYXllZCwgdGhpcy5wYWdlcykgOiBNYXRoLm1pbih0aGlzLm9wdGlvbnMuZGlzcGxheWVkUGFnZXMsIHRoaXMucGFnZXMpKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24ocGFnZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdlcyA9IHBhZ2VzID8gcGFnZXMgOiB0aGlzLnBhZ2VzO1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXIoKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzZWxlY3RQYWdlOiBmdW5jdGlvbihwYWdlSW5kZXgsIHBhZ2VzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBwYWdlSW5kZXg7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHBhZ2VzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vblNlbGVjdFBhZ2UuYXBwbHkodGhpcywgW3BhZ2VJbmRleF0pO1xyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3NlbGVjdC51ay5wYWdpbmF0aW9uJywgW3BhZ2VJbmRleCwgdGhpc10pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIF9yZW5kZXI6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIG8gPSB0aGlzLm9wdGlvbnMsIGludGVydmFsID0gdGhpcy5fZ2V0SW50ZXJ2YWwoKSwgaTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5lbXB0eSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgUHJldiBsaW5rXHJcbiAgICAgICAgICAgIGlmIChvLmxibFByZXYpIHRoaXMuX2FwcGVuZCh0aGlzLmN1cnJlbnRQYWdlIC0gMSwge3RleHQ6IG8ubGJsUHJldn0pO1xyXG5cclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgc3RhcnQgZWRnZXNcclxuICAgICAgICAgICAgaWYgKGludGVydmFsLnN0YXJ0ID4gMCAmJiBvLmVkZ2VzID4gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBNYXRoLm1pbihvLmVkZ2VzLCBpbnRlcnZhbC5zdGFydCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGVuZDsgaSsrKSB0aGlzLl9hcHBlbmQoaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG8uZWRnZXMgPCBpbnRlcnZhbC5zdGFydCAmJiAoaW50ZXJ2YWwuc3RhcnQgLSBvLmVkZ2VzICE9IDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZCgnPGxpPjxzcGFuPi4uLjwvc3Bhbj48L2xpPicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnRlcnZhbC5zdGFydCAtIG8uZWRnZXMgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FwcGVuZChvLmVkZ2VzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgaW50ZXJ2YWwgbGlua3NcclxuICAgICAgICAgICAgZm9yIChpID0gaW50ZXJ2YWwuc3RhcnQ7IGkgPCBpbnRlcnZhbC5lbmQ7IGkrKykgdGhpcy5fYXBwZW5kKGkpO1xyXG5cclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgZW5kIGVkZ2VzXHJcbiAgICAgICAgICAgIGlmIChpbnRlcnZhbC5lbmQgPCB0aGlzLnBhZ2VzICYmIG8uZWRnZXMgPiAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFnZXMgLSBvLmVkZ2VzID4gaW50ZXJ2YWwuZW5kICYmICh0aGlzLnBhZ2VzIC0gby5lZGdlcyAtIGludGVydmFsLmVuZCAhPSAxKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmQoJzxsaT48c3Bhbj4uLi48L3NwYW4+PC9saT4nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wYWdlcyAtIG8uZWRnZXMgLSBpbnRlcnZhbC5lbmQgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FwcGVuZChpbnRlcnZhbC5lbmQrKyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJlZ2luID0gTWF0aC5tYXgodGhpcy5wYWdlcyAtIG8uZWRnZXMsIGludGVydmFsLmVuZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gYmVnaW47IGkgPCB0aGlzLnBhZ2VzOyBpKyspIHRoaXMuX2FwcGVuZChpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgTmV4dCBsaW5rICh1bmxlc3Mgb3B0aW9uIGlzIHNldCBmb3IgYXQgZnJvbnQpXHJcbiAgICAgICAgICAgIGlmIChvLmxibE5leHQpIHRoaXMuX2FwcGVuZCh0aGlzLmN1cnJlbnRQYWdlICsgMSwge3RleHQ6IG8ubGJsTmV4dH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIF9hcHBlbmQ6IGZ1bmN0aW9uKHBhZ2VJbmRleCwgb3B0cykge1xyXG5cclxuICAgICAgICAgICAgdmFyIGl0ZW0sIG9wdGlvbnM7XHJcblxyXG4gICAgICAgICAgICBwYWdlSW5kZXggPSBwYWdlSW5kZXggPCAwID8gMCA6IChwYWdlSW5kZXggPCB0aGlzLnBhZ2VzID8gcGFnZUluZGV4IDogdGhpcy5wYWdlcyAtIDEpO1xyXG4gICAgICAgICAgICBvcHRpb25zICAgPSBVSS4kLmV4dGVuZCh7IHRleHQ6IHBhZ2VJbmRleCArIDEgfSwgb3B0cyk7XHJcblxyXG4gICAgICAgICAgICBpdGVtID0gKHBhZ2VJbmRleCA9PSB0aGlzLmN1cnJlbnRQYWdlKSA/ICc8bGkgY2xhc3M9XCJ1ay1hY3RpdmVcIj48c3Bhbj4nICsgKG9wdGlvbnMudGV4dCkgKyAnPC9zcGFuPjwvbGk+JyA6ICc8bGk+PGEgaHJlZj1cIiNwYWdlLScrKHBhZ2VJbmRleCsxKSsnXCIgZGF0YS1wYWdlPVwiJytwYWdlSW5kZXgrJ1wiPicrb3B0aW9ucy50ZXh0Kyc8L2E+PC9saT4nO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZChpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gVUkucGFnaW5hdGlvbjtcclxufSk7Il19
