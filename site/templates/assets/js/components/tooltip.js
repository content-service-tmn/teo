!function(t){var i;window.UIkit2&&(i=t(UIkit2)),"function"==typeof define&&define.amd&&define("uikit-tooltip",["uikit"],function(){return i||t(UIkit2)})}(function(u){"use strict";var m,v,g;return u.component("tooltip",{defaults:{offset:5,pos:"top",animation:!1,delay:0,cls:"",activeClass:"uk-active",src:function(t){var i=t.attr("title");return void 0!==i&&t.data("cached-title",i).removeAttr("title"),t.data("cached-title")}},tip:"",boot:function(){u.$html.on("mouseenter.tooltip.uikit focus.tooltip.uikit","[data-uk-tooltip]",function(t){var i=u.$(this);i.data("tooltip")||(u.tooltip(i,u.Utils.options(i.attr("data-uk-tooltip"))),i.trigger("mouseenter"))})},init:function(){var i=this;m||(m=u.$('<div class="uk-tooltip"></div>').appendTo("body")),this.on({focus:function(t){i.show()},blur:function(t){i.hide()},mouseenter:function(t){i.show()},mouseleave:function(t){i.hide()}})},show:function(){if(this.tip="function"==typeof this.options.src?this.options.src(this.element):this.options.src,v&&clearTimeout(v),g&&clearInterval(g),"string"==typeof this.tip&&this.tip.length){m.stop().css({top:-2e3,visibility:"hidden"}).removeClass(this.options.activeClass).show(),m.html('<div class="uk-tooltip-inner">'+this.tip+"</div>");var t=this,i=u.$.extend({},this.element.offset(),{width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}),o=m[0].offsetWidth,e=m[0].offsetHeight,s="function"==typeof this.options.offset?this.options.offset.call(this.element):this.options.offset,n="function"==typeof this.options.pos?this.options.pos.call(this.element):this.options.pos,l=n.split("-"),f={display:"none",visibility:"visible",top:i.top+i.height+e,left:i.left};if("fixed"==u.$html.css("position")||"fixed"==u.$body.css("position")){var a=u.$("body").offset(),p=u.$("html").offset(),h=p.top+a.top,c=p.left+a.left;i.left-=c,i.top-=h}"left"!=l[0]&&"right"!=l[0]||"right"!=u.langdirection||(l[0]="left"==l[0]?"right":"left");var r={bottom:{top:i.top+i.height+s,left:i.left+i.width/2-o/2},top:{top:i.top-e-s,left:i.left+i.width/2-o/2},left:{top:i.top+i.height/2-e/2,left:i.left-o-s},right:{top:i.top+i.height/2-e/2,left:i.left+i.width+s}};u.$.extend(f,r[l[0]]),2==l.length&&(f.left="left"==l[1]?i.left:i.left+i.width-o);var d=this.checkBoundary(f.left,f.top,o,e);if(d){switch(d){case"x":n=2==l.length?l[0]+"-"+(f.left<0?"left":"right"):f.left<0?"right":"left";break;case"y":n=2==l.length?(f.top<0?"bottom":"top")+"-"+l[1]:f.top<0?"bottom":"top";break;case"xy":n=2==l.length?(f.top<0?"bottom":"top")+"-"+(f.left<0?"left":"right"):f.left<0?"right":"left"}l=n.split("-"),u.$.extend(f,r[l[0]]),2==l.length&&(f.left="left"==l[1]?i.left:i.left+i.width-o)}f.left-=u.$body.position().left,v=setTimeout(function(){m.css(f).attr("class",["uk-tooltip","uk-tooltip-"+n,t.options.cls].join(" ")),t.options.animation?m.css({opacity:0,display:"block"}).addClass(t.options.activeClass).animate({opacity:1},parseInt(t.options.animation,10)||400):m.show().addClass(t.options.activeClass),v=!1,g=setInterval(function(){t.element.is(":visible")||t.hide()},150)},parseInt(this.options.delay,10)||0)}},hide:function(){if(!this.element.is("input")||this.element[0]!==document.activeElement)if(v&&clearTimeout(v),g&&clearInterval(g),m.stop(),this.options.animation){var t=this;m.fadeOut(parseInt(this.options.animation,10)||400,function(){m.removeClass(t.options.activeClass)})}else m.hide().removeClass(this.options.activeClass)},content:function(){return this.tip},checkBoundary:function(t,i,o,e){var s="";return(t<0||t-u.$win.scrollLeft()+o>window.innerWidth)&&(s+="x"),(i<0||i-u.$win.scrollTop()+e>window.innerHeight)&&(s+="y"),s}}),u.tooltip});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvdG9vbHRpcC5qcyJdLCJuYW1lcyI6WyJhZGRvbiIsImNvbXBvbmVudCIsIndpbmRvdyIsIlVJa2l0MiIsImRlZmluZSIsImFtZCIsIlVJIiwiJHRvb2x0aXAiLCJ0b29sdGlwZGVsYXkiLCJjaGVja0lkbGUiLCJkZWZhdWx0cyIsIm9mZnNldCIsInBvcyIsImFuaW1hdGlvbiIsImRlbGF5IiwiY2xzIiwiYWN0aXZlQ2xhc3MiLCJzcmMiLCJlbGUiLCJ0aXRsZSIsImF0dHIiLCJ1bmRlZmluZWQiLCJkYXRhIiwicmVtb3ZlQXR0ciIsInRpcCIsImJvb3QiLCIkaHRtbCIsIm9uIiwiZSIsIiQiLCJ0aGlzIiwidG9vbHRpcCIsIlV0aWxzIiwib3B0aW9ucyIsInRyaWdnZXIiLCJpbml0IiwiJHRoaXMiLCJhcHBlbmRUbyIsImZvY3VzIiwic2hvdyIsImJsdXIiLCJoaWRlIiwibW91c2VlbnRlciIsIm1vdXNlbGVhdmUiLCJlbGVtZW50IiwiY2xlYXJUaW1lb3V0IiwiY2xlYXJJbnRlcnZhbCIsImxlbmd0aCIsInN0b3AiLCJjc3MiLCJ0b3AiLCJ2aXNpYmlsaXR5IiwicmVtb3ZlQ2xhc3MiLCJodG1sIiwiZXh0ZW5kIiwid2lkdGgiLCJvZmZzZXRXaWR0aCIsImhlaWdodCIsIm9mZnNldEhlaWdodCIsImNhbGwiLCJwb3NpdGlvbiIsInRtcHBvcyIsInNwbGl0IiwidGNzcyIsImRpc3BsYXkiLCJsZWZ0IiwiJGJvZHkiLCJib2R5b2Zmc2V0IiwiaHRtbG9mZnNldCIsImRvY29mZnNldCIsImxhbmdkaXJlY3Rpb24iLCJ2YXJpYW50cyIsImJvdHRvbSIsInJpZ2h0IiwiYm91bmRhcnkiLCJjaGVja0JvdW5kYXJ5Iiwic2V0VGltZW91dCIsImpvaW4iLCJvcGFjaXR5IiwiYWRkQ2xhc3MiLCJhbmltYXRlIiwicGFyc2VJbnQiLCJzZXRJbnRlcnZhbCIsImlzIiwiZG9jdW1lbnQiLCJhY3RpdmVFbGVtZW50IiwiZmFkZU91dCIsImNvbnRlbnQiLCJheGlzIiwiJHdpbiIsInNjcm9sbExlZnQiLCJpbm5lcldpZHRoIiwic2Nyb2xsVG9wIiwiaW5uZXJIZWlnaHQiXSwibWFwcGluZ3MiOiJDQUNBLFNBQVVBLEdBQ04sSUFBSUMsRUFFQUMsT0FBT0MsU0FDUEYsRUFBWUQsRUFBTUcsU0FHRCxtQkFBVkMsUUFBd0JBLE9BQU9DLEtBQ3RDRCxPQUFPLGdCQUFpQixDQUFDLFNBQVUsV0FDL0IsT0FBT0gsR0FBYUQsRUFBTUcsVUFUdEMsQ0FhRyxTQUFTRyxHQUVSLGFBRUEsSUFBSUMsRUFDQUMsRUFBY0MsRUFzTmxCLE9BcE5BSCxFQUFHTCxVQUFVLFVBQVcsQ0FFcEJTLFNBQVUsQ0FDTkMsT0FBUSxFQUNSQyxJQUFLLE1BQ0xDLFdBQVcsRUFDWEMsTUFBTyxFQUNQQyxJQUFLLEdBQ0xDLFlBQWEsWUFDYkMsSUFBSyxTQUFTQyxHQUNWLElBQUlDLEVBQVFELEVBQUlFLEtBQUssU0FNckIsWUFKY0MsSUFBVkYsR0FDQUQsRUFBSUksS0FBSyxlQUFnQkgsR0FBT0ksV0FBVyxTQUd4Q0wsRUFBSUksS0FBSyxrQkFJeEJFLElBQUssR0FFTEMsS0FBTSxXQUdGbkIsRUFBR29CLE1BQU1DLEdBQUcsK0NBQWdELG9CQUFxQixTQUFTQyxHQUN0RixJQUFJVixFQUFNWixFQUFHdUIsRUFBRUMsTUFFVlosRUFBSUksS0FBSyxhQUNWaEIsRUFBR3lCLFFBQVFiLEVBQUtaLEVBQUcwQixNQUFNQyxRQUFRZixFQUFJRSxLQUFLLHFCQUMxQ0YsRUFBSWdCLFFBQVEsa0JBS3hCQyxLQUFNLFdBRUYsSUFBSUMsRUFBUU4sS0FFUHZCLElBQ0RBLEVBQVdELEVBQUd1QixFQUFFLGtDQUFrQ1EsU0FBUyxTQUcvRFAsS0FBS0gsR0FBRyxDQUNKVyxNQUFhLFNBQVNWLEdBQUtRLEVBQU1HLFFBQ2pDQyxLQUFhLFNBQVNaLEdBQUtRLEVBQU1LLFFBQ2pDQyxXQUFhLFNBQVNkLEdBQUtRLEVBQU1HLFFBQ2pDSSxXQUFhLFNBQVNmLEdBQUtRLEVBQU1LLFdBSXpDRixLQUFNLFdBT0Ys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QUFNSyxRQUN6QyxNQUVKd0MsU0FBU25ELEtBQUtHLFFBQVFuQixNQUFPLEtBQU8sS0FHM0MyQixLQUFNLFdBRUYsSUFBSVgsS0FBS2MsUUFBUXVDLEdBQUcsVUFBWXJELEtBQUtjLFFBQVEsS0FBS3dDLFNBQVNDLGNBTzNELEdBTEk3RSxHQUFjcUMsYUFBYXJDLEdBQzNCQyxHQUFZcUMsY0FBY3JDLEdBRTlCRixFQUFTeUMsT0FFTGxCLEtBQUtHLFFBQVFwQixVQUFXLENBRXhCLElBQUl1QixFQUFRTixLQUVadkIsRUFBUytFLFFBQVFMLFNBQVNuRCxLQUFLRyxRQUFRcEIsVUFBVyxLQUFPLElBQUssV0FDMUROLEVBQVM2QyxZQUFZaEIsRUFBTUgsUUFBUWpCLG9CQUl2Q1QsRUFBU2tDLE9BQU9XLFlBQVl0QixLQUFLRyxRQUFRakIsY0FJakR1RSxRQUFTLFdBQ0wsT0FBT3pELEtBQUtOLEtBR2hCbUQsY0FBZSxTQUFTVixFQUFNZixFQUFLSyxFQUFPRSxHQUV0QyxJQUFJK0IsRUFBTyxHQVVYLE9BUkd2QixFQUFPLEdBQU9BLEVBQU8zRCxFQUFHbUYsS0FBS0MsYUFBY25DLEVBQVNyRCxPQUFPeUYsY0FDM0RILEdBQVEsTUFHUnRDLEVBQU0sR0FBT0EsRUFBTTVDLEVBQUdtRixLQUFLRyxZQUFhbkMsRUFBVXZELE9BQU8yRixlQUN6REwsR0FBUSxLQUdKQSxLQUlSbEYsRUFBR3lCIiwiZmlsZSI6ImNvbXBvbmVudHMvdG9vbHRpcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBVSWtpdCAyLjI3LjIgfCBodHRwOi8vd3d3LmdldHVpa2l0LmNvbSB8IChjKSAyMDE0IFlPT3RoZW1lIHwgTUlUIExpY2Vuc2UgKi9cclxuKGZ1bmN0aW9uKGFkZG9uKSB7XHJcbiAgICB2YXIgY29tcG9uZW50O1xyXG5cclxuICAgIGlmICh3aW5kb3cuVUlraXQyKSB7XHJcbiAgICAgICAgY29tcG9uZW50ID0gYWRkb24oVUlraXQyKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICBkZWZpbmUoJ3Vpa2l0LXRvb2x0aXAnLCBbJ3Vpa2l0J10sIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQgfHwgYWRkb24oVUlraXQyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn0pKGZ1bmN0aW9uKFVJKXtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgJHRvb2x0aXAsICAgLy8gdG9vbHRpcCBjb250YWluZXJcclxuICAgICAgICB0b29sdGlwZGVsYXksIGNoZWNrSWRsZTtcclxuXHJcbiAgICBVSS5jb21wb25lbnQoJ3Rvb2x0aXAnLCB7XHJcblxyXG4gICAgICAgIGRlZmF1bHRzOiB7XHJcbiAgICAgICAgICAgIG9mZnNldDogNSxcclxuICAgICAgICAgICAgcG9zOiAndG9wJyxcclxuICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWxzZSxcclxuICAgICAgICAgICAgZGVsYXk6IDAsIC8vIGluIG1pbGlzZWNvbmRzXHJcbiAgICAgICAgICAgIGNsczogJycsXHJcbiAgICAgICAgICAgIGFjdGl2ZUNsYXNzOiAndWstYWN0aXZlJyxcclxuICAgICAgICAgICAgc3JjOiBmdW5jdGlvbihlbGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9IGVsZS5hdHRyKCd0aXRsZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlLmRhdGEoJ2NhY2hlZC10aXRsZScsIHRpdGxlKS5yZW1vdmVBdHRyKCd0aXRsZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGUuZGF0YShcImNhY2hlZC10aXRsZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHRpcDogJycsXHJcblxyXG4gICAgICAgIGJvb3Q6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gaW5pdCBjb2RlXHJcbiAgICAgICAgICAgIFVJLiRodG1sLm9uKCdtb3VzZWVudGVyLnRvb2x0aXAudWlraXQgZm9jdXMudG9vbHRpcC51aWtpdCcsICdbZGF0YS11ay10b29sdGlwXScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbGUgPSBVSS4kKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZWxlLmRhdGEoJ3Rvb2x0aXAnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIFVJLnRvb2x0aXAoZWxlLCBVSS5VdGlscy5vcHRpb25zKGVsZS5hdHRyKCdkYXRhLXVrLXRvb2x0aXAnKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS50cmlnZ2VyKCdtb3VzZWVudGVyJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyICR0aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIGlmICghJHRvb2x0aXApIHtcclxuICAgICAgICAgICAgICAgICR0b29sdGlwID0gVUkuJCgnPGRpdiBjbGFzcz1cInVrLXRvb2x0aXBcIj48L2Rpdj4nKS5hcHBlbmRUbyhcImJvZHlcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMub24oe1xyXG4gICAgICAgICAgICAgICAgZm9jdXMgICAgICA6IGZ1bmN0aW9uKGUpIHsgJHRoaXMuc2hvdygpOyB9LFxyXG4gICAgICAgICAgICAgICAgYmx1ciAgICAgICA6IGZ1bmN0aW9uKGUpIHsgJHRoaXMuaGlkZSgpOyB9LFxyXG4gICAgICAgICAgICAgICAgbW91c2VlbnRlciA6IGZ1bmN0aW9uKGUpIHsgJHRoaXMuc2hvdygpOyB9LFxyXG4gICAgICAgICAgICAgICAgbW91c2VsZWF2ZSA6IGZ1bmN0aW9uKGUpIHsgJHRoaXMuaGlkZSgpOyB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHNob3c6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy50aXAgPSB0eXBlb2YodGhpcy5vcHRpb25zLnNyYykgPT09ICdmdW5jdGlvbicgPyB0aGlzLm9wdGlvbnMuc3JjKHRoaXMuZWxlbWVudCkgOiB0aGlzLm9wdGlvbnMuc3JjO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRvb2x0aXBkZWxheSkgY2xlYXJUaW1lb3V0KHRvb2x0aXBkZWxheSk7XHJcbiAgICAgICAgICAgIGlmIChjaGVja0lkbGUpICAgIGNsZWFySW50ZXJ2YWwoY2hlY2tJZGxlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YodGhpcy50aXApID09PSAnc3RyaW5nJyA/ICF0aGlzLnRpcC5sZW5ndGg6dHJ1ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgJHRvb2x0aXAuc3RvcCgpLmNzcyh7dG9wOiAtMjAwMCwgdmlzaWJpbGl0eTogJ2hpZGRlbid9KS5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpLnNob3coKTtcclxuICAgICAgICAgICAgJHRvb2x0aXAuaHRtbCgnPGRpdiBjbGFzcz1cInVrLXRvb2x0aXAtaW5uZXJcIj4nICsgdGhpcy50aXAgKyAnPC9kaXY+Jyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgICAgICA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBwb3MgICAgICAgID0gVUkuJC5leHRlbmQoe30sIHRoaXMuZWxlbWVudC5vZmZzZXQoKSwge3dpZHRoOiB0aGlzLmVsZW1lbnRbMF0ub2Zmc2V0V2lkdGgsIGhlaWdodDogdGhpcy5lbGVtZW50WzBdLm9mZnNldEhlaWdodH0pLFxyXG4gICAgICAgICAgICAgICAgd2lkdGggICAgICA9ICR0b29sdGlwWzBdLm9mZnNldFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0ICAgICA9ICR0b29sdGlwWzBdLm9mZnNldEhlaWdodCxcclxuICAgICAgICAgICAgICAgIG9mZnNldCAgICAgPSB0eXBlb2YodGhpcy5vcHRpb25zLm9mZnNldCkgPT09IFwiZnVuY3Rpb25cIiA/IHRoaXMub3B0aW9ucy5vZmZzZXQuY2FsbCh0aGlzLmVsZW1lbnQpIDogdGhpcy5vcHRpb25zLm9mZnNldCxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uICAgPSB0eXBlb2YodGhpcy5vcHRpb25zLnBvcykgPT09IFwiZnVuY3Rpb25cIiA/IHRoaXMub3B0aW9ucy5wb3MuY2FsbCh0aGlzLmVsZW1lbnQpIDogdGhpcy5vcHRpb25zLnBvcyxcclxuICAgICAgICAgICAgICAgIHRtcHBvcyAgICAgPSBwb3NpdGlvbi5zcGxpdChcIi1cIiksXHJcbiAgICAgICAgICAgICAgICB0Y3NzICAgICAgID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXkgICAgOiAnbm9uZScsXHJcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eSA6ICd2aXNpYmxlJyxcclxuICAgICAgICAgICAgICAgICAgICB0b3AgICAgICAgIDogKHBvcy50b3AgKyBwb3MuaGVpZ2h0ICsgaGVpZ2h0KSxcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0ICAgICAgIDogcG9zLmxlZnRcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gcHJldmVudCBzdHJhbmdlIHBvc2l0aW9uXHJcbiAgICAgICAgICAgIC8vIHdoZW4gdG9vbHRpcCBpcyBpbiBvZmZjYW52YXMgZXRjLlxyXG4gICAgICAgICAgICBpZiAoVUkuJGh0bWwuY3NzKCdwb3NpdGlvbicpPT0nZml4ZWQnIHx8IFVJLiRib2R5LmNzcygncG9zaXRpb24nKT09J2ZpeGVkJyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgYm9keW9mZnNldCA9IFVJLiQoJ2JvZHknKS5vZmZzZXQoKSxcclxuICAgICAgICAgICAgICAgICAgICBodG1sb2Zmc2V0ID0gVUkuJCgnaHRtbCcpLm9mZnNldCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRvY29mZnNldCAgPSB7dG9wOiAoaHRtbG9mZnNldC50b3AgKyBib2R5b2Zmc2V0LnRvcCksIGxlZnQ6IChodG1sb2Zmc2V0LmxlZnQgKyBib2R5b2Zmc2V0LmxlZnQpfTtcclxuXHJcbiAgICAgICAgICAgICAgICBwb3MubGVmdCAtPSBkb2NvZmZzZXQubGVmdDtcclxuICAgICAgICAgICAgICAgIHBvcy50b3AgIC09IGRvY29mZnNldC50b3A7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBpZiAoKHRtcHBvc1swXSA9PSAnbGVmdCcgfHwgdG1wcG9zWzBdID09ICdyaWdodCcpICYmIFVJLmxhbmdkaXJlY3Rpb24gPT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgdG1wcG9zWzBdID0gdG1wcG9zWzBdID09ICdsZWZ0JyA/ICdyaWdodCcgOiAnbGVmdCc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciB2YXJpYW50cyA9ICB7XHJcbiAgICAgICAgICAgICAgICBib3R0b20gIDoge3RvcDogcG9zLnRvcCArIHBvcy5oZWlnaHQgKyBvZmZzZXQsIGxlZnQ6IHBvcy5sZWZ0ICsgcG9zLndpZHRoIC8gMiAtIHdpZHRoIC8gMn0sXHJcbiAgICAgICAgICAgICAgICB0b3AgICAgIDoge3RvcDogcG9zLnRvcCAtIGhlaWdodCAtIG9mZnNldCwgbGVmdDogcG9zLmxlZnQgKyBwb3Mud2lkdGggLyAyIC0gd2lkdGggLyAyfSxcclxuICAgICAgICAgICAgICAgIGxlZnQgICAgOiB7dG9wOiBwb3MudG9wICsgcG9zLmhlaWdodCAvIDIgLSBoZWlnaHQgLyAyLCBsZWZ0OiBwb3MubGVmdCAtIHdpZHRoIC0gb2Zmc2V0fSxcclxuICAgICAgICAgICAgICAgIHJpZ2h0ICAgOiB7dG9wOiBwb3MudG9wICsgcG9zLmhlaWdodCAvIDIgLSBoZWlnaHQgLyAyLCBsZWZ0OiBwb3MubGVmdCArIHBvcy53aWR0aCArIG9mZnNldH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIFVJLiQuZXh0ZW5kKHRjc3MsIHZhcmlhbnRzW3RtcHBvc1swXV0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRtcHBvcy5sZW5ndGggPT0gMikgdGNzcy5sZWZ0ID0gKHRtcHBvc1sxXSA9PSAnbGVmdCcpID8gKHBvcy5sZWZ0KSA6ICgocG9zLmxlZnQgKyBwb3Mud2lkdGgpIC0gd2lkdGgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJvdW5kYXJ5ID0gdGhpcy5jaGVja0JvdW5kYXJ5KHRjc3MubGVmdCwgdGNzcy50b3AsIHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgaWYoYm91bmRhcnkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2goYm91bmRhcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICd4JzpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bXBwb3MubGVuZ3RoID09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gdG1wcG9zWzBdK1wiLVwiKyh0Y3NzLmxlZnQgPCAwID8gJ2xlZnQnOiAncmlnaHQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gdGNzcy5sZWZ0IDwgMCA/ICdyaWdodCc6ICdsZWZ0JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3knOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG1wcG9zLmxlbmd0aCA9PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9ICh0Y3NzLnRvcCA8IDAgPyAnYm90dG9tJzogJ3RvcCcpKyctJyt0bXBwb3NbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9ICh0Y3NzLnRvcCA8IDAgPyAnYm90dG9tJzogJ3RvcCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneHknOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG1wcG9zLmxlbmd0aCA9PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9ICh0Y3NzLnRvcCA8IDAgPyAnYm90dG9tJzogJ3RvcCcpKyctJysodGNzcy5sZWZ0IDwgMCA/ICdsZWZ0JzogJ3JpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHRjc3MubGVmdCA8IDAgPyAncmlnaHQnOiAnbGVmdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0bXBwb3MgPSBwb3NpdGlvbi5zcGxpdCgnLScpO1xyXG5cclxuICAgICAgICAgICAgICAgIFVJLiQuZXh0ZW5kKHRjc3MsIHZhcmlhbnRzW3RtcHBvc1swXV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0bXBwb3MubGVuZ3RoID09IDIpIHRjc3MubGVmdCA9ICh0bXBwb3NbMV0gPT0gJ2xlZnQnKSA/IChwb3MubGVmdCkgOiAoKHBvcy5sZWZ0ICsgcG9zLndpZHRoKSAtIHdpZHRoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHRjc3MubGVmdCAtPSBVSS4kYm9keS5wb3NpdGlvbigpLmxlZnQ7XHJcblxyXG4gICAgICAgICAgICB0b29sdGlwZGVsYXkgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgJHRvb2x0aXAuY3NzKHRjc3MpLmF0dHIoJ2NsYXNzJywgWyd1ay10b29sdGlwJywgJ3VrLXRvb2x0aXAtJytwb3NpdGlvbiwgJHRoaXMub3B0aW9ucy5jbHNdLmpvaW4oJyAnKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLm9wdGlvbnMuYW5pbWF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRvb2x0aXAuY3NzKHtvcGFjaXR5OiAwLCBkaXNwbGF5OiAnYmxvY2snfSkuYWRkQ2xhc3MoJHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcykuYW5pbWF0ZSh7b3BhY2l0eTogMX0sIHBhcnNlSW50KCR0aGlzLm9wdGlvbnMuYW5pbWF0aW9uLCAxMCkgfHwgNDAwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRvb2x0aXAuc2hvdygpLmFkZENsYXNzKCR0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRvb2x0aXBkZWxheSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNsb3NlIHRvb2x0aXAgaWYgZWxlbWVudCB3YXMgcmVtb3ZlZCBvciBoaWRkZW5cclxuICAgICAgICAgICAgICAgIGNoZWNrSWRsZSA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoISR0aGlzLmVsZW1lbnQuaXMoJzp2aXNpYmxlJykpICR0aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH0sIDE1MCk7XHJcblxyXG4gICAgICAgICAgICB9LCBwYXJzZUludCh0aGlzLm9wdGlvbnMuZGVsYXksIDEwKSB8fCAwKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBoaWRlOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuaXMoJ2lucHV0JykgJiYgdGhpcy5lbGVtZW50WzBdPT09ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRvb2x0aXBkZWxheSkgY2xlYXJUaW1lb3V0KHRvb2x0aXBkZWxheSk7XHJcbiAgICAgICAgICAgIGlmIChjaGVja0lkbGUpICBjbGVhckludGVydmFsKGNoZWNrSWRsZSk7XHJcblxyXG4gICAgICAgICAgICAkdG9vbHRpcC5zdG9wKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmFuaW1hdGlvbikge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgJHRvb2x0aXAuZmFkZU91dChwYXJzZUludCh0aGlzLm9wdGlvbnMuYW5pbWF0aW9uLCAxMCkgfHwgNDAwLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICR0b29sdGlwLnJlbW92ZUNsYXNzKCR0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkdG9vbHRpcC5oaWRlKCkucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNvbnRlbnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aXA7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY2hlY2tCb3VuZGFyeTogZnVuY3Rpb24obGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXhpcyA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICBpZihsZWZ0IDwgMCB8fCAoKGxlZnQgLSBVSS4kd2luLnNjcm9sbExlZnQoKSkrd2lkdGgpID4gd2luZG93LmlubmVyV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgYXhpcyArPSBcInhcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYodG9wIDwgMCB8fCAoKHRvcCAtIFVJLiR3aW4uc2Nyb2xsVG9wKCkpK2hlaWdodCkgPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgYXhpcyArPSBcInlcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGF4aXM7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIFVJLnRvb2x0aXA7XHJcbn0pOyJdfQ==
