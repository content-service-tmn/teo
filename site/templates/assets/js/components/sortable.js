!function(t){var e;window.UIkit2&&(e=t(UIkit2)),"function"==typeof define&&define.amd&&define("uikit-sortable",["uikit"],function(){return e||t(UIkit2)})}(function(l){"use strict";var i,d,h,u,p,c,f,g,m,v="ontouchstart"in window||"MSGesture"in window||window.DocumentTouch&&document instanceof DocumentTouch,b=v?"MSGesture"in window?"pointerdown":"touchstart":"mousedown",C=v?"MSGesture"in window?"pointermove":"touchmove":"mousemove",$=v?"MSGesture"in window?"pointerup":"touchend":"mouseup";return l.component("sortable",{defaults:{animation:150,threshold:10,childClass:"uk-sortable-item",placeholderClass:"uk-sortable-placeholder",overClass:"uk-sortable-over",draggingClass:"uk-sortable-dragged",dragMovingClass:"uk-sortable-moving",baseClass:"uk-sortable",noDragClass:"uk-sortable-nodrag",emptyClass:"uk-sortable-empty",dragCustomClass:"",handleClass:!1,group:!1,stop:function(){},start:function(){},change:function(){}},boot:function(){l.ready(function(t){l.$("[data-uk-sortable]",t).each(function(){var t=l.$(this);t.data("sortable")||l.sortable(t,l.Utils.options(t.attr("data-uk-sortable")))})}),l.$html.on(C,function(t){if(p){var e=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0]:t;(Math.abs(e.pageX-p.pos.x)>p.threshold||Math.abs(e.pageY-p.pos.y)>p.threshold)&&p.apply(e)}if(i){u||(u=!0,i.show(),i.$current.addClass(i.$sortable.options.placeholderClass),i.$sortable.element.children().addClass(i.$sortable.options.childClass),l.$html.addClass(i.$sortable.options.dragMovingClass));var o=i.data("mouse-offset"),n=t.originalEvent.touches&&t.originalEvent.touches[0]||t.originalEvent,s=parseInt(n.pageX,10)+o.left,a=parseInt(n.pageY,10)+o.top;if(i.css({left:s,top:a}),a+i.height()/3>document.body.offsetHeight)return;a<l.$win.scrollTop()?l.$win.scrollTop(l.$win.scrollTop()-Math.ceil(i.height()/3)):a+i.height()/3>window.innerHeight+l.$win.scrollTop()&&l.$win.scrollTop(l.$win.scrollTop()+Math.ceil(i.height()/3))}}),l.$html.on($,function(t){if(p=!1,d&&i){var e=function(t){t=l.$(t);do{if(t.data("sortable"))return t;t=l.$(t).parent()}while(t.length);return t}(d),o=i.$sortable,n={type:t.type};e[0]&&o.dragDrop(n,o.element),o.dragEnd(n,o.element)}else d=i=null})},init:function(){var a=this,r=this.element[0];c=[],this.checkEmptyList(),this.element.data("sortable-group",this.options.group?this.options.group:l.Utils.uid("sortable-group"));var t=s(function(t){if(!t.data||!t.data.sortable){var e=l.$(t.target),o=e.is("a[href]")?e:e.parents("a[href]");if(!e.is(":input")){if(a.options.handleClass)if(!(e.hasClass(a.options.handleClass)?e:e.closest("."+a.options.handleClass,a.element)).length)return;return t.preventDefault(),o.length&&o.one("click",function(t){t.preventDefault()}).one($,function(){f||(o.trigger("click"),v&&o.attr("href").trim()&&(location.href=o.attr("href")))}),t.data=t.data||{},t.data.sortable=r,a.dragStart(t,this)}}}),e=s(l.Utils.debounce(function(t){return a.dragEnter(t,this)})),o=s(function(t){var e=a.dragenterData(this);a.dragenterData(this,e-1),a.dragenterData(this)||(l.$(this).removeClass(a.options.overClass),a.dragenterData(this,!1))}),n=s(function(t){return!d||d===this||h===this||(a.element.children().removeClass(a.options.overClass),h=this,a.moveElementNextTo(d,this),function(t){t.stopPropagation&&t.stopPropagation();t.preventDefault&&t.preventDefault();t.returnValue=!1}(t))});function s(s){return function(t){var e,o,n;(m=t)&&(o=(e=t.touches&&t.touches[0]||t).target||t.target,v&&document.elementFromPoint&&(o=document.elementFromPoint(e.pageX-document.body.scrollLeft,e.pageY-document.body.scrollTop)),g=l.$(o)),l.$(o).hasClass("."+a.options.childClass)?s.apply(o,[t]):o!==r&&(n=function(t,e){var o=e;if(o==t)return null;for(;o;){if(o.parentNode===t)return o;if(!(o=o.parentNode)||!o.ownerDocument||11===o.nodeType)break}return null}(r,o))&&s.apply(n,[t])}}this.addDragHandlers=function(){v&&m.touches&&m.touches.length?r.addEventListener(C,n,!1):(r.addEventListener("mouseover",e,!1),r.addEventListener("mouseout",o,!1))},this.removeDragHandlers=function(){v&&m.touches&&m.touches.length?r.removeEventListener(C,n,!1):(r.removeEventListener("mouseover",e,!1),r.removeEventListener("mouseout",o,!1))},window.addEventListener(C,function(t){d&&a.dragMove(t,a)},!1),r.addEventListener(b,t,!1)},dragStart:function(t,e){u=f=!1;var o=this,n=l.$(t.target);if((v||2!=t.button)&&!n.is("."+o.options.noDragClass)&&!n.closest("."+o.options.noDragClass).length&&!n.is(":input")){d=e,i&&i.remove();var s=l.$(d),a=s.offset(),r=t.touches&&t.touches[0]||t;p={pos:{x:r.pageX,y:r.pageY},threshold:o.options.handleClass?1:o.options.threshold,apply:function(t){(i=l.$('<div class="'+[o.options.draggingClass,o.options.dragCustomClass].join(" ")+'"></div>').css({display:"none",top:a.top,left:a.left,width:s.width(),height:s.height(),padding:s.css("padding")}).data({"mouse-offset":{left:a.left-parseInt(r.pageX,10),top:a.top-parseInt(r.pageY,10)},origin:o.element,index:s.index()}).append(s.html()).appendTo("body")).$current=s,i.$sortable=o,s.data({"start-list":s.parent(),"start-index":s.index(),"sortable-group":o.options.group}),o.addDragHandlers(),o.options.start(this,d),o.trigger("start.uk.sortable",[o,d,i]),p=!(f=!0)}}}},dragMove:function(t,e){var o,n=(g=l.$(document.elementFromPoint(t.pageX-(document.body.scrollLeft||document.scrollLeft||0),t.pageY-(document.body.scrollTop||document.documentElement.scrollTop||0)))).closest("."+this.options.baseClass),s=n.data("sortable-group"),a=l.$(d),r=a.parent(),i=a.data("sortable-group");n[0]!==r[0]&&void 0!==i&&s===i&&(n.data("sortable").addDragHandlers(),c.push(n),n.children().addClass(this.options.childClass),0<n.children().length?(o=g.closest("."+this.options.childClass)).length?o.before(a):n.append(a):g.append(a),l.$doc.trigger("mouseover")),this.checkEmptyList(),this.checkEmptyList(r)},dragEnter:function(t,e){if(!d||d===e)return!0;var o=this.dragenterData(e);if(this.dragenterData(e,o+1),0===o){var n=l.$(e).parent(),s=l.$(d).data("start-list");if(n[0]!==s[0]){var a=n.data("sortable-group"),r=l.$(d).data("sortable-group");if((a||r)&&a!=r)return!1}l.$(e).addClass(this.options.overClass),this.moveElementNextTo(d,e)}return!1},dragEnd:function(t,e){var o=this;d&&(this.options.stop(e),this.trigger("stop.uk.sortable",[this])),h=d=null,c.push(this.element),c.forEach(function(t,e){l.$(t).children().each(function(){1===this.nodeType&&(l.$(this).removeClass(o.options.overClass).removeClass(o.options.placeholderClass).removeClass(o.options.childClass),o.dragenterData(this,!1))})}),c=[],l.$html.removeClass(this.options.dragMovingClass),this.removeDragHandlers(),i&&(i.remove(),i=null)},dragDrop:function(t,e){"drop"===t.type&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()),this.triggerChangeEvents()},triggerChangeEvents:function(){if(d){var t=l.$(d),e=i.data("origin"),o=t.closest("."+this.options.baseClass),n=[],s=l.$(d);e[0]===o[0]&&i.data("index")!=t.index()?n.push({sortable:this,mode:"moved"}):e[0]!=o[0]&&n.push({sortable:l.$(o).data("sortable"),mode:"added"},{sortable:l.$(e).data("sortable"),mode:"removed"}),n.forEach(function(t,e){t.sortable&&t.sortable.element.trigger("change.uk.sortable",[t.sortable,s,t.mode])})}},dragenterData:function(t,e){if(t=l.$(t),1==arguments.length)return parseInt(t.data("child-dragenter"),10)||0;e?t.data("child-dragenter",Math.max(0,e)):t.removeData("child-dragenter")},moveElementNextTo:function(t,e){!0;var o=this,n=l.$(t).parent().css("min-height",""),s=function(t,e){var o=t.parentNode;if(e.parentNode!=o)return!1;var n=t.previousSibling;for(;n&&9!==n.nodeType;){if(n===e)return!0;n=n.previousSibling}return!1}(t,e)?e:e.nextSibling,a=n.children(),r=a.length;if(!o.options.animation)return e.parentNode.insertBefore(t,s),void l.Utils.checkDisplay(o.element.parent());n.css("min-height",n.height()),a.stop().each(function(){var t=l.$(this),e=t.position();e.width=t.width(),t.data("offset-before",e)}),e.parentNode.insertBefore(t,s),l.Utils.checkDisplay(o.element.parent()),(a=n.children().each(function(){var t=l.$(this);t.data("offset-after",t.position())}).each(function(){var t=l.$(this),e=t.data("offset-before");t.css({position:"absolute",top:e.top,left:e.left,minWidth:e.width})})).each(function(){var t=l.$(this),e=(t.data("offset-before"),t.data("offset-after"));t.css("pointer-events","none").width(),setTimeout(function(){t.animate({top:e.top,left:e.left},o.options.animation,function(){t.css({position:"",top:"",left:"",minWidth:"","pointer-events":""}).removeClass(o.options.overClass).removeData("child-dragenter"),--r||(n.css("min-height",""),l.Utils.checkDisplay(o.element.parent()))})},0)})},serialize:function(){var a,r,i=[];return this.element.children().each(function(t,e){a={};for(var o,n,s=0;s<e.attributes.length;s++)0===(r=e.attributes[s]).name.indexOf("data-")&&(o=r.name.substr(5),n=l.Utils.str2json(r.value),a[o]=n||"false"==r.value||"0"==r.value?n:r.value);i.push(a)}),i},checkEmptyList:function(t){t=t?l.$(t):this.element,this.options.emptyClass&&t[t.children().length?"removeClass":"addClass"](this.options.emptyClass)}}),l.sortable});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvc29ydGFibGUuanMiXSwibmFtZXMiOlsiYWRkb24iLCJjb21wb25lbnQiLCJ3aW5kb3ciLCJVSWtpdDIiLCJkZWZpbmUiLCJhbWQiLCJVSSIsImRyYWdnaW5nUGxhY2Vob2xkZXIiLCJjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQiLCJjdXJyZW50bHlEcmFnZ2luZ1RhcmdldCIsIm1vdmluZyIsImRlbGF5SWRsZSIsInRvdWNoZWRsaXN0cyIsIm1vdmVkIiwib3ZlckVsZW1lbnQiLCJzdGFydEV2ZW50Iiwic3VwcG9ydHNUb3VjaCIsIkRvY3VtZW50VG91Y2giLCJkb2N1bWVudCIsIlBPSU5URVJfRE9XTiIsIlBPSU5URVJfTU9WRSIsIlBPSU5URVJfVVAiLCJkZWZhdWx0cyIsImFuaW1hdGlvbiIsInRocmVzaG9sZCIsImNoaWxkQ2xhc3MiLCJwbGFjZWhvbGRlckNsYXNzIiwib3ZlckNsYXNzIiwiZHJhZ2dpbmdDbGFzcyIsImRyYWdNb3ZpbmdDbGFzcyIsImJhc2VDbGFzcyIsIm5vRHJhZ0NsYXNzIiwiZW1wdHlDbGFzcyIsImRyYWdDdXN0b21DbGFzcyIsImhhbmRsZUNsYXNzIiwiZ3JvdXAiLCJzdG9wIiwic3RhcnQiLCJjaGFuZ2UiLCJib290IiwicmVhZHkiLCJjb250ZXh0IiwiJCIsImVhY2giLCJlbGUiLCJ0aGlzIiwiZGF0YSIsInNvcnRhYmxlIiwiVXRpbHMiLCJvcHRpb25zIiwiYXR0ciIsIiRodG1sIiwib24iLCJlIiwic3JjIiwib3JpZ2luYWxFdmVudCIsInRhcmdldFRvdWNoZXMiLCJNYXRoIiwiYWJzIiwicGFnZVgiLCJwb3MiLCJ4IiwicGFnZVkiLCJ5IiwiYXBwbHkiLCJzaG93IiwiJGN1cnJlbnQiLCJhZGRDbGFzcyIsIiRzb3J0YWJsZSIsImVsZW1lbnQiLCJjaGlsZHJlbiIsIm9mZnNldCIsImV2IiwidG91Y2hlcyIsImxlZnQiLCJwYXJzZUludCIsInRvcCIsImNzcyIsImhlaWdodCIsImJvZHkiLCJvZmZzZXRIZWlnaHQiLCIkd2luIiwic2Nyb2xsVG9wIiwiY2VpbCIsImlubmVySGVpZ2h0IiwicGFyZW50IiwibGVuZ3RoIiwiY2xvc2VzdFNvcnRhYmxlIiwidHlwZSIsImRyYWdEcm9wIiwiZHJhZ0VuZCIsImluaXQiLCIkdGhpcyIsImNoZWNrRW1wdHlMaXN0IiwidWlkIiwiaGFuZGxlRHJhZ1N0YXJ0IiwiZGVsZWdhdGUiLCIkdGFyZ2V0IiwidGFyZ2V0IiwiJGxpbmsiLCJpcyIsInBhcmVudHMiLCJoYXNDbGFzcyIsImNsb3Nlc3QiLCJwcmV2ZW50RGVmYXVsdCIsIm9uZSIsInRyaWdnZXIiLCJ0cmltIiwibG9jYXRpb24iLCJocmVmIiwiZHJhZ1N0YXJ0IiwiaGFuZGxlRHJhZ0VudGVyIiwiZGVib3VuY2UiLCJkcmFnRW50ZXIiLCJoYW5kbGVEcmFnTGVhdmUiLCJwcmV2aW91c0NvdW50ZXIiLCJkcmFnZW50ZXJEYXRhIiwicmVtb3ZlQ2xhc3MiLCJoYW5kbGVUb3VjaE1vdmUiLCJtb3ZlRWxlbWVudE5leHRUbyIsInN0b3BQcm9wYWdhdGlvbiIsInJldHVyblZhbHVlIiwicHJldmVudCIsImZuIiwidG91Y2giLCJlbGVtZW50RnJvbVBvaW50Iiwic2Nyb2xsTGVmdCIsImNoaWxkIiwiY3VyIiwicGFyZW50Tm9kZSIsIm93bmVyRG9jdW1lbnQiLCJub2RlVHlwZSIsIm1vdmVVcFRvQ2hpbGROb2RlIiwiYWRkRHJhZ0hhbmRsZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZURyYWdIYW5kbGVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkcmFnTW92ZSIsImVsZW0iLCJidXR0b24iLCJyZW1vdmUiLCJldnQiLCJqb2luIiwiZGlzcGxheSIsIndpZHRoIiwicGFkZGluZyIsIm1vdXNlLW9mZnNldCIsIm9yaWdpbiIsImluZGV4IiwiYXBwZW5kIiwiaHRtbCIsImFwcGVuZFRvIiwic3RhcnQtbGlzdCIsInN0YXJ0LWluZGV4Iiwic29ydGFibGUtZ3JvdXAiLCJvdmVyQ2hpbGQiLCJvdmVyUm9vdCIsImRvY3VtZW50RWxlbWVudCIsImdyb3VwT3ZlciIsImN1cnJlbnRSb290IiwiZ3JvdXBDdXJyZW50IiwidW5kZWZpbmVkIiwicHVzaCIsImJlZm9yZSIsIiRkb2MiLCJjdXJyZW50bGlzdCIsInN0YXJ0bGlzdCIsImZvckVhY2giLCJlbCIsImkiLCJ0cmlnZ2VyQ2hhbmdlRXZlbnRzIiwib2xkUm9vdCIsIm5ld1Jvb3QiLCJ0cmlnZ2VycyIsIm1vZGUiLCJ2YWwiLCJhcmd1bWVudHMiLCJtYXgiLCJyZW1vdmVEYXRhIiwiZWxlbWVudFRvTW92ZU5leHRUbyIsImxpc3QiLCJuZXh0IiwiZWwxIiwiZWwyIiwicHJldmlvdXNTaWJsaW5nIiwiaXNCZWxvdyIsIm5leHRTaWJsaW5nIiwiY291bnQiLCJpbnNlcnRCZWZvcmUiLCJjaGVja0Rpc3BsYXkiLCJwb3NpdGlvbiIsIm1pbldpZHRoIiwic2V0VGltZW91dCIsImFuaW1hdGUiLCJwb2ludGVyLWV2ZW50cyIsInNlcmlhbGl6ZSIsIml0ZW0iLCJhdHRyaWJ1dGUiLCJqIiwiYXR0cmlidXRlcyIsIm5hbWUiLCJpbmRleE9mIiwic3Vic3RyIiwic3RyMmpzb24iLCJ2YWx1ZSJdLCJtYXBwaW5ncyI6IkNBSUEsU0FBVUEsR0FFTixJQUFJQyxFQUVBQyxPQUFPQyxTQUNQRixFQUFZRCxFQUFNRyxTQUdELG1CQUFWQyxRQUF3QkEsT0FBT0MsS0FDdENELE9BQU8saUJBQWtCLENBQUMsU0FBVSxXQUNoQyxPQUFPSCxHQUFhRCxFQUFNRyxVQVZ0QyxDQWNHLFNBQVNHLEdBRVIsYUFFQSxJQUNJQyxFQUFxQkMsRUFBMEJDLEVBQW1DQyxFQUFxQkMsRUFBV0MsRUFBY0MsRUFBT0MsRUFBYUMsRUFEcEpDLEVBQXVCLGlCQUFrQmQsUUFBVSxjQUFlQSxRQUFZQSxPQUFPZSxlQUFpQkMsb0JBQW9CRCxjQUcxSEUsRUFBZUgsRUFBaUIsY0FBZWQsT0FBUyxjQUFjLGFBQWdCLFlBQ3RGa0IsRUFBZUosRUFBaUIsY0FBZWQsT0FBUyxjQUFjLFlBQWUsWUFDckZtQixF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QUUwSSxHQUFRdkksS0FBS3dCLFFBRTdCeEIsS0FBS0ksUUFBUWpCLFlBQ2JvSixFQUFNQSxFQUFLOUcsV0FBV2dCLE9BQW9CLGNBQVgsWUFBMEJ6QyxLQUFLSSxRQUFRakIsZUFzRDNFMUIsRUFBR3lDIiwiZmlsZSI6ImNvbXBvbmVudHMvc29ydGFibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgVUlraXQgMi4yNy4yIHwgaHR0cDovL3d3dy5nZXR1aWtpdC5jb20gfCAoYykgMjAxNCBZT090aGVtZSB8IE1JVCBMaWNlbnNlICovXHJcbi8qXHJcbiAgKiBCYXNlZCBvbiBuYXRpdmVzb3J0YWJsZSAtIENvcHlyaWdodCAoYykgQnJpYW4gR3JpbnN0ZWFkIC0gaHR0cHM6Ly9naXRodWIuY29tL2Jncmlucy9uYXRpdmVzb3J0YWJsZVxyXG4gICovXHJcbihmdW5jdGlvbihhZGRvbikge1xyXG5cclxuICAgIHZhciBjb21wb25lbnQ7XHJcblxyXG4gICAgaWYgKHdpbmRvdy5VSWtpdDIpIHtcclxuICAgICAgICBjb21wb25lbnQgPSBhZGRvbihVSWtpdDIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIGRlZmluZSgndWlraXQtc29ydGFibGUnLCBbJ3Vpa2l0J10sIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQgfHwgYWRkb24oVUlraXQyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn0pKGZ1bmN0aW9uKFVJKXtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgc3VwcG9ydHNUb3VjaCAgICAgICA9ICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgfHwgJ01TR2VzdHVyZScgaW4gd2luZG93KSB8fCAod2luZG93LkRvY3VtZW50VG91Y2ggJiYgZG9jdW1lbnQgaW5zdGFuY2VvZiBEb2N1bWVudFRvdWNoKSxcclxuICAgICAgICBkcmFnZ2luZ1BsYWNlaG9sZGVyLCBjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQsIGN1cnJlbnRseURyYWdnaW5nVGFyZ2V0LCBkcmFnZ2luZywgbW92aW5nLCBjbGlja2VkbGluaywgZGVsYXlJZGxlLCB0b3VjaGVkbGlzdHMsIG1vdmVkLCBvdmVyRWxlbWVudCwgc3RhcnRFdmVudDtcclxuXHJcbiAgICB2YXIgUE9JTlRFUl9ET1dOID0gc3VwcG9ydHNUb3VjaCA/ICgnTVNHZXN0dXJlJyBpbiB3aW5kb3cgPyAncG9pbnRlcmRvd24nOid0b3VjaHN0YXJ0JykgOiAnbW91c2Vkb3duJyxcclxuICAgICAgICBQT0lOVEVSX01PVkUgPSBzdXBwb3J0c1RvdWNoID8gKCdNU0dlc3R1cmUnIGluIHdpbmRvdyA/ICdwb2ludGVybW92ZSc6J3RvdWNobW92ZScpIDogJ21vdXNlbW92ZScsXHJcbiAgICAgICAgUE9JTlRFUl9VUCAgID0gc3VwcG9ydHNUb3VjaCA/ICgnTVNHZXN0dXJlJyBpbiB3aW5kb3cgPyAncG9pbnRlcnVwJzondG91Y2hlbmQnKSA6ICdtb3VzZXVwJztcclxuXHJcbiAgICBmdW5jdGlvbiBjbG9zZXN0U29ydGFibGUoZWxlKSB7XHJcblxyXG4gICAgICAgIGVsZSA9IFVJLiQoZWxlKTtcclxuXHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICBpZiAoZWxlLmRhdGEoJ3NvcnRhYmxlJykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxlID0gVUkuJChlbGUpLnBhcmVudCgpO1xyXG4gICAgICAgIH0gd2hpbGUoZWxlLmxlbmd0aCk7XHJcblxyXG4gICAgICAgIHJldHVybiBlbGU7XHJcbiAgICB9XHJcblxyXG4gICAgVUkuY29tcG9uZW50KCdzb3J0YWJsZScsIHtcclxuXHJcbiAgICAgICAgZGVmYXVsdHM6IHtcclxuXHJcbiAgICAgICAgICAgIGFuaW1hdGlvbiAgICAgICAgOiAxNTAsXHJcbiAgICAgICAgICAgIHRocmVzaG9sZCAgICAgICAgOiAxMCxcclxuXHJcbiAgICAgICAgICAgIGNoaWxkQ2xhc3MgICAgICAgOiAndWstc29ydGFibGUtaXRlbScsXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyQ2xhc3MgOiAndWstc29ydGFibGUtcGxhY2Vob2xkZXInLFxyXG4gICAgICAgICAgICBvdmVyQ2xhc3MgICAgICAgIDogJ3VrLXNvcnRhYmxlLW92ZXInLFxyXG4gICAgICAgICAgICBkcmFnZ2luZ0NsYXNzICAgIDogJ3VrLXNvcnRhYmxlLWRyYWdnZWQnLFxyXG4gICAgICAgICAgICBkcmFnTW92aW5nQ2xhc3MgIDogJ3VrLXNvcnRhYmxlLW1vdmluZycsXHJcbiAgICAgICAgICAgIGJhc2VDbGFzcyAgICAgICAgOiAndWstc29ydGFibGUnLFxyXG4gICAgICAgICAgICBub0RyYWdDbGFzcyAgICAgIDogJ3VrLXNvcnRhYmxlLW5vZHJhZycsXHJcbiAgICAgICAgICAgIGVtcHR5Q2xhc3MgICAgICAgOiAndWstc29ydGFibGUtZW1wdHknLFxyXG4gICAgICAgICAgICBkcmFnQ3VzdG9tQ2xhc3MgIDogJycsXHJcbiAgICAgICAgICAgIGhhbmRsZUNsYXNzICAgICAgOiBmYWxzZSxcclxuICAgICAgICAgICAgZ3JvdXAgICAgICAgICAgICA6IGZhbHNlLFxyXG5cclxuICAgICAgICAgICAgc3RvcCAgICAgICAgICAgICA6IGZ1bmN0aW9uKCkge30sXHJcbiAgICAgICAgICAgIHN0YXJ0ICAgICAgICAgICAgOiBmdW5jdGlvbigpIHt9LFxyXG4gICAgICAgICAgICBjaGFuZ2UgICAgICAgICAgIDogZnVuY3Rpb24oKSB7fVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGJvb3Q6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gYXV0byBpbml0XHJcbiAgICAgICAgICAgIFVJLnJlYWR5KGZ1bmN0aW9uKGNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBVSS4kKCdbZGF0YS11ay1zb3J0YWJsZV0nLCBjb250ZXh0KS5lYWNoKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSBVSS4kKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZighZWxlLmRhdGEoJ3NvcnRhYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVUkuc29ydGFibGUoZWxlLCBVSS5VdGlscy5vcHRpb25zKGVsZS5hdHRyKCdkYXRhLXVrLXNvcnRhYmxlJykpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBVSS4kaHRtbC5vbihQT0lOVEVSX01PVkUsIGZ1bmN0aW9uKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGVsYXlJZGxlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSBlLm9yaWdpbmFsRXZlbnQudGFyZ2V0VG91Y2hlcyA/IGUub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzWzBdIDogZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHNyYy5wYWdlWCAtIGRlbGF5SWRsZS5wb3MueCkgPiBkZWxheUlkbGUudGhyZXNob2xkIHx8IE1hdGguYWJzKHNyYy5wYWdlWSAtIGRlbGF5SWRsZS5wb3MueSkgPiBkZWxheUlkbGUudGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5SWRsZS5hcHBseShzcmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZHJhZ2dpbmdQbGFjZWhvbGRlcikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1vdmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZ1BsYWNlaG9sZGVyLnNob3coKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nUGxhY2Vob2xkZXIuJGN1cnJlbnQuYWRkQ2xhc3MoZHJhZ2dpbmdQbGFjZWhvbGRlci4kc29ydGFibGUub3B0aW9ucy5wbGFjZWhvbGRlckNsYXNzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdQbGFjZWhvbGRlci4kc29ydGFibGUuZWxlbWVudC5jaGlsZHJlbigpLmFkZENsYXNzKGRyYWdnaW5nUGxhY2Vob2xkZXIuJHNvcnRhYmxlLm9wdGlvbnMuY2hpbGRDbGFzcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBVSS4kaHRtbC5hZGRDbGFzcyhkcmFnZ2luZ1BsYWNlaG9sZGVyLiRzb3J0YWJsZS5vcHRpb25zLmRyYWdNb3ZpbmdDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gZHJhZ2dpbmdQbGFjZWhvbGRlci5kYXRhKCdtb3VzZS1vZmZzZXQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXYgICAgID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXMgJiYgZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0gfHwgZS5vcmlnaW5hbEV2ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ICAgPSBwYXJzZUludChldi5wYWdlWCwgMTApICsgb2Zmc2V0LmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCAgICA9IHBhcnNlSW50KGV2LnBhZ2VZLCAxMCkgKyBvZmZzZXQudG9wO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZ1BsYWNlaG9sZGVyLmNzcyh7bGVmdDogbGVmdCwgdG9wOiB0b3AgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkanVzdCBkb2N1bWVudCBzY3JvbGxpbmdcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvcCArIChkcmFnZ2luZ1BsYWNlaG9sZGVyLmhlaWdodCgpLzMpID4gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvcCA8IFVJLiR3aW4uc2Nyb2xsVG9wKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVUkuJHdpbi5zY3JvbGxUb3AoVUkuJHdpbi5zY3JvbGxUb3AoKSAtIE1hdGguY2VpbChkcmFnZ2luZ1BsYWNlaG9sZGVyLmhlaWdodCgpLzMpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCAodG9wICsgKGRyYWdnaW5nUGxhY2Vob2xkZXIuaGVpZ2h0KCkvMykpID4gKHdpbmRvdy5pbm5lckhlaWdodCArIFVJLiR3aW4uc2Nyb2xsVG9wKCkpICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBVSS4kd2luLnNjcm9sbFRvcChVSS4kd2luLnNjcm9sbFRvcCgpICsgTWF0aC5jZWlsKGRyYWdnaW5nUGxhY2Vob2xkZXIuaGVpZ2h0KCkvMykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBVSS4kaHRtbC5vbihQT0lOVEVSX1VQLCBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgZGVsYXlJZGxlID0gY2xpY2tlZGxpbmsgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBkcmFnZ2luZz9cclxuICAgICAgICAgICAgICAgIGlmICghY3VycmVudGx5RHJhZ2dpbmdFbGVtZW50IHx8ICFkcmFnZ2luZ1BsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29tcGxldGVseSByZXNldCBkcmFnZ2luZyBhdHRlbXB0LiB3aWxsIGNhdXNlIHdlaXJkIGRlbGF5IGJlaGF2aW9yIGVsc2V3aXNlXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5RHJhZ2dpbmdFbGVtZW50ID0gZHJhZ2dpbmdQbGFjZWhvbGRlciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGluc2lkZSBvciBvdXRzaWRlIG9mIHNvcnRhYmxlP1xyXG4gICAgICAgICAgICAgICAgdmFyIHNvcnRhYmxlICA9IGNsb3Nlc3RTb3J0YWJsZShjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudCA9IGRyYWdnaW5nUGxhY2Vob2xkZXIuJHNvcnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgICAgIGV2ICAgICAgICA9IHsgdHlwZTogZS50eXBlIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNvcnRhYmxlWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LmRyYWdEcm9wKGV2LCBjb21wb25lbnQuZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuZHJhZ0VuZChldiwgY29tcG9uZW50LmVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkdGhpcyAgID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnRbMF07XHJcblxyXG4gICAgICAgICAgICB0b3VjaGVkbGlzdHMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tFbXB0eUxpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5kYXRhKCdzb3J0YWJsZS1ncm91cCcsIHRoaXMub3B0aW9ucy5ncm91cCA/IHRoaXMub3B0aW9ucy5ncm91cCA6IFVJLlV0aWxzLnVpZCgnc29ydGFibGUtZ3JvdXAnKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaGFuZGxlRHJhZ1N0YXJ0ID0gZGVsZWdhdGUoZnVuY3Rpb24oZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlLmRhdGEgJiYgZS5kYXRhLnNvcnRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkdGFyZ2V0ID0gVUkuJChlLnRhcmdldCksXHJcbiAgICAgICAgICAgICAgICAgICAgJGxpbmsgICA9ICR0YXJnZXQuaXMoJ2FbaHJlZl0nKSA/ICR0YXJnZXQ6JHRhcmdldC5wYXJlbnRzKCdhW2hyZWZdJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCR0YXJnZXQuaXMoJzppbnB1dCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5vcHRpb25zLmhhbmRsZUNsYXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZSA9ICR0YXJnZXQuaGFzQ2xhc3MoJHRoaXMub3B0aW9ucy5oYW5kbGVDbGFzcykgPyAkdGFyZ2V0IDogJHRhcmdldC5jbG9zZXN0KCcuJyskdGhpcy5vcHRpb25zLmhhbmRsZUNsYXNzLCAkdGhpcy5lbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWhhbmRsZS5sZW5ndGgpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCRsaW5rLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkbGluay5vbmUoJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5vbmUoUE9JTlRFUl9VUCwgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbW92ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsaW5rLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VwcG9ydHNUb3VjaCAmJiAkbGluay5hdHRyKCdocmVmJykudHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9ICRsaW5rLmF0dHIoJ2hyZWYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGUuZGF0YSA9IGUuZGF0YSB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICBlLmRhdGEuc29ydGFibGUgPSBlbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiAkdGhpcy5kcmFnU3RhcnQoZSwgdGhpcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIGhhbmRsZURyYWdFbnRlciA9IGRlbGVnYXRlKFVJLlV0aWxzLmRlYm91bmNlKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkdGhpcy5kcmFnRW50ZXIoZSwgdGhpcyk7XHJcbiAgICAgICAgICAgIH0pLCA0MCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaGFuZGxlRHJhZ0xlYXZlID0gZGVsZWdhdGUoZnVuY3Rpb24oZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgZHJhZ2VudGVyIG9uIGEgY2hpbGQgZnJvbSBhbGxvd2luZyBhIGRyYWdsZWF2ZSBvbiB0aGUgY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICB2YXIgcHJldmlvdXNDb3VudGVyID0gJHRoaXMuZHJhZ2VudGVyRGF0YSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLmRyYWdlbnRlckRhdGEodGhpcywgcHJldmlvdXNDb3VudGVyIC0gMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGZpeCBmb3IgY2hpbGQgZWxlbWVudHMgZmlyaW5nIGRyYWdlbnRlciBiZWZvcmUgdGhlIHBhcmVudCBmaXJlcyBkcmFnbGVhdmVcclxuICAgICAgICAgICAgICAgIGlmICghJHRoaXMuZHJhZ2VudGVyRGF0YSh0aGlzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIFVJLiQodGhpcykucmVtb3ZlQ2xhc3MoJHRoaXMub3B0aW9ucy5vdmVyQ2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmRyYWdlbnRlckRhdGEodGhpcywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBoYW5kbGVUb3VjaE1vdmUgPSBkZWxlZ2F0ZShmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQgfHxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQgPT09IHRoaXMgfHxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlEcmFnZ2luZ1RhcmdldCA9PT0gdGhpcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcygkdGhpcy5vcHRpb25zLm92ZXJDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlEcmFnZ2luZ1RhcmdldCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgJHRoaXMubW92ZUVsZW1lbnROZXh0VG8oY3VycmVudGx5RHJhZ2dpbmdFbGVtZW50LCB0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldmVudChlKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBCaW5kL3VuYmluZCBzdGFuZGFyZCBtb3VzZS90b3VjaCBldmVudHMgYXMgYSBwb2x5ZmlsbC5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkRHJhZ0hhbmRsZXJzKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzdXBwb3J0c1RvdWNoICYmIHN0YXJ0RXZlbnQudG91Y2hlcyAmJiBzdGFydEV2ZW50LnRvdWNoZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFBPSU5URVJfTU9WRSwgaGFuZGxlVG91Y2hNb3ZlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgaGFuZGxlRHJhZ0VudGVyLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGhhbmRsZURyYWdMZWF2ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzZWxlY3RzdGFydFwiLCBwcmV2ZW50LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZURyYWdIYW5kbGVycygpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdXBwb3J0c1RvdWNoICYmIHN0YXJ0RXZlbnQudG91Y2hlcyAmJiBzdGFydEV2ZW50LnRvdWNoZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFBPSU5URVJfTU9WRSwgaGFuZGxlVG91Y2hNb3ZlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgaGFuZGxlRHJhZ0VudGVyLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGhhbmRsZURyYWdMZWF2ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzZWxlY3RzdGFydFwiLCBwcmV2ZW50LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRkRHJhZ0hhbmRsZXJzICAgID0gYWRkRHJhZ0hhbmRsZXJzO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZURyYWdIYW5kbGVycyA9IHJlbW92ZURyYWdIYW5kbGVycztcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZURyYWdNb3ZlKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRseURyYWdnaW5nRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkdGhpcy5kcmFnTW92ZShlLCAkdGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGVnYXRlKGZuKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdWNoLCB0YXJnZXQsIGNvbnRleHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0RXZlbnQgPSBlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3VjaCAgPSBlLnRvdWNoZXMgJiYgZS50b3VjaGVzWzBdIHx8IGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHRvdWNoLnRhcmdldCB8fCBlLnRhcmdldDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpeCBldmVudC50YXJnZXQgZm9yIGEgdG91Y2ggZXZlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1cHBvcnRzVG91Y2ggJiYgZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh0b3VjaC5wYWdlWCAtIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCwgdG91Y2gucGFnZVkgLSBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJFbGVtZW50ID0gVUkuJCh0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFVJLiQodGFyZ2V0KS5oYXNDbGFzcygnLicrJHRoaXMub3B0aW9ucy5jaGlsZENsYXNzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbi5hcHBseSh0YXJnZXQsIFtlXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQgIT09IGVsZW1lbnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGEgY2hpbGQgaXMgaW5pdGlhdGluZyB0aGUgZXZlbnQgb3IgZW5kaW5nIGl0LCB0aGVuIHVzZSB0aGUgY29udGFpbmVyIGFzIGNvbnRleHQgZm9yIHRoZSBjYWxsYmFjay5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCA9IG1vdmVVcFRvQ2hpbGROb2RlKGVsZW1lbnQsIHRhcmdldCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4uYXBwbHkoY29udGV4dCwgW2VdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFBPSU5URVJfTU9WRSwgaGFuZGxlRHJhZ01vdmUsIGZhbHNlKTtcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFBPSU5URVJfRE9XTiwgaGFuZGxlRHJhZ1N0YXJ0LCBmYWxzZSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZHJhZ1N0YXJ0OiBmdW5jdGlvbihlLCBlbGVtKSB7XHJcblxyXG4gICAgICAgICAgICBtb3ZlZCAgICA9IGZhbHNlO1xyXG4gICAgICAgICAgICBtb3ZpbmcgICA9IGZhbHNlO1xyXG4gICAgICAgICAgICBkcmFnZ2luZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyICR0aGlzICAgID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIHRhcmdldCAgID0gVUkuJChlLnRhcmdldCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXN1cHBvcnRzVG91Y2ggJiYgZS5idXR0b249PTIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRhcmdldC5pcygnLicrJHRoaXMub3B0aW9ucy5ub0RyYWdDbGFzcykgfHwgdGFyZ2V0LmNsb3Nlc3QoJy4nKyR0aGlzLm9wdGlvbnMubm9EcmFnQ2xhc3MpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBwcmV2ZW50IGRyYWdnaW5nIGlmIHRhZ2V0IGlzIGEgZm9ybSBmaWVsZFxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmlzKCc6aW5wdXQnKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQgPSBlbGVtO1xyXG5cclxuICAgICAgICAgICAgLy8gaW5pdCBkcmFnIHBsYWNlaG9sZGVyXHJcbiAgICAgICAgICAgIGlmIChkcmFnZ2luZ1BsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBkcmFnZ2luZ1BsYWNlaG9sZGVyLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgJGN1cnJlbnQgPSBVSS4kKGN1cnJlbnRseURyYWdnaW5nRWxlbWVudCksIG9mZnNldCA9ICRjdXJyZW50Lm9mZnNldCgpLCBldiA9IGUudG91Y2hlcyAmJiBlLnRvdWNoZXNbMF0gfHwgZTtcclxuXHJcbiAgICAgICAgICAgIGRlbGF5SWRsZSA9IHtcclxuXHJcbiAgICAgICAgICAgICAgICBwb3MgICAgICAgOiB7IHg6ZXYucGFnZVgsIHk6ZXYucGFnZVkgfSxcclxuICAgICAgICAgICAgICAgIHRocmVzaG9sZCA6ICR0aGlzLm9wdGlvbnMuaGFuZGxlQ2xhc3MgPyAxIDogJHRoaXMub3B0aW9ucy50aHJlc2hvbGQsXHJcbiAgICAgICAgICAgICAgICBhcHBseSAgICAgOiBmdW5jdGlvbihldnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdQbGFjZWhvbGRlciA9IFVJLiQoJzxkaXYgY2xhc3M9XCInKyhbJHRoaXMub3B0aW9ucy5kcmFnZ2luZ0NsYXNzLCAkdGhpcy5vcHRpb25zLmRyYWdDdXN0b21DbGFzc10uam9pbignICcpKSsnXCI+PC9kaXY+JykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheSA6ICdub25lJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wICAgICA6IG9mZnNldC50b3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgICAgOiBvZmZzZXQubGVmdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggICA6ICRjdXJyZW50LndpZHRoKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCAgOiAkY3VycmVudC5oZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZyA6ICRjdXJyZW50LmNzcygncGFkZGluZycpXHJcbiAgICAgICAgICAgICAgICAgICAgfSkuZGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdtb3VzZS1vZmZzZXQnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0IDogb2Zmc2V0LmxlZnQgLSBwYXJzZUludChldi5wYWdlWCwgMTApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wICA6IG9mZnNldC50b3AgIC0gcGFyc2VJbnQoZXYucGFnZVksIDEwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW4gOiAkdGhpcy5lbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCAgOiAkY3VycmVudC5pbmRleCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSkuYXBwZW5kKCRjdXJyZW50Lmh0bWwoKSkuYXBwZW5kVG8oJ2JvZHknKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdQbGFjZWhvbGRlci4kY3VycmVudCAgPSAkY3VycmVudDtcclxuICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZ1BsYWNlaG9sZGVyLiRzb3J0YWJsZSA9ICR0aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkY3VycmVudC5kYXRhKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXJ0LWxpc3QnOiAkY3VycmVudC5wYXJlbnQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXJ0LWluZGV4JzogJGN1cnJlbnQuaW5kZXgoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3NvcnRhYmxlLWdyb3VwJzogJHRoaXMub3B0aW9ucy5ncm91cFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5hZGREcmFnSGFuZGxlcnMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMub3B0aW9ucy5zdGFydCh0aGlzLCBjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnRyaWdnZXIoJ3N0YXJ0LnVrLnNvcnRhYmxlJywgWyR0aGlzLCBjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQsIGRyYWdnaW5nUGxhY2Vob2xkZXJdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbW92ZWQgICAgID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBkZWxheUlkbGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBkcmFnTW92ZTogZnVuY3Rpb24oZSwgZWxlbSkge1xyXG5cclxuICAgICAgICAgICAgb3ZlckVsZW1lbnQgPSBVSS4kKGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoZS5wYWdlWCAtIChkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuc2Nyb2xsTGVmdCB8fCAwKSwgZS5wYWdlWSAtIChkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IDApKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgb3ZlclJvb3QgICAgID0gb3ZlckVsZW1lbnQuY2xvc2VzdCgnLicrdGhpcy5vcHRpb25zLmJhc2VDbGFzcyksXHJcbiAgICAgICAgICAgICAgICBncm91cE92ZXIgICAgPSBvdmVyUm9vdC5kYXRhKCdzb3J0YWJsZS1ncm91cCcpLFxyXG4gICAgICAgICAgICAgICAgJGN1cnJlbnQgICAgID0gVUkuJChjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQpLFxyXG4gICAgICAgICAgICAgICAgY3VycmVudFJvb3QgID0gJGN1cnJlbnQucGFyZW50KCksXHJcbiAgICAgICAgICAgICAgICBncm91cEN1cnJlbnQgPSAkY3VycmVudC5kYXRhKCdzb3J0YWJsZS1ncm91cCcpLFxyXG4gICAgICAgICAgICAgICAgb3ZlckNoaWxkO1xyXG5cclxuICAgICAgICAgICAgaWYgKG92ZXJSb290WzBdICE9PSBjdXJyZW50Um9vdFswXSAmJiBncm91cEN1cnJlbnQgIT09IHVuZGVmaW5lZCAmJiBncm91cE92ZXIgPT09IGdyb3VwQ3VycmVudCkge1xyXG5cclxuICAgICAgICAgICAgICAgIG92ZXJSb290LmRhdGEoJ3NvcnRhYmxlJykuYWRkRHJhZ0hhbmRsZXJzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdG91Y2hlZGxpc3RzLnB1c2gob3ZlclJvb3QpO1xyXG4gICAgICAgICAgICAgICAgb3ZlclJvb3QuY2hpbGRyZW4oKS5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuY2hpbGRDbGFzcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc3dhcCByb290XHJcbiAgICAgICAgICAgICAgICBpZiAob3ZlclJvb3QuY2hpbGRyZW4oKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlckNoaWxkID0gb3ZlckVsZW1lbnQuY2xvc2VzdCgnLicrdGhpcy5vcHRpb25zLmNoaWxkQ2xhc3MpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3ZlckNoaWxkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyQ2hpbGQuYmVmb3JlKCRjdXJyZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyUm9vdC5hcHBlbmQoJGN1cnJlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBlbXB0eSBsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlckVsZW1lbnQuYXBwZW5kKCRjdXJyZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBVSS4kZG9jLnRyaWdnZXIoJ21vdXNlb3ZlcicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrRW1wdHlMaXN0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tFbXB0eUxpc3QoY3VycmVudFJvb3QpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGRyYWdFbnRlcjogZnVuY3Rpb24oZSwgZWxlbSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQgfHwgY3VycmVudGx5RHJhZ2dpbmdFbGVtZW50ID09PSBlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHByZXZpb3VzQ291bnRlciA9IHRoaXMuZHJhZ2VudGVyRGF0YShlbGVtKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ2VudGVyRGF0YShlbGVtLCBwcmV2aW91c0NvdW50ZXIgKyAxKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFByZXZlbnQgZHJhZ2VudGVyIG9uIGEgY2hpbGQgZnJvbSBhbGxvd2luZyBhIGRyYWdsZWF2ZSBvbiB0aGUgY29udGFpbmVyXHJcbiAgICAgICAgICAgIGlmIChwcmV2aW91c0NvdW50ZXIgPT09IDApIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudGxpc3QgPSBVSS4kKGVsZW0pLnBhcmVudCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0bGlzdCAgID0gVUkuJChjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQpLmRhdGEoJ3N0YXJ0LWxpc3QnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudGxpc3RbMF0gIT09IHN0YXJ0bGlzdFswXSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXBPdmVyICAgID0gY3VycmVudGxpc3QuZGF0YSgnc29ydGFibGUtZ3JvdXAnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBDdXJyZW50ID0gVUkuJChjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQpLmRhdGEoJ3NvcnRhYmxlLWdyb3VwJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoZ3JvdXBPdmVyIHx8ICBncm91cEN1cnJlbnQpICYmIChncm91cE92ZXIgIT0gZ3JvdXBDdXJyZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIFVJLiQoZWxlbSkuYWRkQ2xhc3ModGhpcy5vcHRpb25zLm92ZXJDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVFbGVtZW50TmV4dFRvKGN1cnJlbnRseURyYWdnaW5nRWxlbWVudCwgZWxlbSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBkcmFnRW5kOiBmdW5jdGlvbihlLCBlbGVtKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgLy8gYXZvaWQgdHJpZ2dlcmluZyBldmVudCB0d2ljZVxyXG4gICAgICAgICAgICBpZiAoY3VycmVudGx5RHJhZ2dpbmdFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiB0cmlnZ2VyIG9uIHJpZ2h0IGVsZW1lbnQ/XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuc3RvcChlbGVtKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignc3RvcC51ay5zb3J0YWJsZScsIFt0aGlzXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGN1cnJlbnRseURyYWdnaW5nRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgICAgIGN1cnJlbnRseURyYWdnaW5nVGFyZ2V0ICA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB0b3VjaGVkbGlzdHMucHVzaCh0aGlzLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICB0b3VjaGVkbGlzdHMuZm9yRWFjaChmdW5jdGlvbihlbCwgaSkge1xyXG4gICAgICAgICAgICAgICAgVUkuJChlbCkuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5vZGVUeXBlID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFVJLiQodGhpcykucmVtb3ZlQ2xhc3MoJHRoaXMub3B0aW9ucy5vdmVyQ2xhc3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlckNsYXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCR0aGlzLm9wdGlvbnMuY2hpbGRDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmRyYWdlbnRlckRhdGEodGhpcywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRvdWNoZWRsaXN0cyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgVUkuJGh0bWwucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmRyYWdNb3ZpbmdDbGFzcyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZURyYWdIYW5kbGVycygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRyYWdnaW5nUGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgICAgIGRyYWdnaW5nUGxhY2Vob2xkZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBkcmFnZ2luZ1BsYWNlaG9sZGVyID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGRyYWdEcm9wOiBmdW5jdGlvbihlLCBlbGVtKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSAnZHJvcCcpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZS5zdG9wUHJvcGFnYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJDaGFuZ2VFdmVudHMoKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICB0cmlnZ2VyQ2hhbmdlRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgZXZlbnRzIG9uY2VcclxuICAgICAgICAgICAgaWYgKCFjdXJyZW50bHlEcmFnZ2luZ0VsZW1lbnQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHZhciAkY3VycmVudCA9IFVJLiQoY3VycmVudGx5RHJhZ2dpbmdFbGVtZW50KSxcclxuICAgICAgICAgICAgICAgIG9sZFJvb3QgID0gZHJhZ2dpbmdQbGFjZWhvbGRlci5kYXRhKCdvcmlnaW4nKSxcclxuICAgICAgICAgICAgICAgIG5ld1Jvb3QgID0gJGN1cnJlbnQuY2xvc2VzdCgnLicrdGhpcy5vcHRpb25zLmJhc2VDbGFzcyksXHJcbiAgICAgICAgICAgICAgICB0cmlnZ2VycyA9IFtdLFxyXG4gICAgICAgICAgICAgICAgZWwgICAgICAgPSBVSS4kKGN1cnJlbnRseURyYWdnaW5nRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAvLyBldmVudHMgZGVwZW5kaW5nIG9uIG1vdmUgaW5zaWRlIGxpc3RzIG9yIGFjcm9zcyBsaXN0c1xyXG4gICAgICAgICAgICBpZiAob2xkUm9vdFswXSA9PT0gbmV3Um9vdFswXSAmJiBkcmFnZ2luZ1BsYWNlaG9sZGVyLmRhdGEoJ2luZGV4JykgIT0gJGN1cnJlbnQuaW5kZXgoKSApIHtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXJzLnB1c2goe3NvcnRhYmxlOiB0aGlzLCBtb2RlOiAnbW92ZWQnfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob2xkUm9vdFswXSAhPSBuZXdSb290WzBdKSB7XHJcbiAgICAgICAgICAgICAgICB0cmlnZ2Vycy5wdXNoKHtzb3J0YWJsZTogVUkuJChuZXdSb290KS5kYXRhKCdzb3J0YWJsZScpLCBtb2RlOiAnYWRkZWQnfSwge3NvcnRhYmxlOiBVSS4kKG9sZFJvb3QpLmRhdGEoJ3NvcnRhYmxlJyksIG1vZGU6ICdyZW1vdmVkJ30pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0cmlnZ2Vycy5mb3JFYWNoKGZ1bmN0aW9uICh0cmlnZ2VyLCBpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHJpZ2dlci5zb3J0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXIuc29ydGFibGUuZWxlbWVudC50cmlnZ2VyKCdjaGFuZ2UudWsuc29ydGFibGUnLCBbdHJpZ2dlci5zb3J0YWJsZSwgZWwsIHRyaWdnZXIubW9kZV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBkcmFnZW50ZXJEYXRhOiBmdW5jdGlvbihlbGVtZW50LCB2YWwpIHtcclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBVSS4kKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGVsZW1lbnQuZGF0YSgnY2hpbGQtZHJhZ2VudGVyJyksIDEwKSB8fCAwO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF2YWwpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRGF0YSgnY2hpbGQtZHJhZ2VudGVyJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGEoJ2NoaWxkLWRyYWdlbnRlcicsIE1hdGgubWF4KDAsIHZhbCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbW92ZUVsZW1lbnROZXh0VG86IGZ1bmN0aW9uKGVsZW1lbnQsIGVsZW1lbnRUb01vdmVOZXh0VG8pIHtcclxuXHJcbiAgICAgICAgICAgIGRyYWdnaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciAkdGhpcyAgICA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBsaXN0ICAgICA9IFVJLiQoZWxlbWVudCkucGFyZW50KCkuY3NzKCdtaW4taGVpZ2h0JywgJycpLFxyXG4gICAgICAgICAgICAgICAgbmV4dCAgICAgPSBpc0JlbG93KGVsZW1lbnQsIGVsZW1lbnRUb01vdmVOZXh0VG8pID8gZWxlbWVudFRvTW92ZU5leHRUbyA6IGVsZW1lbnRUb01vdmVOZXh0VG8ubmV4dFNpYmxpbmcsXHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbiA9IGxpc3QuY2hpbGRyZW4oKSxcclxuICAgICAgICAgICAgICAgIGNvdW50ICAgID0gY2hpbGRyZW4ubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgaWYgKCEkdGhpcy5vcHRpb25zLmFuaW1hdGlvbikge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudFRvTW92ZU5leHRUby5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbGVtZW50LCBuZXh0KTtcclxuICAgICAgICAgICAgICAgIFVJLlV0aWxzLmNoZWNrRGlzcGxheSgkdGhpcy5lbGVtZW50LnBhcmVudCgpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGlzdC5jc3MoJ21pbi1oZWlnaHQnLCBsaXN0LmhlaWdodCgpKTtcclxuXHJcbiAgICAgICAgICAgIGNoaWxkcmVuLnN0b3AoKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gVUkuJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBlbGUucG9zaXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0LndpZHRoID0gZWxlLndpZHRoKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZWxlLmRhdGEoJ29mZnNldC1iZWZvcmUnLCBvZmZzZXQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnRUb01vdmVOZXh0VG8ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWxlbWVudCwgbmV4dCk7XHJcblxyXG4gICAgICAgICAgICBVSS5VdGlscy5jaGVja0Rpc3BsYXkoJHRoaXMuZWxlbWVudC5wYXJlbnQoKSk7XHJcblxyXG4gICAgICAgICAgICBjaGlsZHJlbiA9IGxpc3QuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZSAgICA9IFVJLiQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBlbGUuZGF0YSgnb2Zmc2V0LWFmdGVyJywgZWxlLnBvc2l0aW9uKCkpO1xyXG4gICAgICAgICAgICB9KS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZSAgICA9IFVJLiQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlID0gZWxlLmRhdGEoJ29mZnNldC1iZWZvcmUnKTtcclxuICAgICAgICAgICAgICAgIGVsZS5jc3Moe3Bvc2l0aW9uOidhYnNvbHV0ZScsIHRvcDpiZWZvcmUudG9wLCBsZWZ0OmJlZm9yZS5sZWZ0LCBtaW5XaWR0aDpiZWZvcmUud2lkdGggfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY2hpbGRyZW4uZWFjaChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBlbGUgICAgPSBVSS4kKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZSA9IGVsZS5kYXRhKCdvZmZzZXQtYmVmb3JlJyksXHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gZWxlLmRhdGEoJ29mZnNldC1hZnRlcicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbGUuY3NzKCdwb2ludGVyLWV2ZW50cycsICdub25lJykud2lkdGgoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUuYW5pbWF0ZSh7J3RvcCc6b2Zmc2V0LnRvcCwgJ2xlZnQnOm9mZnNldC5sZWZ0fSwgJHRoaXMub3B0aW9ucy5hbmltYXRpb24sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlLmNzcyh7cG9zaXRpb246JycsdG9wOicnLCBsZWZ0OicnLCBtaW5XaWR0aDogJycsICdwb2ludGVyLWV2ZW50cyc6Jyd9KS5yZW1vdmVDbGFzcygkdGhpcy5vcHRpb25zLm92ZXJDbGFzcykucmVtb3ZlRGF0YSgnY2hpbGQtZHJhZ2VudGVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudC0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QuY3NzKCdtaW4taGVpZ2h0JywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVJLlV0aWxzLmNoZWNrRGlzcGxheSgkdGhpcy5lbGVtZW50LnBhcmVudCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IFtdLCBpdGVtLCBhdHRyaWJ1dGU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKGosIGNoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtID0ge307XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgYXR0ciwgdmFsOyBpIDwgY2hpbGQuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSA9IGNoaWxkLmF0dHJpYnV0ZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5uYW1lLmluZGV4T2YoJ2RhdGEtJykgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0ciAgICAgICA9IGF0dHJpYnV0ZS5uYW1lLnN1YnN0cig1KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsICAgICAgICA9ICBVSS5VdGlscy5zdHIyanNvbihhdHRyaWJ1dGUudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtW2F0dHJdID0gKHZhbCB8fCBhdHRyaWJ1dGUudmFsdWU9PSdmYWxzZScgfHwgYXR0cmlidXRlLnZhbHVlPT0nMCcpID8gdmFsOmF0dHJpYnV0ZS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkYXRhLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY2hlY2tFbXB0eUxpc3Q6IGZ1bmN0aW9uKGxpc3QpIHtcclxuXHJcbiAgICAgICAgICAgIGxpc3QgID0gbGlzdCA/IFVJLiQobGlzdCkgOiB0aGlzLmVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVtcHR5Q2xhc3MpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RbIWxpc3QuY2hpbGRyZW4oKS5sZW5ndGggPyAnYWRkQ2xhc3MnOidyZW1vdmVDbGFzcyddKHRoaXMub3B0aW9ucy5lbXB0eUNsYXNzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGhlbHBlcnNcclxuXHJcbiAgICBmdW5jdGlvbiBpc0JlbG93KGVsMSwgZWwyKSB7XHJcblxyXG4gICAgICAgIHZhciBwYXJlbnQgPSBlbDEucGFyZW50Tm9kZTtcclxuXHJcbiAgICAgICAgaWYgKGVsMi5wYXJlbnROb2RlICE9IHBhcmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgY3VyID0gZWwxLnByZXZpb3VzU2libGluZztcclxuXHJcbiAgICAgICAgd2hpbGUgKGN1ciAmJiBjdXIubm9kZVR5cGUgIT09IDkpIHtcclxuICAgICAgICAgICAgaWYgKGN1ciA9PT0gZWwyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXIgPSBjdXIucHJldmlvdXNTaWJsaW5nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1vdmVVcFRvQ2hpbGROb2RlKHBhcmVudCwgY2hpbGQpIHtcclxuICAgICAgICB2YXIgY3VyID0gY2hpbGQ7XHJcbiAgICAgICAgaWYgKGN1ciA9PSBwYXJlbnQpIHsgcmV0dXJuIG51bGw7IH1cclxuXHJcbiAgICAgICAgd2hpbGUgKGN1cikge1xyXG4gICAgICAgICAgICBpZiAoY3VyLnBhcmVudE5vZGUgPT09IHBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY3VyID0gY3VyLnBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgIGlmICggIWN1ciB8fCAhY3VyLm93bmVyRG9jdW1lbnQgfHwgY3VyLm5vZGVUeXBlID09PSAxMSApIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHByZXZlbnQoZSkge1xyXG4gICAgICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbikge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gVUkuc29ydGFibGU7XHJcbn0pOyJdfQ==
