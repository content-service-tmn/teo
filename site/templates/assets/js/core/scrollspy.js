!function(p){"use strict";var f=p.$win,t=p.$doc,s=[],o=function(){for(var t=0;t<s.length;t++)window.requestAnimationFrame.apply(window,[s[t].check])};p.component("scrollspy",{defaults:{target:!1,cls:"uk-scrollspy-inview",initcls:"uk-scrollspy-init-inview",topoffset:0,leftoffset:0,repeat:!1,delay:0},boot:function(){t.on("scrolling.uk.document",o),f.on("load resize orientationchange",p.Utils.debounce(o,50)),p.ready(function(t){p.$("[data-uk-scrollspy]",t).each(function(){var t=p.$(this);if(!t.data("scrollspy"))p.scrollspy(t,p.Utils.options(t.attr("data-uk-scrollspy")))})})},init:function(){var a,r=this,c=this.options.cls.split(/,/),t=function(){var t=r.options.target?r.element.find(r.options.target):r.element,l=1===t.length?1:0,n=0;t.each(function(t){var s=p.$(this),o=s.data("inviewstate"),i=p.Utils.isInView(s,r.options),e=s.data("ukScrollspyCls")||c[n].trim();!i||o||s.data("scrollspy-idle")||(a||(s.addClass(r.options.initcls),r.offset=s.offset(),a=!0,s.trigger("init.uk.scrollspy")),s.data("scrollspy-idle",setTimeout(function(){s.addClass("uk-scrollspy-inview").toggleClass(e).width(),s.trigger("inview.uk.scrollspy"),s.data("scrollspy-idle",!1),s.data("inviewstate",!0)},r.options.delay*l)),l++),!i&&o&&r.options.repeat&&(s.data("scrollspy-idle")&&(clearTimeout(s.data("scrollspy-idle")),s.data("scrollspy-idle",!1)),s.removeClass("uk-scrollspy-inview").toggleClass(e),s.data("inviewstate",!1),s.trigger("outview.uk.scrollspy")),n=c[n+1]?n+1:0})};t(),this.check=t,s.push(this)}});var i=[],e=function(){for(var t=0;t<i.length;t++)window.requestAnimationFrame.apply(window,[i[t].check])};p.component("scrollspynav",{defaults:{cls:"uk-active",closest:!1,topoffset:0,leftoffset:0,smoothscroll:!1},boot:function(){t.on("scrolling.uk.document",e),f.on("resize orientationchange",p.Utils.debounce(e,50)),p.ready(function(t){p.$("[data-uk-scrollspy-nav]",t).each(function(){var t=p.$(this);if(!t.data("scrollspynav"))p.scrollspynav(t,p.Utils.options(t.attr("data-uk-scrollspy-nav")))})})},init:function(){var e,t=[],l=this.find("a[href^='#']").each(function(){"#"!==this.getAttribute("href").trim()&&t.push(this.getAttribute("href"))}),n=p.$(t.join(",")),a=this.options.cls,r=this.options.closest||this.options.closest,c=this,s=function(){e=[];for(var t=0;t<n.length;t++)p.Utils.isInView(n.eq(t),c.options)&&e.push(n.eq(t));if(e.length){var s,o=f.scrollTop(),i=function(){for(var t=0;t<e.length;t++)if(e[t].offset().top-c.options.topoffset>=o)return e[t]}();if(!i)return;c.options.closest?(l.blur().closest(r).removeClass(a),s=l.filter("a[href='#"+i.attr("id")+"']").closest(r).addClass(a)):s=l.removeClass(a).filter("a[href='#"+i.attr("id")+"']").addClass(a),c.element.trigger("inview.uk.scrollspynav",[i,s])}};this.options.smoothscroll&&p.smoothScroll&&l.each(function(){p.smoothScroll(this,c.options.smoothscroll)}),s(),this.element.data("scrollspynav",this),this.check=s,i.push(this)}})}(UIkit2);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvc2Nyb2xsc3B5LmpzIl0sIm5hbWVzIjpbIlVJIiwiJHdpbiIsIiRkb2MiLCJzY3JvbGxzcGllcyIsImNoZWNrU2Nyb2xsU3B5IiwiaSIsImxlbmd0aCIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImFwcGx5IiwiY2hlY2siLCJjb21wb25lbnQiLCJkZWZhdWx0cyIsInRhcmdldCIsImNscyIsImluaXRjbHMiLCJ0b3BvZmZzZXQiLCJsZWZ0b2Zmc2V0IiwicmVwZWF0IiwiZGVsYXkiLCJib290Iiwib24iLCJVdGlscyIsImRlYm91bmNlIiwicmVhZHkiLCJjb250ZXh0IiwiJCIsImVhY2giLCJlbGVtZW50IiwidGhpcyIsImRhdGEiLCJzY3JvbGxzcHkiLCJvcHRpb25zIiwiYXR0ciIsImluaXQiLCJpbml0aW52aWV3IiwiJHRoaXMiLCJ0b2dnbGVjbHMiLCJzcGxpdCIsImZuIiwiZWxlbWVudHMiLCJmaW5kIiwiZGVsYXlJZHgiLCJ0b2dnbGVjbHNJZHgiLCJpZHgiLCJpbnZpZXdzdGF0ZSIsImludmlldyIsImlzSW5WaWV3IiwidG9nZ2xlIiwidHJpbSIsImFkZENsYXNzIiwib2Zmc2V0IiwidHJpZ2dlciIsInNldFRpbWVvdXQiLCJ0b2dnbGVDbGFzcyIsIndpZHRoIiwiY2xlYXJUaW1lb3V0IiwicmVtb3ZlQ2xhc3MiLCJwdXNoIiwic2Nyb2xsc3B5bmF2cyIsImNoZWNrU2Nyb2xsU3B5TmF2cyIsImNsb3Nlc3QiLCJzbW9vdGhzY3JvbGwiLCJzY3JvbGxzcHluYXYiLCJpbnZpZXdzIiwiaWRzIiwibGlua3MiLCJnZXRBdHRyaWJ1dGUiLCJ0YXJnZXRzIiwiam9pbiIsImNsc0FjdGl2ZSIsImNsc0Nsb3Nlc3QiLCJlcSIsIm5hdml0ZW1zIiwic2Nyb2xsVG9wIiwidG9wIiwiYmx1ciIsImZpbHRlciIsInNtb290aFNjcm9sbCIsIlVJa2l0MiJdLCJtYXBwaW5ncyI6IkNBQ0EsU0FBVUEsR0FFTixhQUVBLElBQUlDLEVBQWlC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QVlhLEdBQzdDRyxFQUFXUCxFQUFNVyxPQUFPLFlBQVloRSxFQUFPb0IsS0FBSyxNQUFNLE1BQU00QixRQUFRVSxHQUFZckIsU0FBU29CLElBRXpGRyxFQUFXUCxFQUFNVCxZQUFZYSxHQUFXTyxPQUFPLFlBQVloRSxFQUFPb0IsS0FBSyxNQUFNLE1BQU1pQixTQUFTb0IsR0FHaEdsQyxFQUFNUixRQUFRd0IsUUFBUSx5QkFBMEIsQ0FBQ3ZDLEVBQVE0RCxNQUk3RDVDLEtBQUtHLFFBQVE4QixjQUFnQjlELEVBQUc4RSxjQUNoQ1osRUFBTXZDLEtBQUssV0FDUDNCLEVBQUc4RSxhQUFhakQsS0FBTU8sRUFBTUosUUFBUThCLGdCQUk1Q3ZCLElBRUFWLEtBQUtELFFBQVFFLEtBQUssZUFBZ0JELE1BRWxDQSxLQUFLbkIsTUFBUTZCLEVBQ2JvQixFQUFjRCxLQUFLN0IsU0ExTS9CLENBK01Ha0QiLCJmaWxlIjoiY29yZS9zY3JvbGxzcHkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgVUlraXQgMi4yNy4yIHwgaHR0cDovL3d3dy5nZXR1aWtpdC5jb20gfCAoYykgMjAxNCBZT090aGVtZSB8IE1JVCBMaWNlbnNlICovXHJcbihmdW5jdGlvbihVSSkge1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciAkd2luICAgICAgICAgICA9IFVJLiR3aW4sXHJcbiAgICAgICAgJGRvYyAgICAgICAgICAgPSBVSS4kZG9jLFxyXG4gICAgICAgIHNjcm9sbHNwaWVzICAgID0gW10sXHJcbiAgICAgICAgY2hlY2tTY3JvbGxTcHkgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBzY3JvbGxzcGllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5hcHBseSh3aW5kb3csIFtzY3JvbGxzcGllc1tpXS5jaGVja10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICBVSS5jb21wb25lbnQoJ3Njcm9sbHNweScsIHtcclxuXHJcbiAgICAgICAgZGVmYXVsdHM6IHtcclxuICAgICAgICAgICAgdGFyZ2V0ICAgICA6IGZhbHNlLFxyXG4gICAgICAgICAgICBjbHMgICAgICAgIDogJ3VrLXNjcm9sbHNweS1pbnZpZXcnLFxyXG4gICAgICAgICAgICBpbml0Y2xzICAgIDogJ3VrLXNjcm9sbHNweS1pbml0LWludmlldycsXHJcbiAgICAgICAgICAgIHRvcG9mZnNldCAgOiAwLFxyXG4gICAgICAgICAgICBsZWZ0b2Zmc2V0IDogMCxcclxuICAgICAgICAgICAgcmVwZWF0ICAgICA6IGZhbHNlLFxyXG4gICAgICAgICAgICBkZWxheSAgICAgIDogMFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGJvb3Q6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gbGlzdGVuIHRvIHNjcm9sbCBhbmQgcmVzaXplXHJcbiAgICAgICAgICAgICRkb2Mub24oJ3Njcm9sbGluZy51ay5kb2N1bWVudCcsIGNoZWNrU2Nyb2xsU3B5KTtcclxuICAgICAgICAgICAgJHdpbi5vbignbG9hZCByZXNpemUgb3JpZW50YXRpb25jaGFuZ2UnLCBVSS5VdGlscy5kZWJvdW5jZShjaGVja1Njcm9sbFNweSwgNTApKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGluaXQgY29kZVxyXG4gICAgICAgICAgICBVSS5yZWFkeShmdW5jdGlvbihjb250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgVUkuJCgnW2RhdGEtdWstc2Nyb2xsc3B5XScsIGNvbnRleHQpLmVhY2goZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gVUkuJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50LmRhdGEoJ3Njcm9sbHNweScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBVSS5zY3JvbGxzcHkoZWxlbWVudCwgVUkuVXRpbHMub3B0aW9ucyhlbGVtZW50LmF0dHIoJ2RhdGEtdWstc2Nyb2xsc3B5JykpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzLCBpbnZpZXdzdGF0ZSwgaW5pdGludmlldywgdG9nZ2xlY2xzID0gdGhpcy5vcHRpb25zLmNscy5zcGxpdCgvLC8pLCBmbiA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzICAgICA9ICR0aGlzLm9wdGlvbnMudGFyZ2V0ID8gJHRoaXMuZWxlbWVudC5maW5kKCR0aGlzLm9wdGlvbnMudGFyZ2V0KSA6ICR0aGlzLmVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsYXlJZHggICAgID0gZWxlbWVudHMubGVuZ3RoID09PSAxID8gMSA6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlY2xzSWR4ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5lYWNoKGZ1bmN0aW9uKGlkeCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ICAgICA9IFVJLiQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmlld3N0YXRlID0gZWxlbWVudC5kYXRhKCdpbnZpZXdzdGF0ZScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZpZXcgICAgICA9IFVJLlV0aWxzLmlzSW5WaWV3KGVsZW1lbnQsICR0aGlzLm9wdGlvbnMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGUgICAgICA9IGVsZW1lbnQuZGF0YSgndWtTY3JvbGxzcHlDbHMnKSB8fCB0b2dnbGVjbHNbdG9nZ2xlY2xzSWR4XS50cmltKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnZpZXcgJiYgIWludmlld3N0YXRlICYmICFlbGVtZW50LmRhdGEoJ3Njcm9sbHNweS1pZGxlJykpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW5pdGludmlldykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcygkdGhpcy5vcHRpb25zLmluaXRjbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMub2Zmc2V0ID0gZWxlbWVudC5vZmZzZXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpbnZpZXcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudHJpZ2dlcignaW5pdC51ay5zY3JvbGxzcHknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5kYXRhKCdzY3JvbGxzcHktaWRsZScsIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCd1ay1zY3JvbGxzcHktaW52aWV3JykudG9nZ2xlQ2xhc3ModG9nZ2xlKS53aWR0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC50cmlnZ2VyKCdpbnZpZXcudWsuc2Nyb2xsc3B5Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5kYXRhKCdzY3JvbGxzcHktaWRsZScsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YSgnaW52aWV3c3RhdGUnLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sICR0aGlzLm9wdGlvbnMuZGVsYXkgKiBkZWxheUlkeCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXlJZHgrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW52aWV3ICYmIGludmlld3N0YXRlICYmICR0aGlzLm9wdGlvbnMucmVwZWF0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5kYXRhKCdzY3JvbGxzcHktaWRsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoZWxlbWVudC5kYXRhKCdzY3JvbGxzcHktaWRsZScpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YSgnc2Nyb2xsc3B5LWlkbGUnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ3VrLXNjcm9sbHNweS1pbnZpZXcnKS50b2dnbGVDbGFzcyh0b2dnbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGEoJ2ludmlld3N0YXRlJywgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC50cmlnZ2VyKCdvdXR2aWV3LnVrLnNjcm9sbHNweScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlY2xzSWR4ID0gdG9nZ2xlY2xzW3RvZ2dsZWNsc0lkeCArIDFdID8gKHRvZ2dsZWNsc0lkeCArIDEpIDogMDtcclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZuKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrID0gZm47XHJcblxyXG4gICAgICAgICAgICBzY3JvbGxzcGllcy5wdXNoKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICB2YXIgc2Nyb2xsc3B5bmF2cyA9IFtdLFxyXG4gICAgICAgIGNoZWNrU2Nyb2xsU3B5TmF2cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IHNjcm9sbHNweW5hdnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYXBwbHkod2luZG93LCBbc2Nyb2xsc3B5bmF2c1tpXS5jaGVja10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICBVSS5jb21wb25lbnQoJ3Njcm9sbHNweW5hdicsIHtcclxuXHJcbiAgICAgICAgZGVmYXVsdHM6IHtcclxuICAgICAgICAgICAgY2xzICAgICAgICAgIDogJ3VrLWFjdGl2ZScsXHJcbiAgICAgICAgICAgIGNsb3Nlc3QgICAgICA6IGZhbHNlLFxyXG4gICAgICAgICAgICB0b3BvZmZzZXQgICAgOiAwLFxyXG4gICAgICAgICAgICBsZWZ0b2Zmc2V0ICAgOiAwLFxyXG4gICAgICAgICAgICBzbW9vdGhzY3JvbGwgOiBmYWxzZVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGJvb3Q6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gbGlzdGVuIHRvIHNjcm9sbCBhbmQgcmVzaXplXHJcbiAgICAgICAgICAgICRkb2Mub24oJ3Njcm9sbGluZy51ay5kb2N1bWVudCcsIGNoZWNrU2Nyb2xsU3B5TmF2cyk7XHJcbiAgICAgICAgICAgICR3aW4ub24oJ3Jlc2l6ZSBvcmllbnRhdGlvbmNoYW5nZScsIFVJLlV0aWxzLmRlYm91bmNlKGNoZWNrU2Nyb2xsU3B5TmF2cywgNTApKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGluaXQgY29kZVxyXG4gICAgICAgICAgICBVSS5yZWFkeShmdW5jdGlvbihjb250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgVUkuJCgnW2RhdGEtdWstc2Nyb2xsc3B5LW5hdl0nLCBjb250ZXh0KS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IFVJLiQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudC5kYXRhKCdzY3JvbGxzcHluYXYnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gVUkuc2Nyb2xsc3B5bmF2KGVsZW1lbnQsIFVJLlV0aWxzLm9wdGlvbnMoZWxlbWVudC5hdHRyKCdkYXRhLXVrLXNjcm9sbHNweS1uYXYnKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBpZHMgICAgID0gW10sXHJcbiAgICAgICAgICAgICAgICBsaW5rcyAgID0gdGhpcy5maW5kKFwiYVtocmVmXj0nIyddXCIpLmVhY2goZnVuY3Rpb24oKXsgaWYodGhpcy5nZXRBdHRyaWJ1dGUoJ2hyZWYnKS50cmltKCkhPT0nIycpIGlkcy5wdXNoKHRoaXMuZ2V0QXR0cmlidXRlKCdocmVmJykpOyB9KSxcclxuICAgICAgICAgICAgICAgIHRhcmdldHMgPSBVSS4kKGlkcy5qb2luKFwiLFwiKSksXHJcblxyXG4gICAgICAgICAgICAgICAgY2xzQWN0aXZlICA9IHRoaXMub3B0aW9ucy5jbHMsXHJcbiAgICAgICAgICAgICAgICBjbHNDbG9zZXN0ID0gdGhpcy5vcHRpb25zLmNsb3Nlc3QgfHwgdGhpcy5vcHRpb25zLmNsb3Nlc3Q7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzLCBpbnZpZXdzLCBmbiA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgaW52aWV3cyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MCA7IGkgPCB0YXJnZXRzLmxlbmd0aCA7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChVSS5VdGlscy5pc0luVmlldyh0YXJnZXRzLmVxKGkpLCAkdGhpcy5vcHRpb25zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZpZXdzLnB1c2godGFyZ2V0cy5lcShpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpbnZpZXdzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmF2aXRlbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcCA9ICR3aW4uc2Nyb2xsVG9wKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8IGludmlld3MubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludmlld3NbaV0ub2Zmc2V0KCkudG9wIC0gJHRoaXMub3B0aW9ucy50b3BvZmZzZXQgPj0gc2Nyb2xsVG9wKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGludmlld3NbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMub3B0aW9ucy5jbG9zZXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtzLmJsdXIoKS5jbG9zZXN0KGNsc0Nsb3Nlc3QpLnJlbW92ZUNsYXNzKGNsc0FjdGl2ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdml0ZW1zID0gbGlua3MuZmlsdGVyKFwiYVtocmVmPScjXCIrdGFyZ2V0LmF0dHIoJ2lkJykrXCInXVwiKS5jbG9zZXN0KGNsc0Nsb3Nlc3QpLmFkZENsYXNzKGNsc0FjdGl2ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmF2aXRlbXMgPSBsaW5rcy5yZW1vdmVDbGFzcyhjbHNBY3RpdmUpLmZpbHRlcihcImFbaHJlZj0nI1wiK3RhcmdldC5hdHRyKFwiaWRcIikrXCInXVwiKS5hZGRDbGFzcyhjbHNBY3RpdmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZWxlbWVudC50cmlnZ2VyKCdpbnZpZXcudWsuc2Nyb2xsc3B5bmF2JywgW3RhcmdldCwgbmF2aXRlbXNdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc21vb3Roc2Nyb2xsICYmIFVJLnNtb290aFNjcm9sbCkge1xyXG4gICAgICAgICAgICAgICAgbGlua3MuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIFVJLnNtb290aFNjcm9sbCh0aGlzLCAkdGhpcy5vcHRpb25zLnNtb290aHNjcm9sbCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm4oKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5kYXRhKCdzY3JvbGxzcHluYXYnLCB0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2sgPSBmbjtcclxuICAgICAgICAgICAgc2Nyb2xsc3B5bmF2cy5wdXNoKHRoaXMpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbn0pKFVJa2l0Mik7Il19
